{
  "bundles": {
    "pages": {
      "/_app": []
    },
    "sortedPages": [],
    "analysis": {
      "totalSize": 4364870977,
      "largeFiles": [
        {
          "file": "static/chunks/_app-pages-browser_src_components_notifications_SimulationNotifications_tsx.js",
          "size": 2716646,
          "sizeFormatted": "2.59 MB"
        },
        {
          "file": "static/chunks/_app-pages-browser_src_modules_leaves_components_LeaveForm_tsx.js",
          "size": 4478364,
          "sizeFormatted": "4.27 MB"
        },
        {
          "file": "static/chunks/main-app.js",
          "size": 6654058,
          "sizeFormatted": "6.35 MB"
        },
        {
          "file": "static/chunks/app/layout.js",
          "size": 5053897,
          "sizeFormatted": "4.82 MB"
        },
        {
          "file": "static/chunks/app/page.js",
          "size": 2612771,
          "sizeFormatted": "2.49 MB"
        },
        {
          "file": "static/chunks/app/utilisateurs/page.js",
          "size": 3640746,
          "sizeFormatted": "3.47 MB"
        },
        {
          "file": "static/chunks/app/planning/hebdomadaire/page.js",
          "size": 7030821,
          "sizeFormatted": "6.71 MB"
        },
        {
          "file": "static/chunks/app/parametres/page.js",
          "size": 3457812,
          "sizeFormatted": "3.3 MB"
        },
        {
          "file": "static/chunks/app/conges/page.js",
          "size": 3645570,
          "sizeFormatted": "3.48 MB"
        },
        {
          "file": "static/chunks/app/calendrier/page.js",
          "size": 9357200,
          "sizeFormatted": "8.92 MB"
        },
        {
          "file": "static/chunks/app/auth/connexion/page.js",
          "size": 664409,
          "sizeFormatted": "648.84 KB"
        },
        {
          "file": "static/chunks/app/admin/bloc-operatoire/page.js",
          "size": 588628,
          "sizeFormatted": "574.83 KB"
        },
        {
          "file": "static/chunks/app/admin/bloc-operatoire/secteurs/page.js",
          "size": 3250621,
          "sizeFormatted": "3.1 MB"
        },
        {
          "file": "static/chunks/app/admin/bloc-operatoire/salles/page.js",
          "size": 3962612,
          "sizeFormatted": "3.78 MB"
        },
        {
          "file": "static/chunks/app/admin/bloc-operatoire/regles-supervision/page.js",
          "size": 4049872,
          "sizeFormatted": "3.86 MB"
        },
        {
          "file": "server/middleware.js",
          "size": 2574216,
          "sizeFormatted": "2.45 MB"
        },
        {
          "file": "server/vendor-chunks/@fullcalendar.js",
          "size": 1684256,
          "sizeFormatted": "1.61 MB"
        },
        {
          "file": "server/vendor-chunks/@mui.js",
          "size": 1510692,
          "sizeFormatted": "1.44 MB"
        },
        {
          "file": "server/vendor-chunks/@radix-ui.js",
          "size": 687775,
          "sizeFormatted": "671.66 KB"
        },
        {
          "file": "server/vendor-chunks/engine.io-client.js",
          "size": 625289,
          "sizeFormatted": "610.63 KB"
        },
        {
          "file": "server/vendor-chunks/engine.io.js",
          "size": 789328,
          "sizeFormatted": "770.83 KB"
        },
        {
          "file": "server/vendor-chunks/framer-motion.js",
          "size": 996771,
          "sizeFormatted": "973.41 KB"
        },
        {
          "file": "server/vendor-chunks/motion-dom.js",
          "size": 523073,
          "sizeFormatted": "510.81 KB"
        },
        {
          "file": "server/vendor-chunks/next-auth.js",
          "size": 1180592,
          "sizeFormatted": "1.13 MB"
        },
        {
          "file": "server/vendor-chunks/next.js",
          "size": 5166302,
          "sizeFormatted": "4.93 MB"
        },
        {
          "file": "server/vendor-chunks/openid-client.js",
          "size": 1016255,
          "sizeFormatted": "992.44 KB"
        },
        {
          "file": "server/vendor-chunks/react-beautiful-dnd.js",
          "size": 657620,
          "sizeFormatted": "642.21 KB"
        },
        {
          "file": "server/vendor-chunks/react-datepicker.js",
          "size": 1858894,
          "sizeFormatted": "1.77 MB"
        },
        {
          "file": "server/vendor-chunks/socket.io-adapter.js",
          "size": 532661,
          "sizeFormatted": "520.18 KB"
        },
        {
          "file": "server/vendor-chunks/zod.js",
          "size": 537590,
          "sizeFormatted": "524.99 KB"
        },
        {
          "file": "server/app/page.js",
          "size": 1149311,
          "sizeFormatted": "1.1 MB"
        },
        {
          "file": "server/app/utilisateurs/page.js",
          "size": 1377196,
          "sizeFormatted": "1.31 MB"
        },
        {
          "file": "server/app/planning/hebdomadaire/page.js",
          "size": 1761097,
          "sizeFormatted": "1.68 MB"
        },
        {
          "file": "server/app/parametres/page.js",
          "size": 1254614,
          "sizeFormatted": "1.2 MB"
        },
        {
          "file": "server/app/conges/page.js",
          "size": 1238141,
          "sizeFormatted": "1.18 MB"
        },
        {
          "file": "server/app/calendrier/page.js",
          "size": 2170466,
          "sizeFormatted": "2.07 MB"
        },
        {
          "file": "server/app/auth/connexion/page.js",
          "size": 1056889,
          "sizeFormatted": "1.01 MB"
        },
        {
          "file": "server/app/admin/bloc-operatoire/page.js",
          "size": 1061874,
          "sizeFormatted": "1.01 MB"
        },
        {
          "file": "server/app/admin/bloc-operatoire/secteurs/page.js",
          "size": 1708819,
          "sizeFormatted": "1.63 MB"
        },
        {
          "file": "server/app/admin/bloc-operatoire/salles/page.js",
          "size": 1773001,
          "sizeFormatted": "1.69 MB"
        },
        {
          "file": "server/app/admin/bloc-operatoire/regles-supervision/page.js",
          "size": 1819923,
          "sizeFormatted": "1.74 MB"
        },
        {
          "file": "server/app/_not-found/page.js",
          "size": 997146,
          "sizeFormatted": "973.78 KB"
        }
      ],
      "recommendations": [
        "Bundle total trop volumineux. Considérer le code splitting.",
        "42 fichiers volumineux détectés. Optimiser ou diviser."
      ]
    },
    "staticFiles": {
      "totalSize": 62151522,
      "fileTypes": {
        ".json": {
          "count": 14,
          "totalSize": 889
        },
        ".js": {
          "count": 43,
          "totalSize": 61682541
        },
        ".woff2": {
          "count": 7,
          "totalSize": 208172
        },
        ".css": {
          "count": 4,
          "totalSize": 259920
        }
      },
      "largeFiles": [
        {
          "file": "css/app/layout.css",
          "size": 188036,
          "sizeFormatted": "183.63 KB"
        },
        {
          "file": "chunks/_app-pages-browser_src_components_notifications_SimulationNotifications_tsx.js",
          "size": 2716646,
          "sizeFormatted": "2.59 MB"
        },
        {
          "file": "chunks/_app-pages-browser_src_modules_leaves_components_LeaveForm_tsx.js",
          "size": 4478364,
          "sizeFormatted": "4.27 MB"
        },
        {
          "file": "chunks/app-pages-internals.js",
          "size": 225180,
          "sizeFormatted": "219.9 KB"
        },
        {
          "file": "chunks/main-app.js",
          "size": 6654058,
          "sizeFormatted": "6.35 MB"
        },
        {
          "file": "chunks/polyfills.js",
          "size": 112594,
          "sizeFormatted": "109.96 KB"
        },
        {
          "file": "chunks/app/layout.js",
          "size": 5053897,
          "sizeFormatted": "4.82 MB"
        },
        {
          "file": "chunks/app/page.js",
          "size": 2612771,
          "sizeFormatted": "2.49 MB"
        },
        {
          "file": "chunks/app/utilisateurs/page.js",
          "size": 3640746,
          "sizeFormatted": "3.47 MB"
        },
        {
          "file": "chunks/app/planning/hebdomadaire/page.js",
          "size": 7030821,
          "sizeFormatted": "6.71 MB"
        },
        {
          "file": "chunks/app/parametres/page.js",
          "size": 3457812,
          "sizeFormatted": "3.3 MB"
        },
        {
          "file": "chunks/app/conges/page.js",
          "size": 3645570,
          "sizeFormatted": "3.48 MB"
        },
        {
          "file": "chunks/app/calendrier/page.js",
          "size": 9357200,
          "sizeFormatted": "8.92 MB"
        },
        {
          "file": "chunks/app/auth/connexion/page.js",
          "size": 664409,
          "sizeFormatted": "648.84 KB"
        },
        {
          "file": "chunks/app/admin/bloc-operatoire/page.js",
          "size": 588628,
          "sizeFormatted": "574.83 KB"
        },
        {
          "file": "chunks/app/admin/bloc-operatoire/secteurs/page.js",
          "size": 3250621,
          "sizeFormatted": "3.1 MB"
        },
        {
          "file": "chunks/app/admin/bloc-operatoire/salles/page.js",
          "size": 3962612,
          "sizeFormatted": "3.78 MB"
        },
        {
          "file": "chunks/app/admin/bloc-operatoire/regles-supervision/page.js",
          "size": 4049872,
          "sizeFormatted": "3.86 MB"
        }
      ]
    }
  },
  "performance": {
    "Build Time": {
      "duration": 22905,
      "status": "error",
      "error": "Command failed: npm run build\nFailed to compile.\n\n./src/app/planning/validation/page.tsx\nModule not found: Can't resolve '@hello-pangea/dnd'\n\nhttps://nextjs.org/docs/messages/module-not-found\n\n\n> Build failed because of webpack errors\n"
    },
    "TypeScript Check": {
      "duration": 30055,
      "status": "error",
      "error": "spawnSync /bin/sh ETIMEDOUT"
    },
    "Test Suite": {
      "duration": 22261,
      "status": "error",
      "error": "Command failed: npm run test:critical\n(node:82652) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.\n(Use `node --trace-deprecation ...` to show where the warning was created)\n(node:82646) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.\n(Use `node --trace-deprecation ...` to show where the warning was created)\n(node:82650) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.\n(Use `node --trace-deprecation ...` to show where the warning was created)\nFAIL src/modules/conges/permissions/__tests__/LeavePermissionService.extended.test.ts\n  LeavePermissionService (Tests avancés)\n    Cache de permissions\n      ✕ devrait invalider le cache d'un utilisateur (22 ms)\n      ✕ devrait configurer le cache avec les options fournies (1 ms)\n    Permissions relatives\n      ✓ devrait correctement gérer les permissions d'équipe\n      ✓ devrait correctement gérer les permissions de département (1 ms)\n      ✓ devrait identifier correctement les permissions relatives\n    Permissions personnalisées\n      ✓ devrait accorder des permissions spéciales à un employé standard\n      ✓ devrait refuser des permissions normalement accordées à un rôle\n      ✓ devrait retourner la liste complète des permissions d'un utilisateur (1 ms)\n    Gestion des événements et du bus d'événements\n      ✓ devrait s'abonner aux événements d'audit pour la gestion du cache (1 ms)\n      ✓ devrait invalider le cache lors d'un changement de permission (2 ms)\n    Méthodes de gestion de permissions\n      ✓ devrait accorder une permission et journaliser l'action (7 ms)\n      ✓ devrait révoquer une permission et journaliser l'action (6 ms)\n      ✓ devrait réinitialiser les permissions personnalisées d'un utilisateur (1 ms)\n      ✓ devrait gérer les erreurs lors de l'octroi/révocation de permissions (6 ms)\n\n  ● LeavePermissionService (Tests avancés) › Cache de permissions › devrait invalider le cache d'un utilisateur\n\n    Property `delete` does not exist in the provided object\n\n      186 |             // Arrange\n      187 |             const userId = mockEmployee.id;\n    > 188 |             const cacheSpy = jest.spyOn(permissionService['permissionCache'], 'delete');\n          |                                   ^\n      189 |\n      190 |             // Act\n      191 |             permissionService.invalidateUserCache(mockEmployee.id);\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:731:13)\n      at Object.<anonymous> (src/modules/conges/permissions/__tests__/LeavePermissionService.extended.test.ts:188:35)\n\n  ● LeavePermissionService (Tests avancés) › Cache de permissions › devrait configurer le cache avec les options fournies\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n      212 |\n      213 |             // Assert\n    > 214 |             expect(optionsSpy).toHaveBeenCalled();\n          |                                ^\n      215 |\n      216 |             // Note: Ne pas tester les stats ici car elles peuvent varier en fonction de l'environnement\n      217 |             // et de l'ordre d'exécution des tests\n\n      at Object.<anonymous> (src/modules/conges/permissions/__tests__/LeavePermissionService.extended.test.ts:214:32)\n\nFAIL src/modules/conges/services/__tests__/QuotaAdvancedService.test.ts\n  QuotaAdvancedService\n    getActiveTransferRules\n      ✓ devrait récupérer les règles de transfert actives (4 ms)\n      ✓ devrait gérer les erreurs lors de la récupération des règles (4 ms)\n    getActiveCarryOverRules\n      ✓ devrait récupérer les règles de report actives (1 ms)\n      ✓ devrait gérer les erreurs lors de la récupération des règles (1 ms)\n    simulateTransfer\n      ✓ devrait simuler un transfert valide avec application des règles\n      ✓ devrait détecter un transfert invalide si le montant dépasse le quota disponible\n    executeTransfer\n      ✕ devrait exécuter un transfert valide (143 ms)\n      ✓ devrait rejeter un transfert si la simulation échoue (1 ms)\n    simulateCarryOver\n      ✓ devrait simuler un report valide (1 ms)\n      ✓ devrait calculer correctement un report avec pourcentage (5 ms)\n    executeCarryOver\n      ✕ devrait exécuter un report valide (15 ms)\n      ✓ devrait rejeter un report si la simulation échoue (2 ms)\n    getEnhancedQuotaState\n      ✓ devrait récupérer et combiner les informations de quotas, transferts et reports (5 ms)\n      ✓ devrait gérer une erreur lors de la récupération des données (1 ms)\n\n  ● QuotaAdvancedService › executeTransfer › devrait exécuter un transfert valide\n\n    AxiosError: Network Error\n\n      305 |\n      306 |             // Envoyer l'entrée à l'API\n    > 307 |             const response = await axios.post(`${this.apiBaseUrl}/entries`, enhancedEntry, {\n          |                              ^\n      308 |                 headers: this.defaultHeaders\n      309 |             });\n      310 |\n\n      at XMLHttpRequest.handleError (node_modules/axios/lib/adapters/xhr.js:110:14)\n      at XMLHttpRequest.invokeTheCallbackFunction (node_modules/jsdom/lib/jsdom/living/generated/EventHandlerNonNull.js:14:28)\n      at XMLHttpRequest.<anonymous> (node_modules/jsdom/lib/jsdom/living/helpers/create-event-accessor.js:35:32)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at XMLHttpRequestImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at fireAnEvent (node_modules/jsdom/lib/jsdom/living/helpers/events.js:18:36)\n      at requestErrorSteps (node_modules/jsdom/lib/jsdom/living/xhr/xhr-utils.js:131:3)\n      at Object.dispatchError (node_modules/jsdom/lib/jsdom/living/xhr/xhr-utils.js:60:3)\n      at Request.<anonymous> (node_modules/jsdom/lib/jsdom/living/xhr/XMLHttpRequest-impl.js:655:18)\n      at ClientRequest.<anonymous> (node_modules/jsdom/lib/jsdom/living/helpers/http-request.js:121:14)\n      at MockHttpSocket.emitEvent [as emit] (node_modules/@mswjs/interceptors/src/interceptors/ClientRequest/MockHttpSocket.ts:152:12)\n      at Socket.emit (node_modules/@mswjs/interceptors/src/interceptors/ClientRequest/MockHttpSocket.ts:271:14)\n      at Axios.request (node_modules/axios/lib/core/Axios.js:45:41)\n      at AuditService.createAuditEntry (src/modules/conges/services/AuditService.ts:307:30)\n      at QuotaAdvancedService.executeTransfer (src/modules/conges/services/QuotaAdvancedService.ts:199:13)\n      at Object.<anonymous> (src/modules/conges/services/__tests__/QuotaAdvancedService.test.ts:294:28)\n\n  ● QuotaAdvancedService › executeCarryOver › devrait exécuter un report valide\n\n    AxiosError: Network Error\n\n      305 |\n      306 |             // Envoyer l'entrée à l'API\n    > 307 |             const response = await axios.post(`${this.apiBaseUrl}/entries`, enhancedEntry, {\n          |                              ^\n      308 |                 headers: this.defaultHeaders\n      309 |             });\n      310 |\n\n      at XMLHttpRequest.handleError (node_modules/axios/lib/adapters/xhr.js:110:14)\n      at XMLHttpRequest.invokeTheCallbackFunction (node_modules/jsdom/lib/jsdom/living/generated/EventHandlerNonNull.js:14:28)\n      at XMLHttpRequest.<anonymous> (node_modules/jsdom/lib/jsdom/living/helpers/create-event-accessor.js:35:32)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at XMLHttpRequestImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at fireAnEvent (node_modules/jsdom/lib/jsdom/living/helpers/events.js:18:36)\n      at requestErrorSteps (node_modules/jsdom/lib/jsdom/living/xhr/xhr-utils.js:131:3)\n      at Object.dispatchError (node_modules/jsdom/lib/jsdom/living/xhr/xhr-utils.js:60:3)\n      at Request.<anonymous> (node_modules/jsdom/lib/jsdom/living/xhr/XMLHttpRequest-impl.js:655:18)\n      at ClientRequest.<anonymous> (node_modules/jsdom/lib/jsdom/living/helpers/http-request.js:121:14)\n      at MockHttpSocket.emitEvent [as emit] (node_modules/@mswjs/interceptors/src/interceptors/ClientRequest/MockHttpSocket.ts:152:12)\n      at Socket.emit (node_modules/@mswjs/interceptors/src/interceptors/ClientRequest/MockHttpSocket.ts:271:14)\n      at Axios.request (node_modules/axios/lib/core/Axios.js:45:41)\n      at AuditService.createAuditEntry (src/modules/conges/services/AuditService.ts:307:30)\n      at QuotaAdvancedService.executeCarryOver (src/modules/conges/services/QuotaAdvancedService.ts:359:13)\n      at Object.<anonymous> (src/modules/conges/services/__tests__/QuotaAdvancedService.test.ts:371:28)\n\n(node:82649) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.\n(Use `node --trace-deprecation ...` to show where the warning was created)\n(node:82645) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.\n(Use `node --trace-deprecation ...` to show where the warning was created)\n(node:82648) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.\n(Use `node --trace-deprecation ...` to show where the warning was created)\nFAIL src/modules/conges/hooks/useLeaveQuota.test.ts\n  useLeaveQuota\n    ✓ devrait initialiser correctement l'état (11 ms)\n    ✕ devrait charger les quotas de congés (20 ms)\n    ✓ devrait récupérer le quota pour un type spécifique (14 ms)\n    ✓ devrait vérifier si une demande respecte les quotas (9 ms)\n    ✓ devrait rejeter une demande qui dépasse les quotas (7 ms)\n    ✓ devrait gérer les erreurs lors du chargement des quotas (10 ms)\n\n  ● useLeaveQuota › devrait charger les quotas de congés\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 12\n    Received: 10\n\n       99 |         expect(result.current.totalBalance.pending).toBe(5);\n      100 |         expect(result.current.totalBalance.remaining).toBe(20);\n    > 101 |         expect(result.current.quotasByType.length).toBe(12); // Mise à jour pour tous les types incluant PATERNITY et PARENTAL\n          |                                                    ^\n      102 |     });\n      103 |\n      104 |     it('devrait récupérer le quota pour un type spécifique', async () => {\n\n      at Object.<anonymous> (src/modules/conges/hooks/useLeaveQuota.test.ts:101:52)\n\nFAIL src/modules/conges/services/quotaService.test.ts\n  quotaService\n    simulateQuotaTransfer\n      ✓ calcule correctement un transfert simple (1:1) (1 ms)\n      ✕ calcule correctement un transfert avec ratio personnalisé (1 ms)\n      ✓ refuse le transfert si le montant est insuffisant\n      ✓ utilise un ratio de 1:1 si aucune règle applicable n'est trouvée (1 ms)\n    simulateCarryOverCalculation\n      ✓ calcule correctement un report en pourcentage (50%) (1 ms)\n      ✓ calcule correctement un report avec un montant fixe\n      ✓ calcule correctement un report de tous les jours restants (1 ms)\n    isTransferRuleApplicable\n      ✓ retourne false si la règle est inactive\n      ✓ retourne false si la date de début est future\n      ✓ retourne false si la date de fin est passée\n      ✓ retourne true pour une règle active sans restrictions de date (1 ms)\n    isInSpecialPeriod\n      ✓ identifie correctement une date dans une période simple\n      ✓ gère correctement une période chevauchant deux années\n      ✓ gère correctement une période récurrente (sans année spécifique)\n\n  ● quotaService › simulateQuotaTransfer › calcule correctement un transfert avec ratio personnalisé\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 2\n    Received: 4\n\n      112 |             expect(result.success).toBe(true);\n      113 |             expect(result.sourceAmount).toBe(4);\n    > 114 |             expect(result.targetAmount).toBe(2);\n          |                                         ^\n      115 |         });\n      116 |\n      117 |         it('refuse le transfert si le montant est insuffisant', async () => {\n\n      at Object.<anonymous> (src/modules/conges/services/quotaService.test.ts:114:41)\n\n(node:82647) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.\n(Use `node --trace-deprecation ...` to show where the warning was created)\nFAIL src/modules/conges/hooks/useConflictDetection.test.ts\n  useConflictDetection\n    ✕ devrait initialiser correctement le hook (3 ms)\n    validateDates\n      ✕ devrait valider correctement des dates valides (1 ms)\n      ✕ devrait rejeter des dates invalides - startDate null (1 ms)\n      ✕ devrait rejeter des dates invalides - endDate null\n      ✕ devrait rejeter des dates invalides - date de début après date de fin\n      ✕ devrait rejeter des dates lorsque la validation échoue\n    checkConflicts\n      ✕ devrait vérifier les conflits et mettre à jour l'état - sans conflits\n      ✕ devrait vérifier les conflits et mettre à jour l'état - avec conflits\n      ✕ devrait gérer les erreurs lors de la vérification des conflits\n      ✕ devrait rejeter avec une erreur si les dates sont invalides (1 ms)\n      ✕ ne devrait pas appeler checkLeaveConflicts si les dates sont invalides\n      ✕ devrait mettre à jour les conflits lorsque le service renvoie des conflits (1 ms)\n      ✕ devrait gérer les erreurs du service\n      ✕ ne devrait pas appeler le service si les dates sont invalides\n    getConflictsByType\n      ✕ devrait filtrer les conflits par type\n    resolveConflict\n      ✕ devrait supprimer un conflit et mettre à jour l'état des conflits bloquants\n    resetConflicts\n      ✕ devrait réinitialiser l'état des conflits\n  Integration useConflictDetection avec useDateValidation\n    ✓ devrait vérifier les conflits et gérer la validation des dates (426 ms)\n\n  ● useConflictDetection › devrait initialiser correctement le hook\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/conges/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › validateDates › devrait valider correctement des dates valides\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/conges/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › validateDates › devrait rejeter des dates invalides - startDate null\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/conges/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › validateDates › devrait rejeter des dates invalides - endDate null\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/conges/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › validateDates › devrait rejeter des dates invalides - date de début après date de fin\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/conges/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › validateDates › devrait rejeter des dates lorsque la validation échoue\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/conges/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › checkConflicts › devrait vérifier les conflits et mettre à jour l'état - sans conflits\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/conges/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › checkConflicts › devrait vérifier les conflits et mettre à jour l'état - avec conflits\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/conges/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › checkConflicts › devrait gérer les erreurs lors de la vérification des conflits\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/conges/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › checkConflicts › devrait rejeter avec une erreur si les dates sont invalides\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/conges/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › checkConflicts › ne devrait pas appeler checkLeaveConflicts si les dates sont invalides\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/conges/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › checkConflicts › devrait mettre à jour les conflits lorsque le service renvoie des conflits\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/conges/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › checkConflicts › devrait gérer les erreurs du service\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/conges/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › checkConflicts › ne devrait pas appeler le service si les dates sont invalides\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/conges/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › getConflictsByType › devrait filtrer les conflits par type\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/conges/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › resolveConflict › devrait supprimer un conflit et mettre à jour l'état des conflits bloquants\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/conges/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › resetConflicts › devrait réinitialiser l'état des conflits\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/conges/hooks/useConflictDetection.test.ts:93:14)\n\nFAIL src/modules/conges/permissions/__tests__/LeavePermissionService.test.ts\n  LeavePermissionService\n    getInstance\n      ✓ devrait retourner une instance singleton (31 ms)\n    hasPermission\n      ✓ devrait accorder les permissions de base à un employé standard (1 ms)\n      ✓ devrait refuser les permissions administratives à un employé standard (2 ms)\n      ✓ devrait accorder des permissions de management à un manager (2 ms)\n      ✓ devrait accorder toutes les permissions à un administrateur système (3 ms)\n      ✓ devrait prendre en compte les permissions personnalisées accordées (2 ms)\n      ✓ devrait prendre en compte les permissions personnalisées refusées (1 ms)\n      ✓ devrait vérifier les permissions relatives à l'équipe correctement (1 ms)\n    hasPermissions\n      ✓ devrait vérifier que l'utilisateur a toutes les permissions (requireAll=true) (5 ms)\n      ✓ devrait vérifier que l'utilisateur a au moins une permission (requireAll=false) (1 ms)\n    grantPermission\n      ✕ devrait accorder une permission à un utilisateur (3 ms)\n      ✕ devrait retourner false si l'API échoue (16 ms)\n    revokePermission\n      ✕ devrait révoquer une permission d'un utilisateur (1 ms)\n      ✕ devrait retourner false si l'API échoue (3 ms)\n    getUserPermissions\n      ✕ devrait retourner toutes les permissions d'un utilisateur (2 ms)\n      ✓ devrait retourner un tableau vide si l'API échoue (1 ms)\n    resetUserPermissions\n      ✕ devrait réinitialiser les permissions personnalisées d'un utilisateur (2 ms)\n      ✕ devrait retourner false si l'API échoue (3 ms)\n\n  ● LeavePermissionService › grantPermission › devrait accorder une permission à un utilisateur\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n      344 |\n      345 |             // Assert\n    > 346 |             expect(result).toBe(true);\n          |                            ^\n      347 |             expect(mockFetch).toHaveBeenCalledWith(\n      348 |                 `/api/conges/permissions/${userId}/grant`,\n      349 |                 expect.objectContaining({\n\n      at Object.<anonymous> (src/modules/conges/permissions/__tests__/LeavePermissionService.test.ts:346:28)\n\n  ● LeavePermissionService › grantPermission › devrait retourner false si l'API échoue\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: Anything, StringContaining \"Échoué (API: 500)\", Anything, ObjectContaining {\"granterId\": \"manager-456\", \"permission\": \"leaves.reports.view\", \"userId\": \"test-user\"}\n\n    Number of calls: 0\n\n      383 |             expect(result).toBe(false);\n      384 |             expect(mockFetch).toHaveBeenCalledTimes(1);\n    > 385 |             expect(mockAuditServiceInstance.logPermissionChange).toHaveBeenCalledWith(\n          |                                                                  ^\n      386 |                 expect.anything(), // AuditActionType.PERMISSION_GRANT_FAILED - utiliser expect.anything() pour l'instant\n      387 |                 expect.stringContaining('Échoué (API: 500)'),\n      388 |                 expect.anything(), // AuditSeverity.ERROR - utiliser expect.anything() pour l'instant\n\n      at Object.<anonymous> (src/modules/conges/permissions/__tests__/LeavePermissionService.test.ts:385:66)\n\n  ● LeavePermissionService › revokePermission › devrait révoquer une permission d'un utilisateur\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n      410 |\n      411 |             // Assert\n    > 412 |             expect(result).toBe(true);\n          |                            ^\n      413 |             expect(mockFetch).toHaveBeenCalledWith(\n      414 |                 `/api/conges/permissions/${userId}/revoke`,\n      415 |                 expect.objectContaining({\n\n      at Object.<anonymous> (src/modules/conges/permissions/__tests__/LeavePermissionService.test.ts:412:28)\n\n  ● LeavePermissionService › revokePermission › devrait retourner false si l'API échoue\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: Anything, StringContaining \"Échoué (API: 500)\", Anything, ObjectContaining {\"granterId\": \"manager-456\", \"permission\": \"leaves.reports.view\", \"userId\": \"test-user\"}\n\n    Number of calls: 0\n\n      445 |             expect(result).toBe(false);\n      446 |             expect(mockFetch).toHaveBeenCalledTimes(1);\n    > 447 |             expect(mockAuditServiceInstance.logPermissionChange).toHaveBeenCalledWith(\n          |                                                                  ^\n      448 |                 expect.anything(),\n      449 |                 expect.stringContaining('Échoué (API: 500)'),\n      450 |                 expect.anything(),\n\n      at Object.<anonymous> (src/modules/conges/permissions/__tests__/LeavePermissionService.test.ts:447:66)\n\n  ● LeavePermissionService › getUserPermissions › devrait retourner toutes les permissions d'un utilisateur\n\n    expect(received).toEqual(expected) // deep equality\n\n    - Expected  - 4\n    + Received  + 1\n\n    - Array [\n    -   \"leaves.reports.view\",\n    -   \"leaves.request\",\n    - ]\n    + Array []\n\n      471 |             // Assert\n      472 |             expect(mockFetch).toHaveBeenCalledWith(`/api/utilisateurs/${userId}`);\n    > 473 |             expect(permissions).toEqual(mockPermissions);\n          |                                 ^\n      474 |         });\n      475 |\n      476 |         it('devrait retourner un tableau vide si l\\'API échoue', async () => {\n\n      at Object.<anonymous> (src/modules/conges/permissions/__tests__/LeavePermissionService.test.ts:473:33)\n\n  ● LeavePermissionService › resetUserPermissions › devrait réinitialiser les permissions personnalisées d'un utilisateur\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"/api/conges/permissions/custom-user-123/reset\", ObjectContaining {\"method\": \"POST\"}\n    Received: \"/api/conges/permissions/custom-user-123\", {\"method\": \"DELETE\"}\n\n    Number of calls: 1\n\n      533 |             // Assert\n      534 |             expect(result).toBe(true);\n    > 535 |             expect(mockFetch).toHaveBeenCalledWith(\n          |                               ^\n      536 |                 `/api/conges/permissions/${userId}/reset`,\n      537 |                 expect.objectContaining({ method: 'POST' })\n      538 |             );\n\n      at Object.<anonymous> (src/modules/conges/permissions/__tests__/LeavePermissionService.test.ts:535:31)\n\n  ● LeavePermissionService › resetUserPermissions › devrait retourner false si l'API échoue\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: Anything, StringContaining \"Échoué (API: 500)\", Anything, ObjectContaining {\"granterId\": \"manager-456\", \"userId\": \"test-user\"}\n\n    Number of calls: 0\n\n      553 |             // Assert\n      554 |             expect(result).toBe(false);\n    > 555 |             expect(mockAuditServiceInstance.logPermissionChange).toHaveBeenCalledWith(\n          |                                                                  ^\n      556 |                 expect.anything(), // AuditActionType.PERMISSION_RESET_FAILED\n      557 |                 expect.stringContaining('Échoué (API: 500)'),\n      558 |                 expect.anything(), // AuditSeverity.ERROR\n\n      at Object.<anonymous> (src/modules/conges/permissions/__tests__/LeavePermissionService.test.ts:555:66)\n\nFAIL src/lib/auth/__tests__/authorization.test.ts\n  Authorization Module\n    hasRole\n      ✓ devrait autoriser un admin total à accéder aux ressources admin (7 ms)\n      ✓ devrait autoriser un admin partiel aux ressources appropriées (1 ms)\n      ✓ devrait limiter un utilisateur normal aux ressources utilisateur\n      ✓ devrait refuser l'accès aux utilisateurs inactifs (1 ms)\n      ✓ devrait refuser l'accès si l'utilisateur est null\n    hasPermission\n      ✓ devrait vérifier les permissions spécifiques\n      ✓ devrait refuser les permissions aux utilisateurs inactifs\n      ✓ devrait refuser les permissions si l'utilisateur est null\n    canAccessResource\n      ✓ devrait permettre aux admins d'accéder à toutes les ressources (1 ms)\n      ✓ devrait permettre aux utilisateurs d'accéder à leurs propres ressources\n      ✓ devrait refuser l'accès aux ressources d'autres utilisateurs\n      ✓ devrait refuser l'accès aux utilisateurs inactifs\n    canManageLeaves\n      ✓ devrait permettre aux admins de gérer les congés\n      ✓ devrait permettre aux secrétaires de gérer les congés\n      ✓ devrait refuser la gestion des congés aux utilisateurs normaux\n      ✓ devrait refuser la gestion des congés aux utilisateurs inactifs (1 ms)\n    canManagePlanning\n      ✓ devrait permettre seulement aux admins totaux de gérer les plannings\n      ✓ devrait refuser la gestion des plannings aux utilisateurs inactifs\n    canViewReports\n      ✓ devrait permettre aux admins de voir les rapports (1 ms)\n      ✓ devrait permettre aux secrétaires de voir les rapports\n      ✓ devrait refuser l'accès aux rapports aux utilisateurs normaux (8 ms)\n      ✓ devrait refuser l'accès aux rapports aux utilisateurs inactifs (2 ms)\n    Scénarios complexes d'autorisation\n      ✓ devrait gérer les autorisations en cascade (1 ms)\n      ✓ devrait gérer les autorisations basées sur le rôle professionnel (2 ms)\n      ✓ devrait gérer les autorisations temporaires (2 ms)\n    Tests de performance d'autorisation\n      ✓ devrait vérifier les autorisations rapidement\n      ✓ devrait gérer efficacement de nombreux utilisateurs (4 ms)\n    Tests de sécurité\n      ✓ devrait résister aux tentatives de contournement\n      ✕ devrait valider tous les paramètres d'entrée (1 ms)\n      ✓ devrait empêcher l'escalade de privilèges\n\n  ● Authorization Module › Tests de sécurité › devrait valider tous les paramètres d'entrée\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: false\n    Received: true\n\n      370 |\n      371 |             // Test avec des rôles invalides\n    > 372 |             expect(hasRole(regularUser, 'INVALID_ROLE')).toBe(false);\n          |                                                          ^\n      373 |         });\n      374 |\n      375 |         it('devrait empêcher l\\'escalade de privilèges', () => {\n\n      at Object.<anonymous> (src/lib/auth/__tests__/authorization.test.ts:372:58)\n\n(node:82651) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.\n(Use `node --trace-deprecation ...` to show where the warning was created)\nFAIL src/modules/conges/services/__tests__/conflictRecommendationService.test.ts\n  ConflictRecommendationService\n    getInstance\n      ✓ devrait retourner une instance singleton (3 ms)\n    analyzeConflicts\n      ✓ devrait retourner un résultat vide si aucun conflit n'est fourni (11 ms)\n      ✓ devrait analyser tous les conflits et générer des recommandations (5 ms)\n      ✕ devrait identifier correctement les résolutions automatiques possibles (4 ms)\n      ✓ devrait calculer correctement la distribution des priorités (2 ms)\n      ✓ devrait identifier correctement les conflits les plus prioritaires (2 ms)\n    updateRules\n      ✕ devrait mettre à jour les règles et émettre un événement (1 ms)\n    resetRulesToDefault\n      ✕ devrait réinitialiser les règles aux valeurs par défaut\n    Méthodes privées - via type assertion\n      determineConflictPriority\n        ✓ devrait utiliser les règles de priorité spécifiques si disponibles\n        ✓ devrait ajuster la priorité pour les utilisateurs avec rôles prioritaires\n      generateResolutionStrategies\n        ✓ devrait générer des stratégies différentes selon le type de conflit (1 ms)\n\n  ● ConflictRecommendationService › analyzeConflicts › devrait identifier correctement les résolutions automatiques possibles\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n      134 |\n      135 |             // Vérifier que l'événement a été émis pour les résolutions automatiques\n    > 136 |             expect(mockEventBus.emit).toHaveBeenCalled();\n          |                                       ^\n      137 |         });\n      138 |\n      139 |         it('devrait calculer correctement la distribution des priorités', () => {\n\n      at Object.<anonymous> (src/modules/conges/services/__tests__/conflictRecommendationService.test.ts:136:39)\n\n  ● ConflictRecommendationService › updateRules › devrait mettre à jour les règles et émettre un événement\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: {\"data\": {\"updatedBy\": \"user\", \"updatedRules\": [\"priorityRules\"]}, \"type\": \"conflict.rules.updated\"}\n\n    Number of calls: 0\n\n      186 |\n      187 |             // Vérifier que l'événement a été émis\n    > 188 |             expect(mockEventBus.emit).toHaveBeenCalledWith({\n          |                                       ^\n      189 |                 type: 'conflict.rules.updated',\n      190 |                 data: {\n      191 |                     updatedRules: Object.keys(newRules),\n\n      at Object.<anonymous> (src/modules/conges/services/__tests__/conflictRecommendationService.test.ts:188:39)\n\n  ● ConflictRecommendationService › resetRulesToDefault › devrait réinitialiser les règles aux valeurs par défaut\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: {\"data\": {\"resetToDefault\": true, \"updatedBy\": \"user\", \"updatedRules\": [\"all\"]}, \"type\": \"conflict.rules.updated\"}\n\n    Number of calls: 0\n\n      215 |\n      216 |             // Vérifier que l'événement a été émis\n    > 217 |             expect(mockEventBus.emit).toHaveBeenCalledWith({\n          |                                       ^\n      218 |                 type: 'conflict.rules.updated',\n      219 |                 data: {\n      220 |                     updatedRules: ['all'],\n\n      at Object.<anonymous> (src/modules/conges/services/__tests__/conflictRecommendationService.test.ts:217:39)\n\nFAIL src/modules/conges/services/leaveCalculator.test.ts\n  leaveCalculator\n    calculateLeaveCountedDays\n      ✕ devrait calculer correctement les jours pour une période standard (2 ms)\n      ✕ devrait calculer correctement une demi-journée du matin\n      ✕ devrait calculer correctement une demi-journée de l'après-midi (1 ms)\n      ✕ devrait ignorer isHalfDay si startDate et endDate sont différents\n      ✕ devrait prendre en compte les jours fériés (2 ms)\n      ✓ devrait mettre en cache les résultats et les réutiliser (1 ms)\n      ✓ devrait forcer le rafraîchissement du cache si demandé\n    isBusinessDay\n      ✓ devrait retourner false pour les weekends\n      ✓ devrait retourner false pour les jours fériés (1 ms)\n      ✓ devrait retourner true pour les jours ouvrables normaux\n\n  ● leaveCalculator › calculateLeaveCountedDays › devrait calculer correctement les jours pour une période standard\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 5\n    Received: 0\n\n      48 |\n      49 |             expect(result).not.toBeNull();\n    > 50 |             expect(result?.countedDays).toBe(5);\n         |                                         ^\n      51 |             expect(result?.naturalDays).toBe(5);\n      52 |             expect(result?.halfDays).toBe(0);\n      53 |         });\n\n      at Object.<anonymous> (src/modules/conges/services/leaveCalculator.test.ts:50:41)\n\n  ● leaveCalculator › calculateLeaveCountedDays › devrait calculer correctement une demi-journée du matin\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 0.5\n    Received: 0\n\n      63 |\n      64 |             expect(result).not.toBeNull();\n    > 65 |             expect(result?.countedDays).toBe(0.5);\n         |                                         ^\n      66 |             expect(result?.naturalDays).toBe(1);\n      67 |             expect(result?.halfDays).toBe(1);\n      68 |         });\n\n      at Object.<anonymous> (src/modules/conges/services/leaveCalculator.test.ts:65:41)\n\n  ● leaveCalculator › calculateLeaveCountedDays › devrait calculer correctement une demi-journée de l'après-midi\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 0.5\n    Received: 0\n\n      78 |\n      79 |             expect(result).not.toBeNull();\n    > 80 |             expect(result?.countedDays).toBe(0.5);\n         |                                         ^\n      81 |             expect(result?.naturalDays).toBe(1);\n      82 |             expect(result?.halfDays).toBe(1);\n      83 |         });\n\n      at Object.<anonymous> (src/modules/conges/services/leaveCalculator.test.ts:80:41)\n\n  ● leaveCalculator › calculateLeaveCountedDays › devrait ignorer isHalfDay si startDate et endDate sont différents\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 2\n    Received: 0\n\n      94 |\n      95 |             expect(result).not.toBeNull();\n    > 96 |             expect(result?.countedDays).toBe(2); // Devrait compter 2 jours complets\n         |                                         ^\n      97 |             expect(result?.naturalDays).toBe(2);\n      98 |             expect(result?.halfDays).toBe(0);\n      99 |         });\n\n      at Object.<anonymous> (src/modules/conges/services/leaveCalculator.test.ts:96:41)\n\n  ● leaveCalculator › calculateLeaveCountedDays › devrait prendre en compte les jours fériés\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 4\n    Received: 0\n\n      115 |\n      116 |             expect(result).not.toBeNull();\n    > 117 |             expect(result?.countedDays).toBe(4); // 5 jours - 1 jour férié\n          |                                         ^\n      118 |             expect(result?.naturalDays).toBe(5);\n      119 |         });\n      120 |\n\n      at Object.<anonymous> (src/modules/conges/services/leaveCalculator.test.ts:117:41)\n\nFAIL src/modules/conges/hooks/useLeave.test.ts\n  useLeave Hook\n    ✕ should initialize with null leave and empty leaves array when no initialLeave provided (97 ms)\n    ✓ should initialize with initialLeave when provided (2 ms)\n    updateLeaveField\n      ✓ should update a simple field like reason (1 ms)\n      ✓ should update startDate and recalculate countedDays if schedule exists (2 ms)\n      ✓ should update endDate and recalculate countedDays if schedule exists (2 ms)\n      ✓ should NOT recalculate countedDays if schedule is missing\n      ✓ should NOT recalculate countedDays if start date becomes after end date (2 ms)\n      ✓ should update type without recalculating days (1 ms)\n    calculateLeaveDuration\n      ✓ should call calculateLeaveDays with correct dates and schedule (2 ms)\n      ✓ should return 0 if schedule is missing\n      ✓ should return 0 if dates are missing (1 ms)\n    checkConflicts\n      ✓ should correctly call checkLeaveConflicts with Date objects when passed ISO strings (1 ms)\n      ✓ should handle invalid dates and set error without calling the service (9 ms)\n      ✕ should call checkLeaveConflicts service with Date objects and update state on success (6 ms)\n      ✓ should call setError with warning when conflicts are present but not blocking (2 ms)\n      ✓ should call setError with error severity when conflicts are blocking (3 ms)\n      ✓ should set error state if checkLeaveConflicts service fails (2 ms)\n      ✕ should return null if userId is missing (3 ms)\n      ✓ should handle errors correctly (1 ms)\n    checkAllowance\n      ✓ should call checkLeaveAllowance service and update state on success (7 ms)\n      ✓ should set error state if checkLeaveAllowance service fails (4 ms)\n      ✓ should handle errors correctly (2 ms)\n      ✓ should throw an error if required data (type) is missing (17 ms)\n      ✓ should throw an error if required data (countedDays) is missing (10 ms)\n    saveLeaveAsDraft\n      ✓ should call saveLeave service with DRAFT status and update state (4 ms)\n      ✓ should set error state if saveLeave service fails (4 ms)\n      ✓ should throw an error if leave state is null (4 ms)\n    submitLeave\n      ✓ should call submitLeaveRequest service with PENDING status and update state (2 ms)\n      ✓ should set error state if submitLeaveRequest service fails (2 ms)\n      ✓ should throw an error if required data (type) is missing (4 ms)\n    approveLeaveRequest\n      ✓ should call approveLeave service and update state on success (1 ms)\n      ✓ should set error state if approveLeave service fails (6 ms)\n      ✓ should throw an error if leave id is missing (3 ms)\n    rejectLeaveRequest\n      ✓ should call rejectLeave service and update state on success (1 ms)\n      ✓ should set error state if rejectLeave service fails (3 ms)\n      ✓ should throw an error if leave id is missing (1 ms)\n    cancelLeaveRequest\n      ✓ should call cancelLeave service and update state on success (2 ms)\n      ✓ should set error state if cancelLeave service fails (5 ms)\n      ✓ should throw an error if leave id is missing (1 ms)\n    fetchUserLeaves\n      ✓ should call fetchLeaves service and update leaves state on success (1 ms)\n      ✓ should call fetchLeaves service with provided filters (5 ms)\n      ✕ should set error state if fetchLeaves service fails (5 ms)\n    fetchLeaveDetails\n      ✓ should call fetchLeaveById service and update leave state on success (1 ms)\n      ✕ should set error state if fetchLeaveById service fails (1 ms)\n\n  ● useLeave Hook › should initialize with null leave and empty leaves array when no initialLeave provided\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: false\n    Received: true\n\n      172 |         expect(result.current.leave).toBeNull();\n      173 |         expect(result.current.leaves).toEqual([]);\n    > 174 |         expect(result.current.loading).toBe(false);\n          |                                        ^\n      175 |         expect(result.current.error).toBeNull();\n      176 |         expect(result.current.conflictCheckResult).toBeNull();\n      177 |         expect(result.current.allowanceCheckResult).toBeNull();\n\n      at Object.<anonymous> (src/modules/conges/hooks/useLeave.test.ts:174:40)\n\n  ● useLeave Hook › checkConflicts › should call checkLeaveConflicts service with Date objects and update state on success\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n      461 |\n      462 |             // Vérifier que loading était true pendant l'appel\n    > 463 |             expect(loadingDuringCall).toBe(true);\n          |                                       ^\n      464 |\n      465 |             // Vérifier les états après l'appel\n      466 |             expect(result.current.loading).toBe(false);\n\n      at Object.<anonymous> (src/modules/conges/hooks/useLeave.test.ts:463:39)\n\n  ● useLeave Hook › checkConflicts › should return null if userId is missing\n\n    expect(jest.fn()).not.toHaveBeenCalled()\n\n    Expected number of calls: 0\n    Received number of calls: 1\n\n    1: 2024-09-01T22:00:00.000Z, 2024-09-05T22:00:00.000Z, \"user123\", \"leave-initial\"\n\n      589 |\n      590 |             // Vérifier que le service n'a pas été appelé\n    > 591 |             expect(mockedCheckLeaveConflicts).not.toHaveBeenCalled();\n          |                                                   ^\n      592 |\n      593 |             // Vérifier que setError a été appelé avec les informations appropriées\n      594 |             expect(mockedSetError).toHaveBeenCalledWith(\n\n      at Object.<anonymous> (src/modules/conges/hooks/useLeave.test.ts:591:51)\n\n  ● useLeave Hook › fetchUserLeaves › should set error state if fetchLeaves service fails\n\n    Fetch leaves failed\n\n      1097 |\n      1098 |         it('should set error state if fetchLeaves service fails', async () => {\n    > 1099 |             const mockError = new Error('Fetch leaves failed');\n           |                               ^\n      1100 |             mockedFetchLeaves.mockRejectedValueOnce(mockError);\n      1101 |\n      1102 |             const { result } = renderHook(() => useLeave({ userId: mockUserId }));\n\n      at Object.<anonymous> (src/modules/conges/hooks/useLeave.test.ts:1099:31)\n\n  ● useLeave Hook › fetchUserLeaves › should set error state if fetchLeaves service fails\n\n    expect(received).toEqual(expected) // deep equality\n\n    - Expected  -  1\n    + Received  + 14\n\n    - Array []\n    + Array [\n    +   Object {\n    +     \"countedDays\": 5,\n    +     \"createdAt\": 2024-07-31T22:00:00.000Z,\n    +     \"endDate\": 2024-09-05T22:00:00.000Z,\n    +     \"id\": \"leave-initial\",\n    +     \"requestDate\": 2024-07-31T22:00:00.000Z,\n    +     \"startDate\": 2024-09-01T22:00:00.000Z,\n    +     \"status\": \"DRAFT\",\n    +     \"type\": \"ANNUAL\",\n    +     \"updatedAt\": 2024-07-31T22:00:00.000Z,\n    +     \"userId\": \"user123\",\n    +   },\n    + ]\n\n      1119 |                 severity: 'error'\n      1120 |             });\n    > 1121 |             expect(result.current.leaves).toEqual([]); // Liste reste vide\n           |                                           ^\n      1122 |         });\n      1123 |     });\n      1124 |\n\n      at Object.<anonymous> (src/modules/conges/hooks/useLeave.test.ts:1121:43)\n\n  ● useLeave Hook › fetchLeaveDetails › should set error state if fetchLeaveById service fails\n\n    Fetch details failed\n\n      1146 |         it('should set error state if fetchLeaveById service fails', async () => {\n      1147 |             const specificLeaveId = 'leave-fail';\n    > 1148 |             const mockError = new Error('Fetch details failed');\n           |                               ^\n      1149 |             mockedFetchLeaveById.mockRejectedValueOnce(mockError);\n      1150 |\n      1151 |             const { result } = renderHook(() => useLeave({ userId: mockUserId }));\n\n      at Object.<anonymous> (src/modules/conges/hooks/useLeave.test.ts:1148:31)\n\n(node:82644) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.\n(Use `node --trace-deprecation ...` to show where the warning was created)\nPASS src/modules/conges/hooks/useLeaveCalculation.test.ts\n  useLeaveCalculation\n    ✓ should return initial state correctly (2 ms)\n    ✓ should calculate details when valid dates and schedule are provided (6 ms)\n    ✓ should load public holidays within the date range (4 ms)\n    ✓ should handle calculation options like countHalfDays (3 ms)\n    ✓ should set status to error if calculateLeaveCountedDays throws (5 ms)\n    ✓ should use externalWorkSchedule if provided (2 ms)\n    ✓ should allow recalculation (7 ms)\n    ✓ should set status to loading when work schedule is loading (3 ms)\n    ✓ should set status to error if work schedule fetch fails (1 ms)\n    ✓ should not calculate if dates are invalid (endDate before startDate) (4 ms)\n    ✓ should correctly recalculate when recalculate is called (7 ms)\n    ✓ should handle undefined result from calculateLeaveCountedDays gracefully (4 ms)\n    ✓ should not trigger calculation if workSchedule is initially null and dates are present (1 ms)\n    ✓ should have isLoading true and status loading if workSchedule is loading, even with dates (1 ms)\n\nPASS src/modules/conges/hooks/useLeaveValidation.test.ts\n  useLeaveValidation\n    ✓ devrait valider une demande de congé correcte (5 ms)\n    ✓ devrait rejeter une demande avec une date dans le passé (2 ms)\n    ✓ devrait rejeter une demande où la date de fin est avant la date de début (2 ms)\n    ✓ devrait rejeter une demande qui dépasse le quota disponible (2 ms)\n    ✓ devrait valider une demande qui respecte le quota disponible (2 ms)\n    ✓ devrait réinitialiser toutes les erreurs (1 ms)\n    ✓ devrait rejeter une demande avec dates null ou undefined (3 ms)\n    ✓ devrait fournir des messages d'erreur corrects (2 ms)\n    ✓ devrait correctement gérer les périodes d'exclusion (blackout) (2 ms)\n    ✓ devrait mettre à jour correctement le contexte via setContext (5 ms)\n    ✓ devrait gérer correctement les propriétés d'utilisateur null (3 ms)\n\nPASS src/modules/conges/components/LeaveCard.test.tsx\n  LeaveCard\n    ✓ renders correctly with pending status (25 ms)\n    ✓ does not show action buttons when status is not PENDING (3 ms)\n    ✓ calls onEdit when edit button is clicked (5 ms)\n    ✓ calls onCancel when cancel button is clicked (3 ms)\n    ✓ calls onView when the card is clicked (5 ms)\n    ✓ shows expanded content when isExpanded is true and content exists (6 ms)\n    ✓ does not show action buttons when showActions is false (7 ms)\n\nPASS src/modules/conges/services/__tests__/leaveService.integration.test.ts\n  Leave Workflow Integration Tests\n    Workflow complet de demande de congé\n      ✓ devrait permettre de créer, approuver et suivre une demande de congé (3 ms)\n      ✓ devrait rejeter une demande si quota insuffisant\n      ✓ devrait détecter les conflits de dates (1 ms)\n    Gestion des congés récurrents\n      ✓ devrait créer plusieurs occurrences pour un congé récurrent (1 ms)\n    Calculs de jours ouvrés\n      ✓ devrait calculer correctement les jours ouvrés en excluant les week-ends\n      ✓ devrait gérer les jours fériés\n    Gestion des quotas avancée\n      ✓ devrait gérer le report de congés d'une année sur l'autre (1 ms)\n      ✓ devrait calculer les quotas pour temps partiel\n    Tests de performance\n      ✓ devrait traiter efficacement de gros volumes de congés (26 ms)\n      ✓ devrait calculer rapidement les conflits sur une grande période (3 ms)\n\nPASS src/modules/conges/__tests__/integration/riskDetectionSystem.test.ts\n  Système de détection des risques - Tests d'intégration\n    Détection des périodes à risque\n      ✓ devrait détecter une période à risque pendant les vacances d'été (2 ms)\n      ✓ devrait réagir à la création d'un congé en analysant les périodes à risque (1 ms)\n      ✓ devrait détecter les périodes à risque CRITICAL avec un score élevé\n    Gestion des périodes à risque\n      ✓ devrait récupérer les périodes à risque actuelles\n      ✓ devrait récupérer les périodes à risque à venir (1 ms)\n      ✓ devrait désactiver une période à risque\n    Performance du système de détection\n      ✓ devrait analyser les périodes à risque en moins de 500ms (1 ms)\n      ✓ devrait gérer efficacement un grand nombre d'événements consécutifs (1 ms)\n    Intégration avec le système de gestion des conflits\n      ✓ devrait émettre un événement quand une nouvelle période à risque est détectée (1 ms)\n      ✓ devrait mettre à jour les données historiques lors de la résolution d'un conflit\n\nFAIL src/modules/conges/quotas/transfer/__tests__/useQuotaTransfer.test.tsx\n  useQuotaTransfer\n    ✕ devrait charger les données initiales (1020 ms)\n    ✕ devrait calculer correctement les types disponibles (6 ms)\n    ✕ devrait simuler un transfert correctement (37 ms)\n    ✕ devrait exécuter un transfert correctement (6 ms)\n    ✓ devrait retourner une erreur si le transfert n'est pas autorisé (8 ms)\n    ✕ devrait gérer les erreurs de transfert (7 ms)\n    ○ skipped devrait gérer les erreurs du service de solde\n\n  ● useQuotaTransfer › devrait charger les données initiales\n\n    expect(received).not.toBeNull()\n\n    Received: null\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div />\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n      130 |         expect(result.current.error).toBeNull();\n      131 |\n    > 132 |         await waitFor(() => expect(result.current.balance).not.toBeNull());\n          |                                                                ^\n      133 |\n      134 |         // Vérifier l'état après chargement\n      135 |         expect(result.current.loading).toBe(false);\n\n      at src/modules/conges/quotas/transfer/__tests__/useQuotaTransfer.test.tsx:132:64\n      at callback (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:76)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)\n\n  ● useQuotaTransfer › devrait calculer correctement les types disponibles\n\n    expect(received).toContain(expected) // indexOf\n\n    Expected value: \"ANNUAL\"\n    Received array: []\n\n      151 |\n      152 |         // Vérifier les types sources disponibles\n    > 153 |         expect(result.current.availableSourceTypes).toContain(LeaveType.ANNUAL);\n          |                                                     ^\n      154 |         expect(result.current.availableSourceTypes).toContain(LeaveType.RECOVERY);\n      155 |\n      156 |         // Vérifier les types cibles disponibles par source\n\n      at Object.<anonymous> (src/modules/conges/quotas/transfer/__tests__/useQuotaTransfer.test.tsx:153:53)\n\n  ● useQuotaTransfer › devrait simuler un transfert correctement\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: {\"sourceAmount\": 5, \"sourceType\": \"RECOVERY\", \"targetType\": \"ANNUAL\", \"userId\": \"mock-user-id\"}, [{\"createdAt\": 2025-05-26T14:56:03.078Z, \"id\": \"rule-1\", \"isActive\": true, \"name\": \"Récupération vers Congés Annuels\", \"ratio\": 1, \"ruleType\": \"STANDARD\", \"sourceType\": \"RECOVERY\", \"targetType\": \"ANNUAL\", \"updatedAt\": 2025-05-26T14:56:03.078Z}]\n\n    Number of calls: 0\n\n      188 |\n      189 |         // Vérifier les appels et le résultat\n    > 190 |         expect(previewQuotaTransfer).toHaveBeenCalledWith(transferRequest, applicableRules);\n          |                                      ^\n      191 |         expect(simulationResult).toMatchObject({\n      192 |             success: true,\n      193 |             sourceAmount: 5,\n\n      at Object.<anonymous> (src/modules/conges/quotas/transfer/__tests__/useQuotaTransfer.test.tsx:190:38)\n\n  ● useQuotaTransfer › devrait exécuter un transfert correctement\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: {\"sourceAmount\": 5, \"sourceType\": \"RECOVERY\", \"targetType\": \"ANNUAL\", \"userId\": \"mock-user-id\"}\n\n    Number of calls: 0\n\n      221 |\n      222 |         // Vérifier les appels et le résultat\n    > 223 |         expect(transferQuota).toHaveBeenCalledWith(transferRequest);\n          |                               ^\n      224 |         expect(fetchLeaveBalance).toHaveBeenCalledTimes(2);\n      225 |         expect(transferResult).toEqual(mockTransferResult);\n      226 |     });\n\n      at Object.<anonymous> (src/modules/conges/quotas/transfer/__tests__/useQuotaTransfer.test.tsx:223:31)\n\n  ● useQuotaTransfer › devrait gérer les erreurs de transfert\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"Erreur lors du transfert\"\n    Received: \"Aucune règle de transfert n'est disponible pour Récupération vers Congés annuels\"\n\n      304 |         expect(transferResult.success).toBe(false);\n      305 |         expect(result.current.transferError).toBeInstanceOf(Error);\n    > 306 |         expect(result.current.transferError?.message).toBe(errorMessage);\n          |                                                       ^\n      307 |     });\n      308 | }); \n\n      at Object.<anonymous> (src/modules/conges/quotas/transfer/__tests__/useQuotaTransfer.test.tsx:306:55)\n\nPASS src/modules/conges/services/leaveService.test.ts\n  leaveService\n    formatLeavePeriod\n      ✓ should format the period correctly\n    getLeaveTypeLabel\n      ✓ should return correct labels for known types (1 ms)\n      ✓ should return the type itself for unknown types\n    getLeaveStatusLabel\n      ✓ should return correct labels for known statuses\n      ✓ should return the status itself for unknown statuses (1 ms)\n    fetchLeaves\n      ✓ should call prisma.leave.count and prisma.leave.findMany with default parameters\n      ✓ should apply filters correctly to prisma queries (2 ms)\n    submitLeaveRequest\n      ✓ should submit a leave request (1 ms)\n    calculateLeaveDays\n      ✓ should calculate leave days based on schedule (5 ms)\n\nPASS src/modules/conges/components/__tests__/LeaveRequestForm.test.tsx\n  LeaveRequestForm Component\n    ✓ should call saveDraft when draft button is clicked (17 ms)\n    ✓ should call submitLeave when submit button is clicked (5 ms)\n    ✓ should call cancel when cancel button is clicked (3 ms)\n    ✓ should display proper user ID in the form (1 ms)\n    ✓ renders the mocked form structure (5 ms)\n\nPASS src/modules/conges/services/__tests__/AuditService.test.ts\n  AuditService\n    getInstance\n      ✓ devrait retourner une instance singleton\n    initEventSubscriptions\n      ✓ devrait s'abonner aux événements du bus d'événements (1 ms)\n    createAuditEntry\n      ✓ devrait créer une entrée d'audit via l'API (1 ms)\n      ✓ devrait gérer les erreurs lors de la création (3 ms)\n    handleLeaveEvent\n      ✓ devrait créer une entrée d'audit pour un événement de congé (13 ms)\n      ✓ devrait créer des entrées d'audit avec la bonne sévérité selon le type d'événement (1 ms)\n      ✓ devrait gérer les erreurs lors du traitement d'un événement de congé\n    handleQuotaEvent\n      ✓ devrait créer une entrée d'audit pour un événement de quota\n      ✓ devrait générer des descriptions spécifiques pour chaque type d'événement de quota (1 ms)\n    handleGenericAuditEvent\n      ✓ devrait traiter correctement les événements d'audit génériques\n      ✓ devrait gérer les erreurs lors du traitement d'un événement d'audit générique\n    mapIntegrationEventToAuditType\n      ✓ devrait mapper correctement les types d'événements d'intégration vers les types d'audit (1 ms)\n      ✓ devrait retourner null pour les types d'événements non mappés\n    searchAuditEntries\n      ✓ devrait rechercher des entrées d'audit avec les filtres spécifiés (1 ms)\n      ✓ devrait gérer les options de tri dans la recherche\n      ✓ devrait gérer les erreurs lors de la recherche\n    getAuditEntry\n      ✓ devrait récupérer une entrée d'audit par ID\n      ✓ devrait gérer les erreurs lors de la récupération d'une entrée d'audit (1 ms)\n    méthodes de journalisation spécifiques\n      ✓ devrait journaliser l'accès au système\n      ✓ devrait journaliser les changements de rôle utilisateur (3 ms)\n      ✓ devrait journaliser les changements de permission\n      ✓ devrait journaliser l'exportation de données\n      ✓ devrait journaliser les changements de configuration\n\nPASS src/modules/conges/services/__tests__/quotaManagementService.test.ts\n  ✓ should run (1 ms)\n  QuotaManagementService\n    ✓ doit être un singleton\n    ✓ doit récupérer les règles de transfert (1 ms)\n    ✓ doit gérer les erreurs lors de la récupération des règles (4 ms)\n    ✓ devrait simuler un transfert de quota avec succès (1 ms)\n    ✓ doit gérer les erreurs lors de la simulation de transfert\n    ✓ doit demander un transfert avec succès (1 ms)\n    ✓ doit gérer les erreurs lors de la demande de transfert (1 ms)\n    ✓ doit récupérer l'historique des transferts\n    ✓ doit gérer les erreurs lors de la récupération de l'historique (1 ms)\n    ✓ doit approuver un transfert avec succès (2 ms)\n    ✓ doit gérer les échecs d'approbation\n    ✓ doit rejeter un transfert avec succès (1 ms)\n    ✓ doit gérer les échecs de rejet\n    getCarryOverRules\n      ✓ doit récupérer les règles de report avec succès (1 ms)\n      ✓ doit gérer les erreurs lors de la récupération des règles de report\n    requestCarryOver\n      ✓ doit demander un report avec succès\n      ✓ doit gérer les erreurs lors de la demande de report (5 ms)\n    processCarryOverRequest\n      ✓ doit traiter une demande de report (approbation) avec succès (1 ms)\n      ✓ doit gérer les erreurs lors du traitement d'une demande de report\n\nPASS src/modules/conges/components/LeaveRequestForm.test.tsx\n  LeaveRequestForm Component\n    ✓ should render form correctly (246 ms)\n    ✓ should validate dates when date fields change (44 ms)\n    ✓ should validate the leave request when both dates are set and form is submitted (33 ms)\n    ✓ should display field error messages when validation fails on submit (19 ms)\n\nPASS src/modules/conges/services/__tests__/leaveCalculator.test.ts\n  Leave Calculator Service\n    calculateLeaveCountedDays\n      ✓ devrait calculer correctement les jours pour une période standard (14 ms)\n      ✓ devrait calculer correctement les jours ouvrables pour une période incluant un weekend (2 ms)\n      ✓ devrait prendre en compte les jours fériés (3 ms)\n      ✓ devrait gérer les demi-journées (1 ms)\n      ✓ devrait respecter l'emploi du temps à temps partiel (3 ms)\n      ✓ devrait gérer les jours fériés tombant un weekend (2 ms)\n      ✓ devrait utiliser le cache pour des appels répétés avec les mêmes paramètres (1 ms)\n      ✓ devrait gérer les erreurs correctement (1 ms)\n      ✓ devrait calculer correctement une demi-journée du matin (1 ms)\n      ✓ devrait calculer correctement une demi-journée de l'après-midi (1 ms)\n      ✓ devrait ignorer isHalfDay si startDate et endDate sont différents (2 ms)\n    calculateWorkingDays\n      ✓ devrait calculer correctement les jours ouvrables\n      ✓ devrait exclure les weekends (1 ms)\n      ✓ devrait exclure les jours fériés (1 ms)\n    isBusinessDay\n      ✓ devrait identifier correctement les jours ouvrables (4 ms)\n      ✓ devrait gérer les dates invalides\n\nPASS src/modules/conges/hooks/useLeaveListFilteringSorting.test.ts\n  useLeaveListFilteringSorting Hook\n    Sorting Logic\n      ✓ should sort by startDate descending by default (if initial state requires) (2 ms)\n      ✓ should sort by startDate ascending (1 ms)\n      ✓ should sort by user name ascending (handling different name structures) (10 ms)\n      ✓ should sort by user name descending\n      ✓ should sort by type ascending (1 ms)\n      ✓ should sort by status descending (1 ms)\n    Filtering Logic\n      ✓ should filter by user name (partial, case-insensitive) (7 ms)\n      ✓ should filter by exact type (1 ms)\n      ✓ should filter by exact status (1 ms)\n      ✓ should filter by exact startDate (YYYY-MM-DD)\n      ✓ should filter by reason (partial, case-insensitive) (1 ms)\n      ✓ should combine multiple filters (user and status)\n      ✓ should return all leaves if filter is empty (1 ms)\n      ✓ should return empty array if no leaves match\n    Combined Logic and Edge Cases\n      ✓ should filter then sort (1 ms)\n      ✓ should handle empty leaves array input\n\nPASS src/modules/conges/services/__tests__/notificationEventService.test.ts\n  NotificationEventService\n    Singleton Pattern\n      ✓ should always return the same instance\n    handleLeaveCreated\n      ✓ should notify when a leave is created (1 ms)\n      ✓ should handle errors gracefully (1 ms)\n    handleLeaveStatusChanged\n      ✓ should notify when leave status changes (1 ms)\n    handleLeaveConflict\n      ✓ should notify when there is a leave conflict\n    handleQuotaUpdated\n      ✓ should notify when quota is low\n      ✓ should not notify when quota is above threshold\n    configuration\n      ✓ should update notification configuration\n    checkUpcomingLeaves\n      ✓ should send reminders for upcoming leaves\n      ✓ should not send reminders for non-approved leaves\n\nPASS src/modules/conges/utils/__tests__/dateCalculations.test.ts\n  calculateCountedDays\n    ✓ should return 5 for a full work week (Mon-Fri) (1 ms)\n    ✓ should return 0 if endDate is before startDate\n    ✓ should exclude weekends by default (Fri-Mon period)\n    ✓ should include weekends if excludeWeekends is false\n    ✓ should return 0 for a period covering only weekend days\n    ✓ should exclude a public holiday falling on a weekday (1 ms)\n    ✓ should exclude multiple public holidays on weekdays\n    ✓ should correctly handle public holiday on a weekend (no double exclusion, weekend already excluded)\n    ✓ should not exclude public holiday on a weekend if weekends are included\n    ✓ should return 1 for a single weekday (not holiday)\n    ✓ should return 0 for a single weekend day\n    ✓ should return 0 for a single weekday public holiday\n    ✓ should return 0 for a single weekend public holiday\n    ✓ should return 1 for a single weekend day if weekends are included and not a holiday\n    ✓ should return 0 for a single weekend day if weekends are included BUT it IS a holiday\n    ✓ should return 0 for a period of only public holidays on weekdays\n    ✓ should handle dates crossing month boundaries\n    ✓ should handle dates crossing year boundaries\n    ✓ should handle empty publicHolidays array correctly (1 ms)\n    ✓ should normalize start and end dates to midnight for calculation\n  calculateCountedDays - Half Days\n    ✓ should return 0.5 for a half day on a weekday (AM)\n    ✓ should return 0.5 for a half day on a weekday (PM)\n    ✓ should return 0 for a half day on a Saturday\n    ✓ should return 0 for a half day on a Sunday (1 ms)\n    ✓ should return 0 for a half day on a public holiday (weekday)\n    ✓ should return 0 for a half day on a public holiday (weekend - already excluded by weekend rule)\n    ✓ should return 0.5 if excludeWeekends is false for a half day on a weekend (not holiday)\n    ✓ should return 0 if excludeWeekends is false for a half day on a weekend THAT IS a public holiday\n    ✓ halfDayPeriod AM or PM should give same result for counted days (0.5 or 0) (1 ms)\n\nPASS src/modules/conges/api/__tests__/LeaveReportApi.test.ts\n  LeaveReportApi\n    getInstance\n      ✓ devrait retourner une instance singleton (1 ms)\n    normalizeDateParam\n      ✓ devrait formater correctement les dates (2 ms)\n    getReportData\n      ✓ devrait récupérer des données de rapport correctement\n      ✓ devrait gérer les erreurs lors de la récupération de rapports (2 ms)\n    méthodes de rapport spécifiques\n      ✓ devrait appeler getReportData avec le bon type pour getLeaveUsageReport\n      ✓ devrait appeler getReportData avec le bon type pour getLeaveBalanceReport\n      ✓ devrait appeler getReportData avec le bon type pour getLeaveDistributionReport (1 ms)\n      ✓ devrait appeler getReportData avec le bon type pour getDepartmentComparisonReport\n      ✓ devrait appeler getReportData avec le bon type pour getLeaveHistoryReport\n      ✓ devrait appeler getReportData avec le bon type pour getApprovalTimeReport\n      ✓ devrait appeler getReportData avec le bon type pour getQuotaTransfersReport\n    getCustomReport\n      ✓ devrait appeler l'API avec une requête personnalisée (2 ms)\n    exportReport\n      ✓ devrait lancer une tâche d'exportation (1 ms)\n    getExportStatus\n      ✓ devrait récupérer le statut d'une tâche d'exportation\n    downloadExportedFile\n      ✓ devrait télécharger un fichier exporté (1 ms)\n\nFAIL src/modules/conges/services/conflictDetectionService.test.ts\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @/modules/teams/services/teamService mapped as:\n    /Users/vincentperreard/Mathildanesth/src/modules/$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@\\/modules\\/(.*)$/\": \"/Users/vincentperreard/Mathildanesth/src/modules/$1\"\n      },\n      \"resolver\": undefined\n    }\n\n       8 |\n       9 | jest.mock('../../../services/userService');\n    > 10 | jest.mock('@/modules/teams/services/teamService');\n         |      ^\n      11 | jest.mock('../../../utils/performanceLogger');\n      12 |\n      13 | const MockUserService = UserService as jest.MockedClass<typeof UserService>;\n\n      at createNoMappedModuleFoundError (node_modules/jest-resolve/build/resolver.js:759:17)\n      at Object.<anonymous> (src/modules/conges/services/conflictDetectionService.test.ts:10:6)\n\nFAIL src/modules/conges/services/__tests__/leaveService.test.ts\n  ● Test suite failed to run\n\n    ReferenceError: Cannot access 'serviceMocks_1' before initialization\n\n      36 | // Mock Prisma\n      37 | jest.mock('@/lib/prisma', () => ({\n    > 38 |     prisma: mockPrismaClient,\n         |             ^\n      39 | }));\n      40 |\n      41 | // Mock des utilitaires\n\n      at src/modules/conges/services/__tests__/leaveService.test.ts:38:13\n      at Object.require (src/modules/conges/services/leaveService.ts:43:1)\n      at Object.<anonymous> (src/modules/conges/services/__tests__/leaveService.test.ts:7:1)\n\nFAIL src/modules/conges/services/__tests__/leaveCalculator.comprehensive.test.ts\n  ● Test suite failed to run\n\n    Cannot find module '../../profiles/services/workScheduleService' from 'src/modules/conges/services/__tests__/leaveCalculator.comprehensive.test.ts'\n\n      13 | import { TestFactory } from '@/tests/factories/testFactorySimple';\n      14 | import { publicHolidayService } from '../publicHolidayService';\n    > 15 | import { isWorkingDay } from '../../profiles/services/workScheduleService';\n         | ^\n      16 | import { WorkSchedule, WorkFrequency } from '../../profiles/types/workSchedule';\n      17 | import { getLogger } from '@/utils/logger';\n      18 |\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)\n      at Object.<anonymous> (src/modules/conges/services/__tests__/leaveCalculator.comprehensive.test.ts:15:1)\n\nFAIL src/modules/conges/hooks/__tests__/useConflictDetection.test.ts (5.422 s)\n  ○ skipped should be implemented properly\n  useConflictDetection\n    ✕ devrait initialiser correctement l'état et vérifier les conflits (1018 ms)\n    ✓ devrait gérer les erreurs lors de la vérification des conflits (315 ms)\n  useConflictDetection - resolveConflict\n    ✕ devrait appeler le service (indirectement) et mettre à jour l'état après résolution (1004 ms)\n    ✕ devrait gérer les erreurs lors de la résolution (1004 ms)\n  useConflictDetection - getConflictsByType\n    ✕ devrait filtrer les conflits par type (1003 ms)\n\n  ● useConflictDetection › devrait initialiser correctement l'état et vérifier les conflits\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: false\n    Received: true\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div />\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n      86 |\n      87 |         // Attendre la fin du chargement\n    > 88 |         await waitFor(() => expect(result.current.loading).toBe(false));\n         |                                                            ^\n      89 |\n      90 |         // Assert : vérifier que la méthode du *service* a été appelée (indirectement par le hook)\n      91 |         // Il faut peut-être ajuster ce que le hook passe au service\n\n      at src/modules/conges/hooks/__tests__/useConflictDetection.test.ts:88:60\n      at callback (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:76)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)\n\n  ● useConflictDetection - resolveConflict › devrait appeler le service (indirectement) et mettre à jour l'état après résolution\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: false\n    Received: true\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div />\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n      160 |         // Charger les conflits initiaux en appelant checkConflicts avec des objets Date\n      161 |         act(() => { result.current.checkConflicts(mockStartDateObj, mockEndDateObj); });\n    > 162 |         await waitFor(() => expect(result.current.loading).toBe(false));\n          |                                                            ^\n      163 |         expect(result.current.conflicts).toEqual(initialConflictsResult.conflicts);\n      164 |         expect(result.current.hasBlockingConflicts).toBe(true);\n      165 |\n\n      at src/modules/conges/hooks/__tests__/useConflictDetection.test.ts:162:60\n      at callback (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:76)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)\n\n  ● useConflictDetection - resolveConflict › devrait gérer les erreurs lors de la résolution\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: false\n    Received: true\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div />\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n      202 |         // Charger les conflits initiaux en appelant checkConflicts avec des objets Date\n      203 |         act(() => { result.current.checkConflicts(mockStartDateObj, mockEndDateObj); });\n    > 204 |         await waitFor(() => expect(result.current.loading).toBe(false));\n          |                                                            ^\n      205 |\n      206 |         // Act : Appeler resolveConflict du hook. On s'attend à ce qu'il échoue.\n      207 |         // Pour simuler l'échec, on pourrait mocker une dépendance ou modifier le hook\n\n      at src/modules/conges/hooks/__tests__/useConflictDetection.test.ts:204:60\n      at callback (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:76)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)\n\n  ● useConflictDetection - getConflictsByType › devrait filtrer les conflits par type\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: false\n    Received: true\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div />\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n      244 |         // Charger les conflits en appelant checkConflicts avec des objets Date\n      245 |         act(() => { result.current.checkConflicts(mockStartDateObj, mockEndDateObj); });\n    > 246 |         await waitFor(() => expect(result.current.loading).toBe(false));\n          |                                                            ^\n      247 |\n      248 |         // Act & Assert : Appeler getConflictsByType du *hook*\n      249 |         expect(result.current.getConflictsByType(ConflictType.USER_LEAVE_OVERLAP)).toEqual([mockConflicts[0]]);\n\n      at src/modules/conges/hooks/__tests__/useConflictDetection.test.ts:246:60\n      at callback (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:76)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)\n\nPASS src/modules/conges/components/LeavesList.test.tsx\n  <LeavesList /> Component\n    ✓ should render table headers and filter inputs correctly (349 ms)\n    ✓ should display leave data in table rows (48 ms)\n    ✓ should display loading indicator when isLoading is true (28 ms)\n    ✓ should display error message when error prop is provided (17 ms)\n    ✓ should display empty state message when no leaves are found (after filtering) (16 ms)\n    ✓ should call onEditLeaveClick when edit button is clicked (39 ms)\n    ✓ should call onCancelLeaveClick when cancel button is clicked (41 ms)\n    ✓ should disable edit button for leaves with non-PENDING status (37 ms)\n    ✓ should disable cancel button for leaves with APPROVED or REJECTED status (37 ms)\n    ✓ should filter leaves when user inputs a name (27 ms)\n    ✓ should filter leaves by date range when date inputs change (35 ms)\n    ✓ should change sort field when different column header is clicked (15 ms)\n    ✓ should apply multiple filters simultaneously (23 ms)\n    ✓ should clear filters when filter inputs are cleared (31 ms)\n    ✓ should toggle sort direction when clicking the same column header twice (47 ms)\n    ✓ should reset sort direction when changing sort field (61 ms)\n    ✓ should maintain filters when changing sort criteria (64 ms)\n    ✓ should maintain sort criteria when changing filters (48 ms)\n    ✓ should show confirmation dialog when cancel button is clicked (35 ms)\n    ✓ should handle null user properties gracefully (13 ms)\n    ✓ should handle undefined user properties gracefully (13 ms)\n    ✓ should display partial user name when only one name property exists (15 ms)\n    ✓ should handle null or invalid dates gracefully (21 ms)\n    ✓ should handle null or undefined user object (15 ms)\n    ✓ should handle null or invalid dates gracefully (23 ms)\n    ✓ should handle null or undefined leave objects in the list (14 ms)\n    ✓ should handle a large number of leave items efficiently (1253 ms)\n    ✓ should have proper accessibility attributes for the table (47 ms)\n    ✓ should have focusable and operable interactive elements (34 ms)\n    ✓ should handle keyboard navigation appropriately (31 ms)\n    ✓ should handle null or undefined user object (13 ms)\n    ✓ should handle null or invalid dates gracefully (20 ms)\n    ○ skipped should filter leaves by type when type filter changes\n    ○ skipped should filter leaves by status when status filter changes\n    ○ skipped should sort leaves when sort field changes\n    ○ skipped should sort by user and type columns when clicked\n    Responsive behavior\n      ✓ should adapt to mobile screens (16 ms)\n      ✓ should show all columns on desktop screens (53 ms)\n    Pagination functionality\n      ✓ should handle a large number of leaves without crashing (38 ms)\n\nFAIL src/modules/conges/components/UserLeaveBalance.test.tsx (6.265 s)\n  UserLeaveBalance Component\n    ✕ affiche correctement les soldes de congés (1043 ms)\n    ✕ affiche un message d'erreur si le chargement échoue (1005 ms)\n    ✕ affiche un message si aucun solde n'est disponible (1003 ms)\n    ✕ respecte l'option compact=true en masquant les détails (1003 ms)\n    ✕ respecte l'option hideHeader=true (1003 ms)\n\n  ● UserLeaveBalance Component › affiche correctement les soldes de congés\n\n    Unable to find an element with the text: Congé Annuel. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div>\u001b[39m\n        \u001b[36m<div\u001b[39m\n          \u001b[33mclass\u001b[39m=\u001b[32m\"rounded-lg border bg-card text-card-foreground shadow-sm dark:bg-slate-800 dark:border-slate-700 w-full\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"flex flex-col space-y-1.5 p-6\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<h3\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"font-semibold tracking-tight bg-gradient-to-r from-primary-600 via-secondary-600 to-tertiary-600 bg-clip-text text-transparent text-lg\"\u001b[39m\n              \u001b[33mstyle\u001b[39m=\u001b[32m\"background-clip: text;\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mChargement des soldes...\u001b[0m\n            \u001b[36m</h3>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"p-6 pt-0\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"space-y-3\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</div>\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n      74 |\n      75 |         expectToBeInDocument(screen.getByText('Chargement des soldes...'));\n    > 76 |         await waitFor(() => {\n         |                      ^\n      77 |             expectToBeInDocument(screen.getByText('Congé Annuel'));\n      78 |         });\n      79 |\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at Object.<anonymous> (src/modules/conges/components/UserLeaveBalance.test.tsx:76:22)\n\n  ● UserLeaveBalance Component › affiche un message d'erreur si le chargement échoue\n\n    Unable to find an element with the text: Erreur. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div>\u001b[39m\n        \u001b[36m<div\u001b[39m\n          \u001b[33mclass\u001b[39m=\u001b[32m\"rounded-lg border bg-card text-card-foreground shadow-sm dark:bg-slate-800 dark:border-slate-700 w-full\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"flex flex-col space-y-1.5 p-6\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<h3\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"font-semibold tracking-tight bg-gradient-to-r from-primary-600 via-secondary-600 to-tertiary-600 bg-clip-text text-transparent text-lg\"\u001b[39m\n              \u001b[33mstyle\u001b[39m=\u001b[32m\"background-clip: text;\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mChargement des soldes...\u001b[0m\n            \u001b[36m</h3>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"p-6 pt-0\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"space-y-3\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</div>\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n       97 |         mockedAxios.get.mockRejectedValueOnce(new Error('Network error'));\n       98 |         render(<UserLeaveBalance userId={123} />);\n    >  99 |         await waitFor(() => {\n          |                      ^\n      100 |             expectToBeInDocument(screen.getByText('Erreur'));\n      101 |         });\n      102 |         expectToBeInDocument(screen.getByText('Impossible de charger les soldes de congés'));\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at Object.<anonymous> (src/modules/conges/components/UserLeaveBalance.test.tsx:99:22)\n\n  ● UserLeaveBalance Component › affiche un message si aucun solde n'est disponible\n\n    Unable to find an element with the text: Aucun solde disponible. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div>\u001b[39m\n        \u001b[36m<div\u001b[39m\n          \u001b[33mclass\u001b[39m=\u001b[32m\"rounded-lg border bg-card text-card-foreground shadow-sm dark:bg-slate-800 dark:border-slate-700 w-full\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"flex flex-col space-y-1.5 p-6\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<h3\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"font-semibold tracking-tight bg-gradient-to-r from-primary-600 via-secondary-600 to-tertiary-600 bg-clip-text text-transparent text-lg\"\u001b[39m\n              \u001b[33mstyle\u001b[39m=\u001b[32m\"background-clip: text;\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mChargement des soldes...\u001b[0m\n            \u001b[36m</h3>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"p-6 pt-0\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"space-y-3\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</div>\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n      106 |         mockedAxios.get.mockResolvedValueOnce({ data: [] });\n      107 |         render(<UserLeaveBalance userId={123} />);\n    > 108 |         await waitFor(() => {\n          |                      ^\n      109 |             expectToBeInDocument(screen.getByText('Aucun solde disponible'));\n      110 |         });\n      111 |     });\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at Object.<anonymous> (src/modules/conges/components/UserLeaveBalance.test.tsx:108:22)\n\n  ● UserLeaveBalance Component › respecte l'option compact=true en masquant les détails\n\n    Unable to find an element with the text: Congé Annuel. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div>\u001b[39m\n        \u001b[36m<div\u001b[39m\n          \u001b[33mclass\u001b[39m=\u001b[32m\"rounded-lg border bg-card text-card-foreground shadow-sm dark:bg-slate-800 dark:border-slate-700 w-full\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"flex flex-col space-y-1.5 p-6\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<h3\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"font-semibold tracking-tight bg-gradient-to-r from-primary-600 via-secondary-600 to-tertiary-600 bg-clip-text text-transparent text-lg\"\u001b[39m\n              \u001b[33mstyle\u001b[39m=\u001b[32m\"background-clip: text;\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mChargement des soldes...\u001b[0m\n            \u001b[36m</h3>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"p-6 pt-0\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"space-y-3\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</div>\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n      114 |         mockedAxios.get.mockResolvedValueOnce({ data: mockBalanceData });\n      115 |         render(<UserLeaveBalance userId={123} compact={true} />);\n    > 116 |         await waitFor(() => {\n          |                      ^\n      117 |             expectToBeInDocument(screen.getByText('Congé Annuel'));\n      118 |         });\n      119 |         expectToBeInDocument(screen.getByText('15.5 jours'));\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at Object.<anonymous> (src/modules/conges/components/UserLeaveBalance.test.tsx:116:22)\n\n  ● UserLeaveBalance Component › respecte l'option hideHeader=true\n\n    Unable to find an element with the text: Congé Annuel. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div>\u001b[39m\n        \u001b[36m<div\u001b[39m\n          \u001b[33mclass\u001b[39m=\u001b[32m\"rounded-lg border bg-card text-card-foreground shadow-sm dark:bg-slate-800 dark:border-slate-700 w-full\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"p-6 pt-0\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"space-y-3\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</div>\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n      126 |         mockedAxios.get.mockResolvedValueOnce({ data: mockBalanceData });\n      127 |         render(<UserLeaveBalance userId={123} hideHeader={true} />);\n    > 128 |         await waitFor(() => {\n          |                      ^\n      129 |             expectToBeInDocument(screen.getByText('Congé Annuel'));\n      130 |         });\n      131 |         expectNotToBeInDocument(screen.queryByText('Soldes de congés'));\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at Object.<anonymous> (src/modules/conges/components/UserLeaveBalance.test.tsx:128:22)\n\nFAIL src/modules/conges/components/LeaveForm.test.tsx (12.75 s)\n  LeaveForm\n    ✓ should render initial form elements correctly (391 ms)\n    ✓ should display loading state for leave types (9 ms)\n    ✕ should handle error when loading leave types (1011 ms)\n    ✕ should call useLeaveCalculation with initial dates and options (12 ms)\n    ✕ should update useLeaveCalculation when dates change (9 ms)\n    ✕ should handle half-day selection (38 ms)\n    ✓ should display calculated days when hook returns success (9 ms)\n    ✓ should display loading calculation state (7 ms)\n    ✓ should display calculation error state (9 ms)\n    ✕ should validate form on submit and show errors if invalid (1021 ms)\n    Form Submission\n      ✕ should submit valid data to /api/conges/batch and handle success (1635 ms)\n      ✕ should handle API error from /api/conges/batch on submit (1599 ms)\n      ✕ should handle general network error on submit (1617 ms)\n      ✕ should not submit if calculation is not successful (3481 ms)\n\n  ● LeaveForm › should handle error when loading leave types\n\n    Unable to find an element with the display value: Erreur de chargement.\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div>\u001b[39m\n        \u001b[36m<form\u001b[39m\n          \u001b[33mclass\u001b[39m=\u001b[32m\"space-y-6 max-w-2xl mx-auto\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"bg-gradient-to-r from-indigo-50 to-blue-50 p-4 rounded-lg shadow-sm mb-6\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<h3\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"text-lg font-medium text-gray-800 mb-2\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mNouvelle demande de congé\u001b[0m\n            \u001b[36m</h3>\u001b[39m\n            \u001b[36m<p\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"text-sm text-gray-600\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mComplétez le formulaire ci-dessous pour soumettre votre demande.\u001b[0m\n            \u001b[36m</p>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"bg-white p-6 rounded-lg shadow-md border border-gray-200\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"mb-6\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center justify-between\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<label\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700\"\u001b[39m\n                  \u001b[33mfor\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mType de congé\u001b[0m\n                \u001b[36m</label>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"relative inline-block\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<span\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"text-gray-400 hover:text-gray-600 cursor-help\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-circle-help h-4 w-4\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<circle\u001b[39m\n                        \u001b[33mcx\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                        \u001b[33mcy\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                        \u001b[33mr\u001b[39m=\u001b[32m\"10\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M12 17h.01\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                  \u001b[36m</span>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"mt-1 relative\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<select\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"block w-full rounded-md border-gray-300 shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm py-2 px-3\"\u001b[39m\n                  \u001b[33mdisabled\u001b[39m=\u001b[32m\"\"\u001b[39m\n                  \u001b[33mid\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                  \u001b[33mname\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                  \u001b[33mrequired\u001b[39m=\u001b[32m\"\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<option\u001b[39m\n                    \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[0mChargement...\u001b[0m\n                  \u001b[36m</option>\u001b[39m\n                \u001b[36m</select>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"grid grid-cols-1 gap-6 md:grid-cols-2 mb-6\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<label\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700 mb-1\"\u001b[39m\n                  \u001b[33mfor\u001b[39m=\u001b[32m\"startDate\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mDate de début\u001b[0m\n                \u001b[36m</label>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker-wrapper\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker__input-container\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<input\u001b[39m\n                        \u001b[33mautocomplete\u001b[39m=\u001b[32m\"off\"\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 pl-10 pr-4 py-2 disabled:bg-gray-100 disabled:cursor-not-allowed\"\u001b[39m\n                        \u001b[33mid\u001b[39m=\u001b[32m\"startDate\"\u001b[39m\n                        \u001b[33mplaceholder\u001b[39m=\u001b[32m\"Sélectionner une date\"\u001b[39m\n                        \u001b[33mtype\u001b[39m=\u001b[32m\"text\"\u001b[39m\n                        \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</div>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-calendar h-5 w-5 text-gray-400\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M8 2v4\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M16 2v4\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<rect\u001b[39m\n                        \u001b[33mheight\u001b[39m=\u001b[32m\"18\"\u001b[39m\n                        \u001b[33mrx\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                        \u001b[33mwidth\u001b[39m=\u001b[32m\"18\"\u001b[39m\n                        \u001b[33mx\u001b[39m=\u001b[32m\"3\"\u001b[39m\n                        \u001b[33my\u001b[39m=\u001b[32m\"4\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M3 10h18\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<label\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700 mb-1\"\u001b[39m\n                  \u001b[33mfor\u001b[39m=\u001b[32m\"endDate\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mDate de fin\u001b[0m\n                \u001b[36m</label>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker-wrapper\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker__input-container\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<input\u001b[39m\n                        \u001b[33mautocomplete\u001b[39m=\u001b[32m\"off\"\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 pl-10 pr-4 py-2 disabled:bg-gray-100 disabled:cursor-not-allowed\"\u001b[39m\n                        \u001b[33mid\u001b[39m=\u001b[32m\"endDate\"\u001b[39m\n                        \u001b[33mplaceholder\u001b[39m=\u001b[32m\"Sélectionner une date\"\u001b[39m\n                        \u001b[33mtype\u001b[39m=\u001b[32m\"text\"\u001b[39m\n                        \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</div>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-calendar h-5 w-5 text-gray-400\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M8 2v4\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M16 2v4\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<rect\u001b[39m\n                        \u001b[33mheight\u001b[39m=\u001b[32m\"18\"\u001b[39m\n                        \u001b[33mrx\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                        \u001b[33mwidth\u001b[39m=\u001b[32m\"18\"\u001b[39m\n                        \u001b[33mx\u001b[39m=\u001b[32m\"3\"\u001b[39m\n                        \u001b[33my\u001b[39m=\u001b[32m\"4\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M3 10h18\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"mb-6\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"flex flex-col space-y-4 p-4 bg-gray-50 rounded-md border border-gray-200\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<input\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"\u001b[39m\n                    \u001b[33mdisabled\u001b[39m=\u001b[32m\"\"\u001b[39m\n                    \u001b[33mid\u001b[39m=\u001b[32m\"isHalfDay\"\u001b[39m\n                    \u001b[33mname\u001b[39m=\u001b[32m\"isHalfDay\"\u001b[39m\n                    \u001b[33mtype\u001b[39m=\u001b[32m\"checkbox\"\u001b[39m\n                  \u001b[36m/>\u001b[39m\n                  \u001b[36m<label\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"ml-2 block text-sm font-medium text-gray-700\"\u001b[39m\n                    \u001b[33mfor\u001b[39m=\u001b[32m\"isHalfDay\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[0mDemi-journée\u001b[0m\n                  \u001b[36m</label>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"relative inline-block\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<span\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"text-gray-400 hover:text-gray-600 cursor-help ml-1\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<svg\u001b[39m\n                        \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-circle-help h-4 w-4\"\u001b[39m\n                        \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                        \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                        \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                        \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                        \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<circle\u001b[39m\n                          \u001b[33mcx\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                          \u001b[33mcy\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                          \u001b[33mr\u001b[39m=\u001b[32m\"10\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                        \u001b[36m<path\u001b[39m\n                          \u001b[33md\u001b[39m=\u001b[32m\"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                        \u001b[36m<path\u001b[39m\n                          \u001b[33md\u001b[39m=\u001b[32m\"M12 17h.01\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                      \u001b[36m</svg>\u001b[39m\n                    \u001b[36m</span>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"space-y-3 mb-6\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"mb-6\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center justify-between\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<label\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700\"\u001b[39m\n                  \u001b[33mfor\u001b[39m=\u001b[32m\"reason\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mMotif (optionnel)\u001b[0m\n                \u001b[36m</label>\u001b[39m\n                \u001b[36m<span\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mMax. 200 caractères\u001b[0m\n                \u001b[36m</span>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<textarea\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\u001b[39m\n                \u001b[33mid\u001b[39m=\u001b[32m\"reason\"\u001b[39m\n                \u001b[33mmaxlength\u001b[39m=\u001b[32m\"200\"\u001b[39m\n                \u001b[33mname\u001b[39m=\u001b[32m\"reason\"\u001b[39m\n                \u001b[33mplaceholder\u001b[39m=\u001b[32m\"Précisez le motif de votre demande si nécessaire...\"\u001b[39m\n                \u001b[33mrows\u001b[39m=\u001b[32m\"3\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"flex justify-end mt-8\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-60 disabled:cursor-not-allowed transition-opacity\"\u001b[39m\n              \u001b[33mdisabled\u001b[39m=\u001b[32m\"\"\u001b[39m\n              \u001b[33mtype\u001b[39m=\u001b[32m\"submit\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSoumettre la demande\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</form>\u001b[39m\n      \u001b[36m</div>\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n      258 |         (global.fetch as jest.Mock).mockRejectedValue(new Error('Failed to fetch types'));\n      259 |         renderTheForm();\n    > 260 |         await waitFor(() => {\n          |                      ^\n      261 |             expectToBeInDocument(screen.getByDisplayValue('Erreur de chargement'));\n      262 |         });\n      263 |     });\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at Object.<anonymous> (src/modules/conges/components/LeaveForm.test.tsx:260:22)\n\n  ● LeaveForm › should call useLeaveCalculation with initial dates and options\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: {\"endDate\": null, \"options\": {\"countHalfDays\": false, \"halfDayPeriod\": undefined}, \"startDate\": null}\n    Received\n           1\n              Object {\n                \"endDate\": null,\n                \"options\": Object {\n            -     \"countHalfDays\": false,\n                  \"halfDayPeriod\": undefined,\n            +     \"isHalfDay\": false,\n                },\n                \"startDate\": null,\n              },\n           2\n              Object {\n                \"endDate\": null,\n                \"options\": Object {\n            -     \"countHalfDays\": false,\n                  \"halfDayPeriod\": undefined,\n            +     \"isHalfDay\": false,\n                },\n                \"startDate\": null,\n              },\n\n    Number of calls: 2\n\n      45 |  */\n      46 | export function expectToHaveBeenCalledWith(mockFn: MockFn, ...args: any[]): void {\n    > 47 |     expect(mockFn).toHaveBeenCalledWith(...args);\n         |                    ^\n      48 | }\n      49 |\n      50 | /**\n\n      at expectToHaveBeenCalledWith (src/tests/utils/assertions.ts:47:20)\n      at Object.<anonymous> (src/modules/conges/components/LeaveForm.test.tsx:267:35)\n\n  ● LeaveForm › should update useLeaveCalculation when dates change\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: {\"endDate\": null, \"options\": {\"countHalfDays\": false, \"halfDayPeriod\": undefined}, \"startDate\": null}\n    Received\n           1\n              Object {\n                \"endDate\": null,\n                \"options\": Object {\n            -     \"countHalfDays\": false,\n                  \"halfDayPeriod\": undefined,\n            +     \"isHalfDay\": false,\n                },\n                \"startDate\": null,\n              },\n           2\n              Object {\n                \"endDate\": null,\n                \"options\": Object {\n            -     \"countHalfDays\": false,\n                  \"halfDayPeriod\": undefined,\n            +     \"isHalfDay\": false,\n                },\n                \"startDate\": null,\n              },\n\n    Number of calls: 2\n\n      45 |  */\n      46 | export function expectToHaveBeenCalledWith(mockFn: MockFn, ...args: any[]): void {\n    > 47 |     expect(mockFn).toHaveBeenCalledWith(...args);\n         |                    ^\n      48 | }\n      49 |\n      50 | /**\n\n      at expectToHaveBeenCalledWith (src/tests/utils/assertions.ts:47:20)\n      at Object.<anonymous> (src/modules/conges/components/LeaveForm.test.tsx:280:35)\n\n  ● LeaveForm › should handle half-day selection\n\n    expect(element).toBeChecked()\n\n    Received element is not checked:\n      <input class=\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\" disabled=\"\" id=\"isHalfDay\" name=\"isHalfDay\" type=\"checkbox\" />\n\n      73 |  */\n      74 | export function expectToBeChecked(element: HTMLElement | null | undefined): void {\n    > 75 |     expect(element).toBeChecked();\n         |                     ^\n      76 | }\n      77 |\n      78 | /**\n\n      at expectToBeChecked (src/tests/utils/assertions.ts:75:21)\n      at Object.<anonymous> (src/modules/conges/components/LeaveForm.test.tsx:346:26)\n\n  ● LeaveForm › should validate form on submit and show errors if invalid\n\n    Unable to find an element with the text: La date de début est requise.. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div>\u001b[39m\n        \u001b[36m<form\u001b[39m\n          \u001b[33mclass\u001b[39m=\u001b[32m\"space-y-6 max-w-2xl mx-auto\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"bg-gradient-to-r from-indigo-50 to-blue-50 p-4 rounded-lg shadow-sm mb-6\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<h3\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"text-lg font-medium text-gray-800 mb-2\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mNouvelle demande de congé\u001b[0m\n            \u001b[36m</h3>\u001b[39m\n            \u001b[36m<p\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"text-sm text-gray-600\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mComplétez le formulaire ci-dessous pour soumettre votre demande.\u001b[0m\n            \u001b[36m</p>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"bg-white p-6 rounded-lg shadow-md border border-gray-200\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"mb-6\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center justify-between\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<label\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700\"\u001b[39m\n                  \u001b[33mfor\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mType de congé\u001b[0m\n                \u001b[36m</label>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"relative inline-block\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<span\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"text-gray-400 hover:text-gray-600 cursor-help\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-circle-help h-4 w-4\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<circle\u001b[39m\n                        \u001b[33mcx\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                        \u001b[33mcy\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                        \u001b[33mr\u001b[39m=\u001b[32m\"10\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M12 17h.01\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                  \u001b[36m</span>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"mt-1 relative\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<select\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"block w-full rounded-md border-gray-300 shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm py-2 px-3\"\u001b[39m\n                  \u001b[33mdisabled\u001b[39m=\u001b[32m\"\"\u001b[39m\n                  \u001b[33mid\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                  \u001b[33mname\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                  \u001b[33mrequired\u001b[39m=\u001b[32m\"\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<option\u001b[39m\n                    \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[0mChargement...\u001b[0m\n                  \u001b[36m</option>\u001b[39m\n                \u001b[36m</select>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"grid grid-cols-1 gap-6 md:grid-cols-2 mb-6\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<label\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700 mb-1\"\u001b[39m\n                  \u001b[33mfor\u001b[39m=\u001b[32m\"startDate\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mDate de début\u001b[0m\n                \u001b[36m</label>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker-wrapper\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker__input-container\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<input\u001b[39m\n                        \u001b[33mautocomplete\u001b[39m=\u001b[32m\"off\"\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 pl-10 pr-4 py-2 disabled:bg-gray-100 disabled:cursor-not-allowed\"\u001b[39m\n                        \u001b[33mid\u001b[39m=\u001b[32m\"startDate\"\u001b[39m\n                        \u001b[33mplaceholder\u001b[39m=\u001b[32m\"Sélectionner une date\"\u001b[39m\n                        \u001b[33mtype\u001b[39m=\u001b[32m\"text\"\u001b[39m\n                        \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</div>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-calendar h-5 w-5 text-gray-400\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M8 2v4\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M16 2v4\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<rect\u001b[39m\n                        \u001b[33mheight\u001b[39m=\u001b[32m\"18\"\u001b[39m\n                        \u001b[33mrx\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                        \u001b[33mwidth\u001b[39m=\u001b[32m\"18\"\u001b[39m\n                        \u001b[33mx\u001b[39m=\u001b[32m\"3\"\u001b[39m\n                        \u001b[33my\u001b[39m=\u001b[32m\"4\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M3 10h18\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<label\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700 mb-1\"\u001b[39m\n                  \u001b[33mfor\u001b[39m=\u001b[32m\"endDate\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mDate de fin\u001b[0m\n                \u001b[36m</label>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker-wrapper\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker__input-container\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<input\u001b[39m\n                        \u001b[33mautocomplete\u001b[39m=\u001b[32m\"off\"\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 pl-10 pr-4 py-2 disabled:bg-gray-100 disabled:cursor-not-allowed\"\u001b[39m\n                        \u001b[33mid\u001b[39m=\u001b[32m\"endDate\"\u001b[39m\n                        \u001b[33mplaceholder\u001b[39m=\u001b[32m\"Sélectionner une date\"\u001b[39m\n                        \u001b[33mtype\u001b[39m=\u001b[32m\"text\"\u001b[39m\n                        \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</div>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-calendar h-5 w-5 text-gray-400\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M8 2v4\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M16 2v4\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<rect\u001b[39m\n                        \u001b[33mheight\u001b[39m=\u001b[32m\"18\"\u001b[39m\n                        \u001b[33mrx\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                        \u001b[33mwidth\u001b[39m=\u001b[32m\"18\"\u001b[39m\n                        \u001b[33mx\u001b[39m=\u001b[32m\"3\"\u001b[39m\n                        \u001b[33my\u001b[39m=\u001b[32m\"4\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M3 10h18\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"mb-6\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"flex flex-col space-y-4 p-4 bg-gray-50 rounded-md border border-gray-200\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<input\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"\u001b[39m\n                    \u001b[33mdisabled\u001b[39m=\u001b[32m\"\"\u001b[39m\n                    \u001b[33mid\u001b[39m=\u001b[32m\"isHalfDay\"\u001b[39m\n                    \u001b[33mname\u001b[39m=\u001b[32m\"isHalfDay\"\u001b[39m\n                    \u001b[33mtype\u001b[39m=\u001b[32m\"checkbox\"\u001b[39m\n                  \u001b[36m/>\u001b[39m\n                  \u001b[36m<label\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"ml-2 block text-sm font-medium text-gray-700\"\u001b[39m\n                    \u001b[33mfor\u001b[39m=\u001b[32m\"isHalfDay\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[0mDemi-journée\u001b[0m\n                  \u001b[36m</label>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"relative inline-block\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<span\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"text-gray-400 hover:text-gray-600 cursor-help ml-1\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<svg\u001b[39m\n                        \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-circle-help h-4 w-4\"\u001b[39m\n                        \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                        \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                        \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                        \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                        \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<circle\u001b[39m\n                          \u001b[33mcx\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                          \u001b[33mcy\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                          \u001b[33mr\u001b[39m=\u001b[32m\"10\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                        \u001b[36m<path\u001b[39m\n                          \u001b[33md\u001b[39m=\u001b[32m\"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                        \u001b[36m<path\u001b[39m\n                          \u001b[33md\u001b[39m=\u001b[32m\"M12 17h.01\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                      \u001b[36m</svg>\u001b[39m\n                    \u001b[36m</span>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"space-y-3 mb-6\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"mb-6\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center justify-between\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<label\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700\"\u001b[39m\n                  \u001b[33mfor\u001b[39m=\u001b[32m\"reason\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mMotif (optionnel)\u001b[0m\n                \u001b[36m</label>\u001b[39m\n                \u001b[36m<span\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mMax. 200 caractères\u001b[0m\n                \u001b[36m</span>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<textarea\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\u001b[39m\n                \u001b[33mid\u001b[39m=\u001b[32m\"reason\"\u001b[39m\n                \u001b[33mmaxlength\u001b[39m=\u001b[32m\"200\"\u001b[39m\n                \u001b[33mname\u001b[39m=\u001b[32m\"reason\"\u001b[39m\n                \u001b[33mplaceholder\u001b[39m=\u001b[32m\"Précisez le motif de votre demande si nécessaire...\"\u001b[39m\n                \u001b[33mrows\u001b[39m=\u001b[32m\"3\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"flex justify-end mt-8\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-60 disabled:cursor-not-allowed transition-opacity\"\u001b[39m\n              \u001b[33mdisabled\u001b[39m=\u001b[32m\"\"\u001b[39m\n              \u001b[33mtype\u001b[39m=\u001b[32m\"submit\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSoumettre la demande\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</form>\u001b[39m\n      \u001b[36m</div>\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n      406 |         await user.click(submitButton); // Soumission sans dates\n      407 |\n    > 408 |         expectToBeInDocument(await screen.findByText('La date de début est requise.'));\n          |                                           ^\n      409 |         expectToBeInDocument(screen.getByText('La date de fin est requise.'));\n      410 |         expectNotToHaveBeenCalled(mockedAxios.post);\n      411 |     });\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at node_modules/@testing-library/dom/dist/query-helpers.js:86:32\n      at Object.<anonymous> (src/modules/conges/components/LeaveForm.test.tsx:408:43)\n\n  ● LeaveForm › Form Submission › should submit valid data to /api/conges/batch and handle success\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"/api/conges/batch\", [ObjectContaining {\"endDate\": \"2024-09-03\", \"reason\": \"Vacances annuelles\", \"startDate\": \"2024-09-02\", \"typeCode\": \"ANNUAL\", \"userId\": 1}]\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<form\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"space-y-6 max-w-2xl mx-auto\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"bg-gradient-to-r from-indigo-50 to-blue-50 p-4 rounded-lg shadow-sm mb-6\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<h3\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"text-lg font-medium text-gray-800 mb-2\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[0mNouvelle demande de congé\u001b[0m\n              \u001b[36m</h3>\u001b[39m\n              \u001b[36m<p\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"text-sm text-gray-600\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[0mComplétez le formulaire ci-dessous pour soumettre votre demande.\u001b[0m\n              \u001b[36m</p>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"bg-white p-6 rounded-lg shadow-md border border-gray-200\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"mb-6\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center justify-between\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<label\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700\"\u001b[39m\n                    \u001b[33mfor\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[0mType de congé\u001b[0m\n                  \u001b[36m</label>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"relative inline-block\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<span\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"text-gray-400 hover:text-gray-600 cursor-help\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<svg\u001b[39m\n                        \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-circle-help h-4 w-4\"\u001b[39m\n                        \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                        \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                        \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                        \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                        \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<circle\u001b[39m\n                          \u001b[33mcx\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                          \u001b[33mcy\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                          \u001b[33mr\u001b[39m=\u001b[32m\"10\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                        \u001b[36m<path\u001b[39m\n                          \u001b[33md\u001b[39m=\u001b[32m\"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                        \u001b[36m<path\u001b[39m\n                          \u001b[33md\u001b[39m=\u001b[32m\"M12 17h.01\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                      \u001b[36m</svg>\u001b[39m\n                    \u001b[36m</span>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"mt-1 relative\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<select\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"block w-full rounded-md border-gray-300 shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm py-2 px-3\"\u001b[39m\n                    \u001b[33mid\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                    \u001b[33mname\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                    \u001b[33mrequired\u001b[39m=\u001b[32m\"\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<option\u001b[39m\n                      \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[0m-- Sélectionner un type --\u001b[0m\n                    \u001b[36m</option>\u001b[39m\n                    \u001b[36m<option\u001b[39m\n                      \u001b[33mtitle\u001b[39m=\u001b[32m\"Congés annuels bruts\"\u001b[39m\n                      \u001b[33mvalue\u001b[39m=\u001b[32m\"ANNUAL\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[0mCongé annuel\u001b[0m\n                    \u001b[36m</option>\u001b[39m\n                    \u001b[36m<option\u001b[39m\n                      \u001b[33mtitle\u001b[39m=\u001b[32m\"RTT bruts\"\u001b[39m\n                      \u001b[33mvalue\u001b[39m=\u001b[32m\"RTT\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[0mRTT API (Raw)\u001b[0m\n                    \u001b[36m</option>\u001b[39m\n                    \u001b[36m<option\u001b[39m\n                      \u001b[33mtitle\u001b[39m=\u001b[32m\"Congé maladie brut\"\u001b[39m\n                      \u001b[33mvalue\u001b[39m=\u001b[32m\"SICK\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[0mMaladie\u001b[0m\n                    \u001b[36m</option>\u001b[39m\n                  \u001b[36m</select>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"grid grid-cols-1 gap-6 md:grid-cols-2 mb-6\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<label\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700 mb-1\"\u001b[39m\n                    \u001b[33mfor\u001b[39m=\u001b[32m\"startDate\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[0mDate de début\u001b[0m\n                  \u001b[36m</label>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker-wrapper\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<div\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker__input-container\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<input\u001b[39m\n                          \u001b[33mautocomplete\u001b[39m=\u001b[32m\"off\"\u001b[39m\n                          \u001b[33mclass\u001b[39m=\u001b[32m\"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 pl-10 pr-4 py-2 disabled:bg-gray-100 disabled:cursor-not-allowed\"\u001b[39m\n                          \u001b[33mid\u001b[39m=\u001b[32m\"startDate\"\u001b[39m\n                          \u001b[33mplaceholder\u001b[39m=\u001b[32m\"Sélectionner une date\"\u001b[39m\n                          \u001b[33mtype\u001b[39m=\u001b[32m\"text\"\u001b[39m\n                          \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                      \u001b[36m</div>\u001b[39m\n                    \u001b[36m</div>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<svg\u001b[39m\n                        \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-calendar h-5 w-5 text-gray-400\"\u001b[39m\n                        \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                        \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                        \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                        \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                        \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n            ...\n\n      45 |  */\n      46 | export function expectToHaveBeenCalledWith(mockFn: MockFn, ...args: any[]): void {\n    > 47 |     expect(mockFn).toHaveBeenCalledWith(...args);\n         |                    ^\n      48 | }\n      49 |\n      50 | /**\n\n      at expectToHaveBeenCalledWith (src/tests/utils/assertions.ts:47:20)\n      at src/modules/conges/components/LeaveForm.test.tsx:507:43\n      at callback (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:76)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)\n\n  ● LeaveForm › Form Submission › should handle API error from /api/conges/batch on submit\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"/api/conges/batch\", Any<Array>\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<form\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"space-y-6 max-w-2xl mx-auto\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"bg-gradient-to-r from-indigo-50 to-blue-50 p-4 rounded-lg shadow-sm mb-6\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<h3\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"text-lg font-medium text-gray-800 mb-2\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[0mNouvelle demande de congé\u001b[0m\n              \u001b[36m</h3>\u001b[39m\n              \u001b[36m<p\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"text-sm text-gray-600\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[0mComplétez le formulaire ci-dessous pour soumettre votre demande.\u001b[0m\n              \u001b[36m</p>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"bg-white p-6 rounded-lg shadow-md border border-gray-200\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"mb-6\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center justify-between\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<label\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700\"\u001b[39m\n                    \u001b[33mfor\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[0mType de congé\u001b[0m\n                  \u001b[36m</label>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"relative inline-block\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<span\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"text-gray-400 hover:text-gray-600 cursor-help\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<svg\u001b[39m\n                        \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-circle-help h-4 w-4\"\u001b[39m\n                        \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                        \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                        \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                        \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                        \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<circle\u001b[39m\n                          \u001b[33mcx\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                          \u001b[33mcy\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                          \u001b[33mr\u001b[39m=\u001b[32m\"10\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                        \u001b[36m<path\u001b[39m\n                          \u001b[33md\u001b[39m=\u001b[32m\"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                        \u001b[36m<path\u001b[39m\n                          \u001b[33md\u001b[39m=\u001b[32m\"M12 17h.01\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                      \u001b[36m</svg>\u001b[39m\n                    \u001b[36m</span>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"mt-1 relative\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<select\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"block w-full rounded-md border-gray-300 shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm py-2 px-3\"\u001b[39m\n                    \u001b[33mid\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                    \u001b[33mname\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                    \u001b[33mrequired\u001b[39m=\u001b[32m\"\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<option\u001b[39m\n                      \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[0m-- Sélectionner un type --\u001b[0m\n                    \u001b[36m</option>\u001b[39m\n                    \u001b[36m<option\u001b[39m\n                      \u001b[33mtitle\u001b[39m=\u001b[32m\"Congés annuels bruts\"\u001b[39m\n                      \u001b[33mvalue\u001b[39m=\u001b[32m\"ANNUAL\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[0mCongé annuel\u001b[0m\n                    \u001b[36m</option>\u001b[39m\n                    \u001b[36m<option\u001b[39m\n                      \u001b[33mtitle\u001b[39m=\u001b[32m\"RTT bruts\"\u001b[39m\n                      \u001b[33mvalue\u001b[39m=\u001b[32m\"RTT\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[0mRTT API (Raw)\u001b[0m\n                    \u001b[36m</option>\u001b[39m\n                    \u001b[36m<option\u001b[39m\n                      \u001b[33mtitle\u001b[39m=\u001b[32m\"Congé maladie brut\"\u001b[39m\n                      \u001b[33mvalue\u001b[39m=\u001b[32m\"SICK\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[0mMaladie\u001b[0m\n                    \u001b[36m</option>\u001b[39m\n                  \u001b[36m</select>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"grid grid-cols-1 gap-6 md:grid-cols-2 mb-6\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<label\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700 mb-1\"\u001b[39m\n                    \u001b[33mfor\u001b[39m=\u001b[32m\"startDate\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[0mDate de début\u001b[0m\n                  \u001b[36m</label>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker-wrapper\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<div\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker__input-container\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<input\u001b[39m\n                          \u001b[33mautocomplete\u001b[39m=\u001b[32m\"off\"\u001b[39m\n                          \u001b[33mclass\u001b[39m=\u001b[32m\"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 pl-10 pr-4 py-2 disabled:bg-gray-100 disabled:cursor-not-allowed\"\u001b[39m\n                          \u001b[33mid\u001b[39m=\u001b[32m\"startDate\"\u001b[39m\n                          \u001b[33mplaceholder\u001b[39m=\u001b[32m\"Sélectionner une date\"\u001b[39m\n                          \u001b[33mtype\u001b[39m=\u001b[32m\"text\"\u001b[39m\n                          \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                      \u001b[36m</div>\u001b[39m\n                    \u001b[36m</div>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<svg\u001b[39m\n                        \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-calendar h-5 w-5 text-gray-400\"\u001b[39m\n                        \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                        \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                        \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                        \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                        \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n            ...\n\n      45 |  */\n      46 | export function expectToHaveBeenCalledWith(mockFn: MockFn, ...args: any[]): void {\n    > 47 |     expect(mockFn).toHaveBeenCalledWith(...args);\n         |                    ^\n      48 | }\n      49 |\n      50 | /**\n\n      at expectToHaveBeenCalledWith (src/tests/utils/assertions.ts:47:20)\n      at src/modules/conges/components/LeaveForm.test.tsx:572:43\n      at callback (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:76)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)\n\n  ● LeaveForm › Form Submission › should handle general network error on submit\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"/api/conges/batch\", Any<Array>\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<form\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"space-y-6 max-w-2xl mx-auto\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"bg-gradient-to-r from-indigo-50 to-blue-50 p-4 rounded-lg shadow-sm mb-6\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<h3\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"text-lg font-medium text-gray-800 mb-2\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[0mNouvelle demande de congé\u001b[0m\n              \u001b[36m</h3>\u001b[39m\n              \u001b[36m<p\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"text-sm text-gray-600\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[0mComplétez le formulaire ci-dessous pour soumettre votre demande.\u001b[0m\n              \u001b[36m</p>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"bg-white p-6 rounded-lg shadow-md border border-gray-200\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"mb-6\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center justify-between\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<label\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700\"\u001b[39m\n                    \u001b[33mfor\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[0mType de congé\u001b[0m\n                  \u001b[36m</label>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"relative inline-block\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<span\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"text-gray-400 hover:text-gray-600 cursor-help\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<svg\u001b[39m\n                        \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-circle-help h-4 w-4\"\u001b[39m\n                        \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                        \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                        \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                        \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                        \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<circle\u001b[39m\n                          \u001b[33mcx\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                          \u001b[33mcy\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                          \u001b[33mr\u001b[39m=\u001b[32m\"10\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                        \u001b[36m<path\u001b[39m\n                          \u001b[33md\u001b[39m=\u001b[32m\"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                        \u001b[36m<path\u001b[39m\n                          \u001b[33md\u001b[39m=\u001b[32m\"M12 17h.01\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                      \u001b[36m</svg>\u001b[39m\n                    \u001b[36m</span>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"mt-1 relative\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<select\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"block w-full rounded-md border-gray-300 shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm py-2 px-3\"\u001b[39m\n                    \u001b[33mid\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                    \u001b[33mname\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                    \u001b[33mrequired\u001b[39m=\u001b[32m\"\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<option\u001b[39m\n                      \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[0m-- Sélectionner un type --\u001b[0m\n                    \u001b[36m</option>\u001b[39m\n                    \u001b[36m<option\u001b[39m\n                      \u001b[33mtitle\u001b[39m=\u001b[32m\"Congés annuels bruts\"\u001b[39m\n                      \u001b[33mvalue\u001b[39m=\u001b[32m\"ANNUAL\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[0mCongé annuel\u001b[0m\n                    \u001b[36m</option>\u001b[39m\n                    \u001b[36m<option\u001b[39m\n                      \u001b[33mtitle\u001b[39m=\u001b[32m\"RTT bruts\"\u001b[39m\n                      \u001b[33mvalue\u001b[39m=\u001b[32m\"RTT\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[0mRTT API (Raw)\u001b[0m\n                    \u001b[36m</option>\u001b[39m\n                    \u001b[36m<option\u001b[39m\n                      \u001b[33mtitle\u001b[39m=\u001b[32m\"Congé maladie brut\"\u001b[39m\n                      \u001b[33mvalue\u001b[39m=\u001b[32m\"SICK\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[0mMaladie\u001b[0m\n                    \u001b[36m</option>\u001b[39m\n                  \u001b[36m</select>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"grid grid-cols-1 gap-6 md:grid-cols-2 mb-6\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<label\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700 mb-1\"\u001b[39m\n                    \u001b[33mfor\u001b[39m=\u001b[32m\"startDate\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[0mDate de début\u001b[0m\n                  \u001b[36m</label>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker-wrapper\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<div\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker__input-container\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<input\u001b[39m\n                          \u001b[33mautocomplete\u001b[39m=\u001b[32m\"off\"\u001b[39m\n                          \u001b[33mclass\u001b[39m=\u001b[32m\"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 pl-10 pr-4 py-2 disabled:bg-gray-100 disabled:cursor-not-allowed\"\u001b[39m\n                          \u001b[33mid\u001b[39m=\u001b[32m\"startDate\"\u001b[39m\n                          \u001b[33mplaceholder\u001b[39m=\u001b[32m\"Sélectionner une date\"\u001b[39m\n                          \u001b[33mtype\u001b[39m=\u001b[32m\"text\"\u001b[39m\n                          \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                      \u001b[36m</div>\u001b[39m\n                    \u001b[36m</div>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<svg\u001b[39m\n                        \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-calendar h-5 w-5 text-gray-400\"\u001b[39m\n                        \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                        \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                        \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                        \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                        \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n            ...\n\n      45 |  */\n      46 | export function expectToHaveBeenCalledWith(mockFn: MockFn, ...args: any[]): void {\n    > 47 |     expect(mockFn).toHaveBeenCalledWith(...args);\n         |                    ^\n      48 | }\n      49 |\n      50 | /**\n\n      at expectToHaveBeenCalledWith (src/tests/utils/assertions.ts:47:20)\n      at src/modules/conges/components/LeaveForm.test.tsx:611:43\n      at callback (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:76)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)\n\n  ● LeaveForm › Form Submission › should not submit if calculation is not successful\n\n    Unable to find an element with the text: /Calcul des jours en cours.../i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div>\u001b[39m\n        \u001b[36m<form\u001b[39m\n          \u001b[33mclass\u001b[39m=\u001b[32m\"space-y-6 max-w-2xl mx-auto\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"bg-gradient-to-r from-indigo-50 to-blue-50 p-4 rounded-lg shadow-sm mb-6\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<h3\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"text-lg font-medium text-gray-800 mb-2\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mNouvelle demande de congé\u001b[0m\n            \u001b[36m</h3>\u001b[39m\n            \u001b[36m<p\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"text-sm text-gray-600\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mComplétez le formulaire ci-dessous pour soumettre votre demande.\u001b[0m\n            \u001b[36m</p>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"bg-white p-6 rounded-lg shadow-md border border-gray-200\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"mb-6\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center justify-between\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<label\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700\"\u001b[39m\n                  \u001b[33mfor\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mType de congé\u001b[0m\n                \u001b[36m</label>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"relative inline-block\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<span\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"text-gray-400 hover:text-gray-600 cursor-help\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-circle-help h-4 w-4\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<circle\u001b[39m\n                        \u001b[33mcx\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                        \u001b[33mcy\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                        \u001b[33mr\u001b[39m=\u001b[32m\"10\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M12 17h.01\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                  \u001b[36m</span>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"mt-1 relative\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<select\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"block w-full rounded-md border-gray-300 shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm py-2 px-3\"\u001b[39m\n                  \u001b[33mid\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                  \u001b[33mname\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                  \u001b[33mrequired\u001b[39m=\u001b[32m\"\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<option\u001b[39m\n                    \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[0m-- Sélectionner un type --\u001b[0m\n                  \u001b[36m</option>\u001b[39m\n                  \u001b[36m<option\u001b[39m\n                    \u001b[33mtitle\u001b[39m=\u001b[32m\"Congés annuels bruts\"\u001b[39m\n                    \u001b[33mvalue\u001b[39m=\u001b[32m\"ANNUAL\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[0mCongé annuel\u001b[0m\n                  \u001b[36m</option>\u001b[39m\n                  \u001b[36m<option\u001b[39m\n                    \u001b[33mtitle\u001b[39m=\u001b[32m\"RTT bruts\"\u001b[39m\n                    \u001b[33mvalue\u001b[39m=\u001b[32m\"RTT\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[0mRTT API (Raw)\u001b[0m\n                  \u001b[36m</option>\u001b[39m\n                  \u001b[36m<option\u001b[39m\n                    \u001b[33mtitle\u001b[39m=\u001b[32m\"Congé maladie brut\"\u001b[39m\n                    \u001b[33mvalue\u001b[39m=\u001b[32m\"SICK\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[0mMaladie\u001b[0m\n                  \u001b[36m</option>\u001b[39m\n                \u001b[36m</select>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"grid grid-cols-1 gap-6 md:grid-cols-2 mb-6\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<label\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700 mb-1\"\u001b[39m\n                  \u001b[33mfor\u001b[39m=\u001b[32m\"startDate\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mDate de début\u001b[0m\n                \u001b[36m</label>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker-wrapper\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker__input-container\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<input\u001b[39m\n                        \u001b[33mautocomplete\u001b[39m=\u001b[32m\"off\"\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 pl-10 pr-4 py-2 disabled:bg-gray-100 disabled:cursor-not-allowed react-datepicker-ignore-onclickoutside\"\u001b[39m\n                        \u001b[33mid\u001b[39m=\u001b[32m\"startDate\"\u001b[39m\n                        \u001b[33mplaceholder\u001b[39m=\u001b[32m\"Sélectionner une date\"\u001b[39m\n                        \u001b[33mtype\u001b[39m=\u001b[32m\"text\"\u001b[39m\n                        \u001b[33mvalue\u001b[39m=\u001b[32m\"02/09/2024\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</div>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker__tab-loop\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker__tab-loop__start\"\u001b[39m\n                      \u001b[33mtabindex\u001b[39m=\u001b[32m\"0\"\u001b[39m\n                    \u001b[36m/>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker-popper z-50\"\u001b[39m\n                      \u001b[33mdata-placement\u001b[39m=\u001b[32m\"bottom\"\u001b[39m\n                      \u001b[33mstyle\u001b[39m=\u001b[32m\"position: absolute; left: 0px; top: 0px; transform: translate(0px, 10px);\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<div\u001b[39m\n                        \u001b[33mstyle\u001b[39m=\u001b[32m\"display: contents;\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<div\u001b[39m\n                          \u001b[33mstyle\u001b[39m=\u001b[32m\"display: contents;\"\u001b[39m\n                        \u001b[36m>\u001b[39m\n                          \u001b[36m<div\u001b[39m\n                            \u001b[33maria-label\u001b[39m=\u001b[32m\"Choose Date\"\u001b[39m\n                            \u001b[33maria-modal\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                            \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker shadow-lg rounded-md border bo...\n\n      653 |             await fillDatesInForm(user, '02/09/2024', '03/09/2024');\n      654 |             // Le hook est mocké pour retourner 'loading' avec ces dates.\n    > 655 |             await screen.findByText(/Calcul des jours en cours.../i, {}, { timeout: 3000 });\n          |                          ^\n      656 |\n      657 |             const submitButton = screen.getByText('Soumettre la demande');\n      658 |             await user.click(submitButton);\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at node_modules/@testing-library/dom/dist/query-helpers.js:86:32\n      at Object.<anonymous> (src/modules/conges/components/LeaveForm.test.tsx:655:26)\n\nA worker process has failed to exit gracefully and has been force exited. This is likely caused by tests leaking due to improper teardown. Try running with --detectOpenHandles to find leaks. Active timers can also cause this, ensure that .unref() was called on them.\nJest: \"global\" coverage threshold for statements (75%) not met: 4.63%\nJest: \"global\" coverage threshold for branches (70%) not met: 3.19%\nJest: \"global\" coverage threshold for lines (75%) not met: 4.69%\nJest: \"global\" coverage threshold for functions (70%) not met: 3.29%\nJest: \"src/modules/conges/services/leaveService.ts\" coverage threshold for statements (85%) not met: 29.66%\nJest: \"src/modules/conges/services/leaveService.ts\" coverage threshold for branches (85%) not met: 20.93%\nJest: \"src/modules/conges/services/leaveService.ts\" coverage threshold for lines (85%) not met: 26.41%\nJest: \"src/modules/conges/services/leaveService.ts\" coverage threshold for functions (85%) not met: 13.15%\nJest: \"src/modules/conges/services/leaveCalculator.ts\" coverage threshold for statements (85%) not met: 81.86%\nJest: \"src/modules/conges/services/leaveCalculator.ts\" coverage threshold for branches (85%) not met: 64.84%\nJest: \"src/modules/conges/services/leaveCalculator.ts\" coverage threshold for lines (85%) not met: 81.25%\nJest: \"src/modules/conges/services/quotaService.ts\" coverage threshold for statements (80%) not met: 43.01%\nJest: \"src/modules/conges/services/quotaService.ts\" coverage threshold for branches (80%) not met: 49.01%\nJest: \"src/modules/conges/services/quotaService.ts\" coverage threshold for lines (80%) not met: 40.17%\nJest: \"src/modules/conges/services/quotaService.ts\" coverage threshold for functions (80%) not met: 21.95%\nJest: \"/Users/vincentperreard/Mathildanesth/src/lib/auth/authCache.ts\" coverage threshold for statements (80%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/lib/auth/authCache.ts\" coverage threshold for branches (80%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/lib/auth/authCache.ts\" coverage threshold for lines (80%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/lib/auth/authCache.ts\" coverage threshold for functions (80%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/lib/auth/authorization.ts\" coverage threshold for statements (80%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/lib/auth/authorization.ts\" coverage threshold for branches (80%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/lib/auth/authorization.ts\" coverage threshold for lines (80%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/lib/auth/authorization.ts\" coverage threshold for functions (80%) not met: 0%\nJest: \"src/middleware/auth.ts\" coverage threshold for statements (80%) not met: 0%\nJest: \"src/middleware/auth.ts\" coverage threshold for branches (80%) not met: 0%\nJest: \"src/middleware/auth.ts\" coverage threshold for lines (80%) not met: 0%\nJest: \"src/middleware/auth.ts\" coverage threshold for functions (80%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/hooks/useAuth.ts\" coverage threshold for statements (75%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/hooks/useAuth.ts\" coverage threshold for lines (75%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/hooks/useAuth.ts\" coverage threshold for functions (75%) not met: 0%\nJest: \"src/modules/planning/bloc-operatoire/services/blocPlanningService.ts\" coverage threshold for statements (70%) not met: 0%\nJest: \"src/modules/planning/bloc-operatoire/services/blocPlanningService.ts\" coverage threshold for branches (70%) not met: 0%\nJest: \"src/modules/planning/bloc-operatoire/services/blocPlanningService.ts\" coverage threshold for lines (70%) not met: 0%\nJest: \"src/modules/planning/bloc-operatoire/services/blocPlanningService.ts\" coverage threshold for functions (70%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/modules/planning/bloc-operatoire/components/AddSectorModal.tsx\" coverage threshold for statements (65%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/modules/planning/bloc-operatoire/components/AddSectorModal.tsx\" coverage threshold for branches (65%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/modules/planning/bloc-operatoire/components/AddSectorModal.tsx\" coverage threshold for lines (65%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/modules/planning/bloc-operatoire/components/AddSectorModal.tsx\" coverage threshold for functions (65%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/modules/planning/bloc-operatoire/components/BlocFilterBar.tsx\" coverage threshold for statements (65%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/modules/planning/bloc-operatoire/components/BlocFilterBar.tsx\" coverage threshold for branches (65%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/modules/planning/bloc-operatoire/components/BlocFilterBar.tsx\" coverage threshold for lines (65%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/modules/planning/bloc-operatoire/components/BlocFilterBar.tsx\" coverage threshold for functions (65%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/modules/planning/bloc-operatoire/components/SectorsList.tsx\" coverage threshold for statements (65%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/modules/planning/bloc-operatoire/components/SectorsList.tsx\" coverage threshold for branches (65%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/modules/planning/bloc-operatoire/components/SectorsList.tsx\" coverage threshold for lines (65%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/modules/planning/bloc-operatoire/components/SectorsList.tsx\" coverage threshold for functions (65%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/modules/planning/bloc-operatoire/components/SectorRoomsDisplay.tsx\" coverage threshold for statements (65%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/modules/planning/bloc-operatoire/components/SectorRoomsDisplay.tsx\" coverage threshold for branches (65%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/modules/planning/bloc-operatoire/components/SectorRoomsDisplay.tsx\" coverage threshold for lines (65%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/modules/planning/bloc-operatoire/components/SectorRoomsDisplay.tsx\" coverage threshold for functions (65%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/modules/planning/bloc-operatoire/components/BlocPlanningCalendar.tsx\" coverage threshold for statements (65%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/modules/planning/bloc-operatoire/components/BlocPlanningCalendar.tsx\" coverage threshold for branches (65%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/modules/planning/bloc-operatoire/components/BlocPlanningCalendar.tsx\" coverage threshold for lines (65%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/modules/planning/bloc-operatoire/components/BlocPlanningCalendar.tsx\" coverage threshold for functions (65%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/modules/planning/bloc-operatoire/components/RoomsList.tsx\" coverage threshold for statements (65%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/modules/planning/bloc-operatoire/components/RoomsList.tsx\" coverage threshold for branches (65%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/modules/planning/bloc-operatoire/components/RoomsList.tsx\" coverage threshold for lines (65%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/modules/planning/bloc-operatoire/components/RoomsList.tsx\" coverage threshold for functions (65%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/modules/planning/bloc-operatoire/components/OperatingRoomForm.tsx\" coverage threshold for statements (65%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/modules/planning/bloc-operatoire/components/OperatingRoomForm.tsx\" coverage threshold for branches (65%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/modules/planning/bloc-operatoire/components/OperatingRoomForm.tsx\" coverage threshold for lines (65%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/modules/planning/bloc-operatoire/components/OperatingRoomForm.tsx\" coverage threshold for functions (65%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/modules/planning/bloc-operatoire/components/AddRoomModal.tsx\" coverage threshold for statements (65%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/modules/planning/bloc-operatoire/components/AddRoomModal.tsx\" coverage threshold for branches (65%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/modules/planning/bloc-operatoire/components/AddRoomModal.tsx\" coverage threshold for lines (65%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/modules/planning/bloc-operatoire/components/AddRoomModal.tsx\" coverage threshold for functions (65%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/modules/planning/bloc-operatoire/components/OperatingRoomList.tsx\" coverage threshold for statements (65%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/modules/planning/bloc-operatoire/components/OperatingRoomList.tsx\" coverage threshold for branches (65%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/modules/planning/bloc-operatoire/components/OperatingRoomList.tsx\" coverage threshold for lines (65%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/modules/planning/bloc-operatoire/components/OperatingRoomList.tsx\" coverage threshold for functions (65%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/modules/planning/bloc-operatoire/components/OperatingSectorList.tsx\" coverage threshold for statements (65%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/modules/planning/bloc-operatoire/components/OperatingSectorList.tsx\" coverage threshold for branches (65%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/modules/planning/bloc-operatoire/components/OperatingSectorList.tsx\" coverage threshold for lines (65%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/modules/planning/bloc-operatoire/components/OperatingSectorList.tsx\" coverage threshold for functions (65%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/modules/planning/bloc-operatoire/components/AddSupervisionRuleModal.tsx\" coverage threshold for statements (65%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/modules/planning/bloc-operatoire/components/AddSupervisionRuleModal.tsx\" coverage threshold for branches (65%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/modules/planning/bloc-operatoire/components/AddSupervisionRuleModal.tsx\" coverage threshold for lines (65%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/modules/planning/bloc-operatoire/components/AddSupervisionRuleModal.tsx\" coverage threshold for functions (65%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/modules/planning/bloc-operatoire/components/SupervisionRulesForm.tsx\" coverage threshold for statements (65%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/modules/planning/bloc-operatoire/components/SupervisionRulesForm.tsx\" coverage threshold for branches (65%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/modules/planning/bloc-operatoire/components/SupervisionRulesForm.tsx\" coverage threshold for lines (65%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/modules/planning/bloc-operatoire/components/SupervisionRulesForm.tsx\" coverage threshold for functions (65%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/modules/planning/bloc-operatoire/components/SupervisionRulesList.tsx\" coverage threshold for statements (65%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/modules/planning/bloc-operatoire/components/SupervisionRulesList.tsx\" coverage threshold for branches (65%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/modules/planning/bloc-operatoire/components/SupervisionRulesList.tsx\" coverage threshold for lines (65%) not met: 0%\nJest: \"/Users/vincentperreard/Mathildanesth/src/modules/planning/bloc-operatoire/components/SupervisionRulesList.tsx\" coverage threshold for functions (65%) not met: 0%\nSummary of all failing tests\nFAIL src/modules/conges/permissions/__tests__/LeavePermissionService.extended.test.ts\n  ● LeavePermissionService (Tests avancés) › Cache de permissions › devrait invalider le cache d'un utilisateur\n\n    Property `delete` does not exist in the provided object\n\n      186 |             // Arrange\n      187 |             const userId = mockEmployee.id;\n    > 188 |             const cacheSpy = jest.spyOn(permissionService['permissionCache'], 'delete');\n          |                                   ^\n      189 |\n      190 |             // Act\n      191 |             permissionService.invalidateUserCache(mockEmployee.id);\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:731:13)\n      at Object.<anonymous> (src/modules/conges/permissions/__tests__/LeavePermissionService.extended.test.ts:188:35)\n\n  ● LeavePermissionService (Tests avancés) › Cache de permissions › devrait configurer le cache avec les options fournies\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n      212 |\n      213 |             // Assert\n    > 214 |             expect(optionsSpy).toHaveBeenCalled();\n          |                                ^\n      215 |\n      216 |             // Note: Ne pas tester les stats ici car elles peuvent varier en fonction de l'environnement\n      217 |             // et de l'ordre d'exécution des tests\n\n      at Object.<anonymous> (src/modules/conges/permissions/__tests__/LeavePermissionService.extended.test.ts:214:32)\n\nFAIL src/modules/conges/services/__tests__/QuotaAdvancedService.test.ts\n  ● QuotaAdvancedService › executeTransfer › devrait exécuter un transfert valide\n\n    AxiosError: Network Error\n\n      305 |\n      306 |             // Envoyer l'entrée à l'API\n    > 307 |             const response = await axios.post(`${this.apiBaseUrl}/entries`, enhancedEntry, {\n          |                              ^\n      308 |                 headers: this.defaultHeaders\n      309 |             });\n      310 |\n\n      at XMLHttpRequest.handleError (node_modules/axios/lib/adapters/xhr.js:110:14)\n      at XMLHttpRequest.invokeTheCallbackFunction (node_modules/jsdom/lib/jsdom/living/generated/EventHandlerNonNull.js:14:28)\n      at XMLHttpRequest.<anonymous> (node_modules/jsdom/lib/jsdom/living/helpers/create-event-accessor.js:35:32)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at XMLHttpRequestImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at fireAnEvent (node_modules/jsdom/lib/jsdom/living/helpers/events.js:18:36)\n      at requestErrorSteps (node_modules/jsdom/lib/jsdom/living/xhr/xhr-utils.js:131:3)\n      at Object.dispatchError (node_modules/jsdom/lib/jsdom/living/xhr/xhr-utils.js:60:3)\n      at Request.<anonymous> (node_modules/jsdom/lib/jsdom/living/xhr/XMLHttpRequest-impl.js:655:18)\n      at ClientRequest.<anonymous> (node_modules/jsdom/lib/jsdom/living/helpers/http-request.js:121:14)\n      at MockHttpSocket.emitEvent [as emit] (node_modules/@mswjs/interceptors/src/interceptors/ClientRequest/MockHttpSocket.ts:152:12)\n      at Socket.emit (node_modules/@mswjs/interceptors/src/interceptors/ClientRequest/MockHttpSocket.ts:271:14)\n      at Axios.request (node_modules/axios/lib/core/Axios.js:45:41)\n      at AuditService.createAuditEntry (src/modules/conges/services/AuditService.ts:307:30)\n      at QuotaAdvancedService.executeTransfer (src/modules/conges/services/QuotaAdvancedService.ts:199:13)\n      at Object.<anonymous> (src/modules/conges/services/__tests__/QuotaAdvancedService.test.ts:294:28)\n\n  ● QuotaAdvancedService › executeCarryOver › devrait exécuter un report valide\n\n    AxiosError: Network Error\n\n      305 |\n      306 |             // Envoyer l'entrée à l'API\n    > 307 |             const response = await axios.post(`${this.apiBaseUrl}/entries`, enhancedEntry, {\n          |                              ^\n      308 |                 headers: this.defaultHeaders\n      309 |             });\n      310 |\n\n      at XMLHttpRequest.handleError (node_modules/axios/lib/adapters/xhr.js:110:14)\n      at XMLHttpRequest.invokeTheCallbackFunction (node_modules/jsdom/lib/jsdom/living/generated/EventHandlerNonNull.js:14:28)\n      at XMLHttpRequest.<anonymous> (node_modules/jsdom/lib/jsdom/living/helpers/create-event-accessor.js:35:32)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at XMLHttpRequestImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at fireAnEvent (node_modules/jsdom/lib/jsdom/living/helpers/events.js:18:36)\n      at requestErrorSteps (node_modules/jsdom/lib/jsdom/living/xhr/xhr-utils.js:131:3)\n      at Object.dispatchError (node_modules/jsdom/lib/jsdom/living/xhr/xhr-utils.js:60:3)\n      at Request.<anonymous> (node_modules/jsdom/lib/jsdom/living/xhr/XMLHttpRequest-impl.js:655:18)\n      at ClientRequest.<anonymous> (node_modules/jsdom/lib/jsdom/living/helpers/http-request.js:121:14)\n      at MockHttpSocket.emitEvent [as emit] (node_modules/@mswjs/interceptors/src/interceptors/ClientRequest/MockHttpSocket.ts:152:12)\n      at Socket.emit (node_modules/@mswjs/interceptors/src/interceptors/ClientRequest/MockHttpSocket.ts:271:14)\n      at Axios.request (node_modules/axios/lib/core/Axios.js:45:41)\n      at AuditService.createAuditEntry (src/modules/conges/services/AuditService.ts:307:30)\n      at QuotaAdvancedService.executeCarryOver (src/modules/conges/services/QuotaAdvancedService.ts:359:13)\n      at Object.<anonymous> (src/modules/conges/services/__tests__/QuotaAdvancedService.test.ts:371:28)\n\nFAIL src/modules/conges/hooks/useLeaveQuota.test.ts\n  ● useLeaveQuota › devrait charger les quotas de congés\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 12\n    Received: 10\n\n       99 |         expect(result.current.totalBalance.pending).toBe(5);\n      100 |         expect(result.current.totalBalance.remaining).toBe(20);\n    > 101 |         expect(result.current.quotasByType.length).toBe(12); // Mise à jour pour tous les types incluant PATERNITY et PARENTAL\n          |                                                    ^\n      102 |     });\n      103 |\n      104 |     it('devrait récupérer le quota pour un type spécifique', async () => {\n\n      at Object.<anonymous> (src/modules/conges/hooks/useLeaveQuota.test.ts:101:52)\n\nFAIL src/modules/conges/services/quotaService.test.ts\n  ● quotaService › simulateQuotaTransfer › calcule correctement un transfert avec ratio personnalisé\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 2\n    Received: 4\n\n      112 |             expect(result.success).toBe(true);\n      113 |             expect(result.sourceAmount).toBe(4);\n    > 114 |             expect(result.targetAmount).toBe(2);\n          |                                         ^\n      115 |         });\n      116 |\n      117 |         it('refuse le transfert si le montant est insuffisant', async () => {\n\n      at Object.<anonymous> (src/modules/conges/services/quotaService.test.ts:114:41)\n\nFAIL src/modules/conges/hooks/useConflictDetection.test.ts\n  ● useConflictDetection › devrait initialiser correctement le hook\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/conges/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › validateDates › devrait valider correctement des dates valides\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/conges/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › validateDates › devrait rejeter des dates invalides - startDate null\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/conges/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › validateDates › devrait rejeter des dates invalides - endDate null\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/conges/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › validateDates › devrait rejeter des dates invalides - date de début après date de fin\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/conges/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › validateDates › devrait rejeter des dates lorsque la validation échoue\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/conges/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › checkConflicts › devrait vérifier les conflits et mettre à jour l'état - sans conflits\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/conges/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › checkConflicts › devrait vérifier les conflits et mettre à jour l'état - avec conflits\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/conges/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › checkConflicts › devrait gérer les erreurs lors de la vérification des conflits\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/conges/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › checkConflicts › devrait rejeter avec une erreur si les dates sont invalides\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/conges/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › checkConflicts › ne devrait pas appeler checkLeaveConflicts si les dates sont invalides\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/conges/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › checkConflicts › devrait mettre à jour les conflits lorsque le service renvoie des conflits\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/conges/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › checkConflicts › devrait gérer les erreurs du service\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/conges/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › checkConflicts › ne devrait pas appeler le service si les dates sont invalides\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/conges/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › getConflictsByType › devrait filtrer les conflits par type\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/conges/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › resolveConflict › devrait supprimer un conflit et mettre à jour l'état des conflits bloquants\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/conges/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › resetConflicts › devrait réinitialiser l'état des conflits\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/conges/hooks/useConflictDetection.test.ts:93:14)\n\nFAIL src/modules/conges/permissions/__tests__/LeavePermissionService.test.ts\n  ● LeavePermissionService › grantPermission › devrait accorder une permission à un utilisateur\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n      344 |\n      345 |             // Assert\n    > 346 |             expect(result).toBe(true);\n          |                            ^\n      347 |             expect(mockFetch).toHaveBeenCalledWith(\n      348 |                 `/api/conges/permissions/${userId}/grant`,\n      349 |                 expect.objectContaining({\n\n      at Object.<anonymous> (src/modules/conges/permissions/__tests__/LeavePermissionService.test.ts:346:28)\n\n  ● LeavePermissionService › grantPermission › devrait retourner false si l'API échoue\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: Anything, StringContaining \"Échoué (API: 500)\", Anything, ObjectContaining {\"granterId\": \"manager-456\", \"permission\": \"leaves.reports.view\", \"userId\": \"test-user\"}\n\n    Number of calls: 0\n\n      383 |             expect(result).toBe(false);\n      384 |             expect(mockFetch).toHaveBeenCalledTimes(1);\n    > 385 |             expect(mockAuditServiceInstance.logPermissionChange).toHaveBeenCalledWith(\n          |                                                                  ^\n      386 |                 expect.anything(), // AuditActionType.PERMISSION_GRANT_FAILED - utiliser expect.anything() pour l'instant\n      387 |                 expect.stringContaining('Échoué (API: 500)'),\n      388 |                 expect.anything(), // AuditSeverity.ERROR - utiliser expect.anything() pour l'instant\n\n      at Object.<anonymous> (src/modules/conges/permissions/__tests__/LeavePermissionService.test.ts:385:66)\n\n  ● LeavePermissionService › revokePermission › devrait révoquer une permission d'un utilisateur\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n      410 |\n      411 |             // Assert\n    > 412 |             expect(result).toBe(true);\n          |                            ^\n      413 |             expect(mockFetch).toHaveBeenCalledWith(\n      414 |                 `/api/conges/permissions/${userId}/revoke`,\n      415 |                 expect.objectContaining({\n\n      at Object.<anonymous> (src/modules/conges/permissions/__tests__/LeavePermissionService.test.ts:412:28)\n\n  ● LeavePermissionService › revokePermission › devrait retourner false si l'API échoue\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: Anything, StringContaining \"Échoué (API: 500)\", Anything, ObjectContaining {\"granterId\": \"manager-456\", \"permission\": \"leaves.reports.view\", \"userId\": \"test-user\"}\n\n    Number of calls: 0\n\n      445 |             expect(result).toBe(false);\n      446 |             expect(mockFetch).toHaveBeenCalledTimes(1);\n    > 447 |             expect(mockAuditServiceInstance.logPermissionChange).toHaveBeenCalledWith(\n          |                                                                  ^\n      448 |                 expect.anything(),\n      449 |                 expect.stringContaining('Échoué (API: 500)'),\n      450 |                 expect.anything(),\n\n      at Object.<anonymous> (src/modules/conges/permissions/__tests__/LeavePermissionService.test.ts:447:66)\n\n  ● LeavePermissionService › getUserPermissions › devrait retourner toutes les permissions d'un utilisateur\n\n    expect(received).toEqual(expected) // deep equality\n\n    - Expected  - 4\n    + Received  + 1\n\n    - Array [\n    -   \"leaves.reports.view\",\n    -   \"leaves.request\",\n    - ]\n    + Array []\n\n      471 |             // Assert\n      472 |             expect(mockFetch).toHaveBeenCalledWith(`/api/utilisateurs/${userId}`);\n    > 473 |             expect(permissions).toEqual(mockPermissions);\n          |                                 ^\n      474 |         });\n      475 |\n      476 |         it('devrait retourner un tableau vide si l\\'API échoue', async () => {\n\n      at Object.<anonymous> (src/modules/conges/permissions/__tests__/LeavePermissionService.test.ts:473:33)\n\n  ● LeavePermissionService › resetUserPermissions › devrait réinitialiser les permissions personnalisées d'un utilisateur\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"/api/conges/permissions/custom-user-123/reset\", ObjectContaining {\"method\": \"POST\"}\n    Received: \"/api/conges/permissions/custom-user-123\", {\"method\": \"DELETE\"}\n\n    Number of calls: 1\n\n      533 |             // Assert\n      534 |             expect(result).toBe(true);\n    > 535 |             expect(mockFetch).toHaveBeenCalledWith(\n          |                               ^\n      536 |                 `/api/conges/permissions/${userId}/reset`,\n      537 |                 expect.objectContaining({ method: 'POST' })\n      538 |             );\n\n      at Object.<anonymous> (src/modules/conges/permissions/__tests__/LeavePermissionService.test.ts:535:31)\n\n  ● LeavePermissionService › resetUserPermissions › devrait retourner false si l'API échoue\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: Anything, StringContaining \"Échoué (API: 500)\", Anything, ObjectContaining {\"granterId\": \"manager-456\", \"userId\": \"test-user\"}\n\n    Number of calls: 0\n\n      553 |             // Assert\n      554 |             expect(result).toBe(false);\n    > 555 |             expect(mockAuditServiceInstance.logPermissionChange).toHaveBeenCalledWith(\n          |                                                                  ^\n      556 |                 expect.anything(), // AuditActionType.PERMISSION_RESET_FAILED\n      557 |                 expect.stringContaining('Échoué (API: 500)'),\n      558 |                 expect.anything(), // AuditSeverity.ERROR\n\n      at Object.<anonymous> (src/modules/conges/permissions/__tests__/LeavePermissionService.test.ts:555:66)\n\nFAIL src/lib/auth/__tests__/authorization.test.ts\n  ● Authorization Module › Tests de sécurité › devrait valider tous les paramètres d'entrée\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: false\n    Received: true\n\n      370 |\n      371 |             // Test avec des rôles invalides\n    > 372 |             expect(hasRole(regularUser, 'INVALID_ROLE')).toBe(false);\n          |                                                          ^\n      373 |         });\n      374 |\n      375 |         it('devrait empêcher l\\'escalade de privilèges', () => {\n\n      at Object.<anonymous> (src/lib/auth/__tests__/authorization.test.ts:372:58)\n\nFAIL src/modules/conges/services/__tests__/conflictRecommendationService.test.ts\n  ● ConflictRecommendationService › analyzeConflicts › devrait identifier correctement les résolutions automatiques possibles\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n      134 |\n      135 |             // Vérifier que l'événement a été émis pour les résolutions automatiques\n    > 136 |             expect(mockEventBus.emit).toHaveBeenCalled();\n          |                                       ^\n      137 |         });\n      138 |\n      139 |         it('devrait calculer correctement la distribution des priorités', () => {\n\n      at Object.<anonymous> (src/modules/conges/services/__tests__/conflictRecommendationService.test.ts:136:39)\n\n  ● ConflictRecommendationService › updateRules › devrait mettre à jour les règles et émettre un événement\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: {\"data\": {\"updatedBy\": \"user\", \"updatedRules\": [\"priorityRules\"]}, \"type\": \"conflict.rules.updated\"}\n\n    Number of calls: 0\n\n      186 |\n      187 |             // Vérifier que l'événement a été émis\n    > 188 |             expect(mockEventBus.emit).toHaveBeenCalledWith({\n          |                                       ^\n      189 |                 type: 'conflict.rules.updated',\n      190 |                 data: {\n      191 |                     updatedRules: Object.keys(newRules),\n\n      at Object.<anonymous> (src/modules/conges/services/__tests__/conflictRecommendationService.test.ts:188:39)\n\n  ● ConflictRecommendationService › resetRulesToDefault › devrait réinitialiser les règles aux valeurs par défaut\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: {\"data\": {\"resetToDefault\": true, \"updatedBy\": \"user\", \"updatedRules\": [\"all\"]}, \"type\": \"conflict.rules.updated\"}\n\n    Number of calls: 0\n\n      215 |\n      216 |             // Vérifier que l'événement a été émis\n    > 217 |             expect(mockEventBus.emit).toHaveBeenCalledWith({\n          |                                       ^\n      218 |                 type: 'conflict.rules.updated',\n      219 |                 data: {\n      220 |                     updatedRules: ['all'],\n\n      at Object.<anonymous> (src/modules/conges/services/__tests__/conflictRecommendationService.test.ts:217:39)\n\nFAIL src/modules/conges/services/leaveCalculator.test.ts\n  ● leaveCalculator › calculateLeaveCountedDays › devrait calculer correctement les jours pour une période standard\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 5\n    Received: 0\n\n      48 |\n      49 |             expect(result).not.toBeNull();\n    > 50 |             expect(result?.countedDays).toBe(5);\n         |                                         ^\n      51 |             expect(result?.naturalDays).toBe(5);\n      52 |             expect(result?.halfDays).toBe(0);\n      53 |         });\n\n      at Object.<anonymous> (src/modules/conges/services/leaveCalculator.test.ts:50:41)\n\n  ● leaveCalculator › calculateLeaveCountedDays › devrait calculer correctement une demi-journée du matin\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 0.5\n    Received: 0\n\n      63 |\n      64 |             expect(result).not.toBeNull();\n    > 65 |             expect(result?.countedDays).toBe(0.5);\n         |                                         ^\n      66 |             expect(result?.naturalDays).toBe(1);\n      67 |             expect(result?.halfDays).toBe(1);\n      68 |         });\n\n      at Object.<anonymous> (src/modules/conges/services/leaveCalculator.test.ts:65:41)\n\n  ● leaveCalculator › calculateLeaveCountedDays › devrait calculer correctement une demi-journée de l'après-midi\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 0.5\n    Received: 0\n\n      78 |\n      79 |             expect(result).not.toBeNull();\n    > 80 |             expect(result?.countedDays).toBe(0.5);\n         |                                         ^\n      81 |             expect(result?.naturalDays).toBe(1);\n      82 |             expect(result?.halfDays).toBe(1);\n      83 |         });\n\n      at Object.<anonymous> (src/modules/conges/services/leaveCalculator.test.ts:80:41)\n\n  ● leaveCalculator › calculateLeaveCountedDays › devrait ignorer isHalfDay si startDate et endDate sont différents\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 2\n    Received: 0\n\n      94 |\n      95 |             expect(result).not.toBeNull();\n    > 96 |             expect(result?.countedDays).toBe(2); // Devrait compter 2 jours complets\n         |                                         ^\n      97 |             expect(result?.naturalDays).toBe(2);\n      98 |             expect(result?.halfDays).toBe(0);\n      99 |         });\n\n      at Object.<anonymous> (src/modules/conges/services/leaveCalculator.test.ts:96:41)\n\n  ● leaveCalculator › calculateLeaveCountedDays › devrait prendre en compte les jours fériés\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 4\n    Received: 0\n\n      115 |\n      116 |             expect(result).not.toBeNull();\n    > 117 |             expect(result?.countedDays).toBe(4); // 5 jours - 1 jour férié\n          |                                         ^\n      118 |             expect(result?.naturalDays).toBe(5);\n      119 |         });\n      120 |\n\n      at Object.<anonymous> (src/modules/conges/services/leaveCalculator.test.ts:117:41)\n\nFAIL src/modules/conges/hooks/useLeave.test.ts\n  ● useLeave Hook › should initialize with null leave and empty leaves array when no initialLeave provided\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: false\n    Received: true\n\n      172 |         expect(result.current.leave).toBeNull();\n      173 |         expect(result.current.leaves).toEqual([]);\n    > 174 |         expect(result.current.loading).toBe(false);\n          |                                        ^\n      175 |         expect(result.current.error).toBeNull();\n      176 |         expect(result.current.conflictCheckResult).toBeNull();\n      177 |         expect(result.current.allowanceCheckResult).toBeNull();\n\n      at Object.<anonymous> (src/modules/conges/hooks/useLeave.test.ts:174:40)\n\n  ● useLeave Hook › checkConflicts › should call checkLeaveConflicts service with Date objects and update state on success\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n      461 |\n      462 |             // Vérifier que loading était true pendant l'appel\n    > 463 |             expect(loadingDuringCall).toBe(true);\n          |                                       ^\n      464 |\n      465 |             // Vérifier les états après l'appel\n      466 |             expect(result.current.loading).toBe(false);\n\n      at Object.<anonymous> (src/modules/conges/hooks/useLeave.test.ts:463:39)\n\n  ● useLeave Hook › checkConflicts › should return null if userId is missing\n\n    expect(jest.fn()).not.toHaveBeenCalled()\n\n    Expected number of calls: 0\n    Received number of calls: 1\n\n    1: 2024-09-01T22:00:00.000Z, 2024-09-05T22:00:00.000Z, \"user123\", \"leave-initial\"\n\n      589 |\n      590 |             // Vérifier que le service n'a pas été appelé\n    > 591 |             expect(mockedCheckLeaveConflicts).not.toHaveBeenCalled();\n          |                                                   ^\n      592 |\n      593 |             // Vérifier que setError a été appelé avec les informations appropriées\n      594 |             expect(mockedSetError).toHaveBeenCalledWith(\n\n      at Object.<anonymous> (src/modules/conges/hooks/useLeave.test.ts:591:51)\n\n  ● useLeave Hook › fetchUserLeaves › should set error state if fetchLeaves service fails\n\n    Fetch leaves failed\n\n      1097 |\n      1098 |         it('should set error state if fetchLeaves service fails', async () => {\n    > 1099 |             const mockError = new Error('Fetch leaves failed');\n           |                               ^\n      1100 |             mockedFetchLeaves.mockRejectedValueOnce(mockError);\n      1101 |\n      1102 |             const { result } = renderHook(() => useLeave({ userId: mockUserId }));\n\n      at Object.<anonymous> (src/modules/conges/hooks/useLeave.test.ts:1099:31)\n\n  ● useLeave Hook › fetchUserLeaves › should set error state if fetchLeaves service fails\n\n    expect(received).toEqual(expected) // deep equality\n\n    - Expected  -  1\n    + Received  + 14\n\n    - Array []\n    + Array [\n    +   Object {\n    +     \"countedDays\": 5,\n    +     \"createdAt\": 2024-07-31T22:00:00.000Z,\n    +     \"endDate\": 2024-09-05T22:00:00.000Z,\n    +     \"id\": \"leave-initial\",\n    +     \"requestDate\": 2024-07-31T22:00:00.000Z,\n    +     \"startDate\": 2024-09-01T22:00:00.000Z,\n    +     \"status\": \"DRAFT\",\n    +     \"type\": \"ANNUAL\",\n    +     \"updatedAt\": 2024-07-31T22:00:00.000Z,\n    +     \"userId\": \"user123\",\n    +   },\n    + ]\n\n      1119 |                 severity: 'error'\n      1120 |             });\n    > 1121 |             expect(result.current.leaves).toEqual([]); // Liste reste vide\n           |                                           ^\n      1122 |         });\n      1123 |     });\n      1124 |\n\n      at Object.<anonymous> (src/modules/conges/hooks/useLeave.test.ts:1121:43)\n\n  ● useLeave Hook › fetchLeaveDetails › should set error state if fetchLeaveById service fails\n\n    Fetch details failed\n\n      1146 |         it('should set error state if fetchLeaveById service fails', async () => {\n      1147 |             const specificLeaveId = 'leave-fail';\n    > 1148 |             const mockError = new Error('Fetch details failed');\n           |                               ^\n      1149 |             mockedFetchLeaveById.mockRejectedValueOnce(mockError);\n      1150 |\n      1151 |             const { result } = renderHook(() => useLeave({ userId: mockUserId }));\n\n      at Object.<anonymous> (src/modules/conges/hooks/useLeave.test.ts:1148:31)\n\nFAIL src/modules/conges/quotas/transfer/__tests__/useQuotaTransfer.test.tsx\n  ● useQuotaTransfer › devrait charger les données initiales\n\n    expect(received).not.toBeNull()\n\n    Received: null\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div />\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n      130 |         expect(result.current.error).toBeNull();\n      131 |\n    > 132 |         await waitFor(() => expect(result.current.balance).not.toBeNull());\n          |                                                                ^\n      133 |\n      134 |         // Vérifier l'état après chargement\n      135 |         expect(result.current.loading).toBe(false);\n\n      at src/modules/conges/quotas/transfer/__tests__/useQuotaTransfer.test.tsx:132:64\n      at callback (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:76)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)\n\n  ● useQuotaTransfer › devrait calculer correctement les types disponibles\n\n    expect(received).toContain(expected) // indexOf\n\n    Expected value: \"ANNUAL\"\n    Received array: []\n\n      151 |\n      152 |         // Vérifier les types sources disponibles\n    > 153 |         expect(result.current.availableSourceTypes).toContain(LeaveType.ANNUAL);\n          |                                                     ^\n      154 |         expect(result.current.availableSourceTypes).toContain(LeaveType.RECOVERY);\n      155 |\n      156 |         // Vérifier les types cibles disponibles par source\n\n      at Object.<anonymous> (src/modules/conges/quotas/transfer/__tests__/useQuotaTransfer.test.tsx:153:53)\n\n  ● useQuotaTransfer › devrait simuler un transfert correctement\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: {\"sourceAmount\": 5, \"sourceType\": \"RECOVERY\", \"targetType\": \"ANNUAL\", \"userId\": \"mock-user-id\"}, [{\"createdAt\": 2025-05-26T14:56:03.078Z, \"id\": \"rule-1\", \"isActive\": true, \"name\": \"Récupération vers Congés Annuels\", \"ratio\": 1, \"ruleType\": \"STANDARD\", \"sourceType\": \"RECOVERY\", \"targetType\": \"ANNUAL\", \"updatedAt\": 2025-05-26T14:56:03.078Z}]\n\n    Number of calls: 0\n\n      188 |\n      189 |         // Vérifier les appels et le résultat\n    > 190 |         expect(previewQuotaTransfer).toHaveBeenCalledWith(transferRequest, applicableRules);\n          |                                      ^\n      191 |         expect(simulationResult).toMatchObject({\n      192 |             success: true,\n      193 |             sourceAmount: 5,\n\n      at Object.<anonymous> (src/modules/conges/quotas/transfer/__tests__/useQuotaTransfer.test.tsx:190:38)\n\n  ● useQuotaTransfer › devrait exécuter un transfert correctement\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: {\"sourceAmount\": 5, \"sourceType\": \"RECOVERY\", \"targetType\": \"ANNUAL\", \"userId\": \"mock-user-id\"}\n\n    Number of calls: 0\n\n      221 |\n      222 |         // Vérifier les appels et le résultat\n    > 223 |         expect(transferQuota).toHaveBeenCalledWith(transferRequest);\n          |                               ^\n      224 |         expect(fetchLeaveBalance).toHaveBeenCalledTimes(2);\n      225 |         expect(transferResult).toEqual(mockTransferResult);\n      226 |     });\n\n      at Object.<anonymous> (src/modules/conges/quotas/transfer/__tests__/useQuotaTransfer.test.tsx:223:31)\n\n  ● useQuotaTransfer › devrait gérer les erreurs de transfert\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"Erreur lors du transfert\"\n    Received: \"Aucune règle de transfert n'est disponible pour Récupération vers Congés annuels\"\n\n      304 |         expect(transferResult.success).toBe(false);\n      305 |         expect(result.current.transferError).toBeInstanceOf(Error);\n    > 306 |         expect(result.current.transferError?.message).toBe(errorMessage);\n          |                                                       ^\n      307 |     });\n      308 | }); \n\n      at Object.<anonymous> (src/modules/conges/quotas/transfer/__tests__/useQuotaTransfer.test.tsx:306:55)\n\nFAIL src/modules/conges/services/conflictDetectionService.test.ts\n  ● Test suite failed to run\n\n    Configuration error:\n\n    Could not locate module @/modules/teams/services/teamService mapped as:\n    /Users/vincentperreard/Mathildanesth/src/modules/$1.\n\n    Please check your configuration for these entries:\n    {\n      \"moduleNameMapper\": {\n        \"/^@\\/modules\\/(.*)$/\": \"/Users/vincentperreard/Mathildanesth/src/modules/$1\"\n      },\n      \"resolver\": undefined\n    }\n\n       8 |\n       9 | jest.mock('../../../services/userService');\n    > 10 | jest.mock('@/modules/teams/services/teamService');\n         |      ^\n      11 | jest.mock('../../../utils/performanceLogger');\n      12 |\n      13 | const MockUserService = UserService as jest.MockedClass<typeof UserService>;\n\n      at createNoMappedModuleFoundError (node_modules/jest-resolve/build/resolver.js:759:17)\n      at Object.<anonymous> (src/modules/conges/services/conflictDetectionService.test.ts:10:6)\n\nFAIL src/modules/conges/services/__tests__/leaveService.test.ts\n  ● Test suite failed to run\n\n    ReferenceError: Cannot access 'serviceMocks_1' before initialization\n\n      36 | // Mock Prisma\n      37 | jest.mock('@/lib/prisma', () => ({\n    > 38 |     prisma: mockPrismaClient,\n         |             ^\n      39 | }));\n      40 |\n      41 | // Mock des utilitaires\n\n      at src/modules/conges/services/__tests__/leaveService.test.ts:38:13\n      at Object.require (src/modules/conges/services/leaveService.ts:43:1)\n      at Object.<anonymous> (src/modules/conges/services/__tests__/leaveService.test.ts:7:1)\n\nFAIL src/modules/conges/services/__tests__/leaveCalculator.comprehensive.test.ts\n  ● Test suite failed to run\n\n    Cannot find module '../../profiles/services/workScheduleService' from 'src/modules/conges/services/__tests__/leaveCalculator.comprehensive.test.ts'\n\n      13 | import { TestFactory } from '@/tests/factories/testFactorySimple';\n      14 | import { publicHolidayService } from '../publicHolidayService';\n    > 15 | import { isWorkingDay } from '../../profiles/services/workScheduleService';\n         | ^\n      16 | import { WorkSchedule, WorkFrequency } from '../../profiles/types/workSchedule';\n      17 | import { getLogger } from '@/utils/logger';\n      18 |\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)\n      at Object.<anonymous> (src/modules/conges/services/__tests__/leaveCalculator.comprehensive.test.ts:15:1)\n\nFAIL src/modules/conges/hooks/__tests__/useConflictDetection.test.ts (5.422 s)\n  ● useConflictDetection › devrait initialiser correctement l'état et vérifier les conflits\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: false\n    Received: true\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div />\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n      86 |\n      87 |         // Attendre la fin du chargement\n    > 88 |         await waitFor(() => expect(result.current.loading).toBe(false));\n         |                                                            ^\n      89 |\n      90 |         // Assert : vérifier que la méthode du *service* a été appelée (indirectement par le hook)\n      91 |         // Il faut peut-être ajuster ce que le hook passe au service\n\n      at src/modules/conges/hooks/__tests__/useConflictDetection.test.ts:88:60\n      at callback (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:76)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)\n\n  ● useConflictDetection - resolveConflict › devrait appeler le service (indirectement) et mettre à jour l'état après résolution\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: false\n    Received: true\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div />\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n      160 |         // Charger les conflits initiaux en appelant checkConflicts avec des objets Date\n      161 |         act(() => { result.current.checkConflicts(mockStartDateObj, mockEndDateObj); });\n    > 162 |         await waitFor(() => expect(result.current.loading).toBe(false));\n          |                                                            ^\n      163 |         expect(result.current.conflicts).toEqual(initialConflictsResult.conflicts);\n      164 |         expect(result.current.hasBlockingConflicts).toBe(true);\n      165 |\n\n      at src/modules/conges/hooks/__tests__/useConflictDetection.test.ts:162:60\n      at callback (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:76)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)\n\n  ● useConflictDetection - resolveConflict › devrait gérer les erreurs lors de la résolution\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: false\n    Received: true\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div />\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n      202 |         // Charger les conflits initiaux en appelant checkConflicts avec des objets Date\n      203 |         act(() => { result.current.checkConflicts(mockStartDateObj, mockEndDateObj); });\n    > 204 |         await waitFor(() => expect(result.current.loading).toBe(false));\n          |                                                            ^\n      205 |\n      206 |         // Act : Appeler resolveConflict du hook. On s'attend à ce qu'il échoue.\n      207 |         // Pour simuler l'échec, on pourrait mocker une dépendance ou modifier le hook\n\n      at src/modules/conges/hooks/__tests__/useConflictDetection.test.ts:204:60\n      at callback (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:76)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)\n\n  ● useConflictDetection - getConflictsByType › devrait filtrer les conflits par type\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: false\n    Received: true\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div />\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n      244 |         // Charger les conflits en appelant checkConflicts avec des objets Date\n      245 |         act(() => { result.current.checkConflicts(mockStartDateObj, mockEndDateObj); });\n    > 246 |         await waitFor(() => expect(result.current.loading).toBe(false));\n          |                                                            ^\n      247 |\n      248 |         // Act & Assert : Appeler getConflictsByType du *hook*\n      249 |         expect(result.current.getConflictsByType(ConflictType.USER_LEAVE_OVERLAP)).toEqual([mockConflicts[0]]);\n\n      at src/modules/conges/hooks/__tests__/useConflictDetection.test.ts:246:60\n      at callback (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:76)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)\n\nFAIL src/modules/conges/components/UserLeaveBalance.test.tsx (6.265 s)\n  ● UserLeaveBalance Component › affiche correctement les soldes de congés\n\n    Unable to find an element with the text: Congé Annuel. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div>\u001b[39m\n        \u001b[36m<div\u001b[39m\n          \u001b[33mclass\u001b[39m=\u001b[32m\"rounded-lg border bg-card text-card-foreground shadow-sm dark:bg-slate-800 dark:border-slate-700 w-full\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"flex flex-col space-y-1.5 p-6\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<h3\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"font-semibold tracking-tight bg-gradient-to-r from-primary-600 via-secondary-600 to-tertiary-600 bg-clip-text text-transparent text-lg\"\u001b[39m\n              \u001b[33mstyle\u001b[39m=\u001b[32m\"background-clip: text;\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mChargement des soldes...\u001b[0m\n            \u001b[36m</h3>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"p-6 pt-0\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"space-y-3\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</div>\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n      74 |\n      75 |         expectToBeInDocument(screen.getByText('Chargement des soldes...'));\n    > 76 |         await waitFor(() => {\n         |                      ^\n      77 |             expectToBeInDocument(screen.getByText('Congé Annuel'));\n      78 |         });\n      79 |\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at Object.<anonymous> (src/modules/conges/components/UserLeaveBalance.test.tsx:76:22)\n\n  ● UserLeaveBalance Component › affiche un message d'erreur si le chargement échoue\n\n    Unable to find an element with the text: Erreur. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div>\u001b[39m\n        \u001b[36m<div\u001b[39m\n          \u001b[33mclass\u001b[39m=\u001b[32m\"rounded-lg border bg-card text-card-foreground shadow-sm dark:bg-slate-800 dark:border-slate-700 w-full\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"flex flex-col space-y-1.5 p-6\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<h3\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"font-semibold tracking-tight bg-gradient-to-r from-primary-600 via-secondary-600 to-tertiary-600 bg-clip-text text-transparent text-lg\"\u001b[39m\n              \u001b[33mstyle\u001b[39m=\u001b[32m\"background-clip: text;\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mChargement des soldes...\u001b[0m\n            \u001b[36m</h3>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"p-6 pt-0\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"space-y-3\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</div>\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n       97 |         mockedAxios.get.mockRejectedValueOnce(new Error('Network error'));\n       98 |         render(<UserLeaveBalance userId={123} />);\n    >  99 |         await waitFor(() => {\n          |                      ^\n      100 |             expectToBeInDocument(screen.getByText('Erreur'));\n      101 |         });\n      102 |         expectToBeInDocument(screen.getByText('Impossible de charger les soldes de congés'));\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at Object.<anonymous> (src/modules/conges/components/UserLeaveBalance.test.tsx:99:22)\n\n  ● UserLeaveBalance Component › affiche un message si aucun solde n'est disponible\n\n    Unable to find an element with the text: Aucun solde disponible. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div>\u001b[39m\n        \u001b[36m<div\u001b[39m\n          \u001b[33mclass\u001b[39m=\u001b[32m\"rounded-lg border bg-card text-card-foreground shadow-sm dark:bg-slate-800 dark:border-slate-700 w-full\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"flex flex-col space-y-1.5 p-6\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<h3\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"font-semibold tracking-tight bg-gradient-to-r from-primary-600 via-secondary-600 to-tertiary-600 bg-clip-text text-transparent text-lg\"\u001b[39m\n              \u001b[33mstyle\u001b[39m=\u001b[32m\"background-clip: text;\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mChargement des soldes...\u001b[0m\n            \u001b[36m</h3>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"p-6 pt-0\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"space-y-3\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</div>\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n      106 |         mockedAxios.get.mockResolvedValueOnce({ data: [] });\n      107 |         render(<UserLeaveBalance userId={123} />);\n    > 108 |         await waitFor(() => {\n          |                      ^\n      109 |             expectToBeInDocument(screen.getByText('Aucun solde disponible'));\n      110 |         });\n      111 |     });\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at Object.<anonymous> (src/modules/conges/components/UserLeaveBalance.test.tsx:108:22)\n\n  ● UserLeaveBalance Component › respecte l'option compact=true en masquant les détails\n\n    Unable to find an element with the text: Congé Annuel. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div>\u001b[39m\n        \u001b[36m<div\u001b[39m\n          \u001b[33mclass\u001b[39m=\u001b[32m\"rounded-lg border bg-card text-card-foreground shadow-sm dark:bg-slate-800 dark:border-slate-700 w-full\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"flex flex-col space-y-1.5 p-6\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<h3\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"font-semibold tracking-tight bg-gradient-to-r from-primary-600 via-secondary-600 to-tertiary-600 bg-clip-text text-transparent text-lg\"\u001b[39m\n              \u001b[33mstyle\u001b[39m=\u001b[32m\"background-clip: text;\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mChargement des soldes...\u001b[0m\n            \u001b[36m</h3>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"p-6 pt-0\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"space-y-3\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</div>\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n      114 |         mockedAxios.get.mockResolvedValueOnce({ data: mockBalanceData });\n      115 |         render(<UserLeaveBalance userId={123} compact={true} />);\n    > 116 |         await waitFor(() => {\n          |                      ^\n      117 |             expectToBeInDocument(screen.getByText('Congé Annuel'));\n      118 |         });\n      119 |         expectToBeInDocument(screen.getByText('15.5 jours'));\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at Object.<anonymous> (src/modules/conges/components/UserLeaveBalance.test.tsx:116:22)\n\n  ● UserLeaveBalance Component › respecte l'option hideHeader=true\n\n    Unable to find an element with the text: Congé Annuel. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div>\u001b[39m\n        \u001b[36m<div\u001b[39m\n          \u001b[33mclass\u001b[39m=\u001b[32m\"rounded-lg border bg-card text-card-foreground shadow-sm dark:bg-slate-800 dark:border-slate-700 w-full\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"p-6 pt-0\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"space-y-3\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</div>\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n      126 |         mockedAxios.get.mockResolvedValueOnce({ data: mockBalanceData });\n      127 |         render(<UserLeaveBalance userId={123} hideHeader={true} />);\n    > 128 |         await waitFor(() => {\n          |                      ^\n      129 |             expectToBeInDocument(screen.getByText('Congé Annuel'));\n      130 |         });\n      131 |         expectNotToBeInDocument(screen.queryByText('Soldes de congés'));\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at Object.<anonymous> (src/modules/conges/components/UserLeaveBalance.test.tsx:128:22)\n\nFAIL src/modules/conges/components/LeaveForm.test.tsx (12.75 s)\n  ● LeaveForm › should handle error when loading leave types\n\n    Unable to find an element with the display value: Erreur de chargement.\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div>\u001b[39m\n        \u001b[36m<form\u001b[39m\n          \u001b[33mclass\u001b[39m=\u001b[32m\"space-y-6 max-w-2xl mx-auto\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"bg-gradient-to-r from-indigo-50 to-blue-50 p-4 rounded-lg shadow-sm mb-6\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<h3\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"text-lg font-medium text-gray-800 mb-2\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mNouvelle demande de congé\u001b[0m\n            \u001b[36m</h3>\u001b[39m\n            \u001b[36m<p\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"text-sm text-gray-600\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mComplétez le formulaire ci-dessous pour soumettre votre demande.\u001b[0m\n            \u001b[36m</p>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"bg-white p-6 rounded-lg shadow-md border border-gray-200\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"mb-6\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center justify-between\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<label\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700\"\u001b[39m\n                  \u001b[33mfor\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mType de congé\u001b[0m\n                \u001b[36m</label>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"relative inline-block\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<span\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"text-gray-400 hover:text-gray-600 cursor-help\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-circle-help h-4 w-4\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<circle\u001b[39m\n                        \u001b[33mcx\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                        \u001b[33mcy\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                        \u001b[33mr\u001b[39m=\u001b[32m\"10\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M12 17h.01\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                  \u001b[36m</span>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"mt-1 relative\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<select\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"block w-full rounded-md border-gray-300 shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm py-2 px-3\"\u001b[39m\n                  \u001b[33mdisabled\u001b[39m=\u001b[32m\"\"\u001b[39m\n                  \u001b[33mid\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                  \u001b[33mname\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                  \u001b[33mrequired\u001b[39m=\u001b[32m\"\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<option\u001b[39m\n                    \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[0mChargement...\u001b[0m\n                  \u001b[36m</option>\u001b[39m\n                \u001b[36m</select>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"grid grid-cols-1 gap-6 md:grid-cols-2 mb-6\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<label\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700 mb-1\"\u001b[39m\n                  \u001b[33mfor\u001b[39m=\u001b[32m\"startDate\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mDate de début\u001b[0m\n                \u001b[36m</label>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker-wrapper\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker__input-container\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<input\u001b[39m\n                        \u001b[33mautocomplete\u001b[39m=\u001b[32m\"off\"\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 pl-10 pr-4 py-2 disabled:bg-gray-100 disabled:cursor-not-allowed\"\u001b[39m\n                        \u001b[33mid\u001b[39m=\u001b[32m\"startDate\"\u001b[39m\n                        \u001b[33mplaceholder\u001b[39m=\u001b[32m\"Sélectionner une date\"\u001b[39m\n                        \u001b[33mtype\u001b[39m=\u001b[32m\"text\"\u001b[39m\n                        \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</div>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-calendar h-5 w-5 text-gray-400\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M8 2v4\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M16 2v4\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<rect\u001b[39m\n                        \u001b[33mheight\u001b[39m=\u001b[32m\"18\"\u001b[39m\n                        \u001b[33mrx\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                        \u001b[33mwidth\u001b[39m=\u001b[32m\"18\"\u001b[39m\n                        \u001b[33mx\u001b[39m=\u001b[32m\"3\"\u001b[39m\n                        \u001b[33my\u001b[39m=\u001b[32m\"4\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M3 10h18\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<label\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700 mb-1\"\u001b[39m\n                  \u001b[33mfor\u001b[39m=\u001b[32m\"endDate\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mDate de fin\u001b[0m\n                \u001b[36m</label>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker-wrapper\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker__input-container\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<input\u001b[39m\n                        \u001b[33mautocomplete\u001b[39m=\u001b[32m\"off\"\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 pl-10 pr-4 py-2 disabled:bg-gray-100 disabled:cursor-not-allowed\"\u001b[39m\n                        \u001b[33mid\u001b[39m=\u001b[32m\"endDate\"\u001b[39m\n                        \u001b[33mplaceholder\u001b[39m=\u001b[32m\"Sélectionner une date\"\u001b[39m\n                        \u001b[33mtype\u001b[39m=\u001b[32m\"text\"\u001b[39m\n                        \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</div>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-calendar h-5 w-5 text-gray-400\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M8 2v4\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M16 2v4\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<rect\u001b[39m\n                        \u001b[33mheight\u001b[39m=\u001b[32m\"18\"\u001b[39m\n                        \u001b[33mrx\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                        \u001b[33mwidth\u001b[39m=\u001b[32m\"18\"\u001b[39m\n                        \u001b[33mx\u001b[39m=\u001b[32m\"3\"\u001b[39m\n                        \u001b[33my\u001b[39m=\u001b[32m\"4\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M3 10h18\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"mb-6\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"flex flex-col space-y-4 p-4 bg-gray-50 rounded-md border border-gray-200\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<input\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"\u001b[39m\n                    \u001b[33mdisabled\u001b[39m=\u001b[32m\"\"\u001b[39m\n                    \u001b[33mid\u001b[39m=\u001b[32m\"isHalfDay\"\u001b[39m\n                    \u001b[33mname\u001b[39m=\u001b[32m\"isHalfDay\"\u001b[39m\n                    \u001b[33mtype\u001b[39m=\u001b[32m\"checkbox\"\u001b[39m\n                  \u001b[36m/>\u001b[39m\n                  \u001b[36m<label\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"ml-2 block text-sm font-medium text-gray-700\"\u001b[39m\n                    \u001b[33mfor\u001b[39m=\u001b[32m\"isHalfDay\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[0mDemi-journée\u001b[0m\n                  \u001b[36m</label>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"relative inline-block\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<span\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"text-gray-400 hover:text-gray-600 cursor-help ml-1\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<svg\u001b[39m\n                        \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-circle-help h-4 w-4\"\u001b[39m\n                        \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                        \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                        \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                        \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                        \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<circle\u001b[39m\n                          \u001b[33mcx\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                          \u001b[33mcy\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                          \u001b[33mr\u001b[39m=\u001b[32m\"10\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                        \u001b[36m<path\u001b[39m\n                          \u001b[33md\u001b[39m=\u001b[32m\"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                        \u001b[36m<path\u001b[39m\n                          \u001b[33md\u001b[39m=\u001b[32m\"M12 17h.01\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                      \u001b[36m</svg>\u001b[39m\n                    \u001b[36m</span>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"space-y-3 mb-6\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"mb-6\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center justify-between\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<label\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700\"\u001b[39m\n                  \u001b[33mfor\u001b[39m=\u001b[32m\"reason\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mMotif (optionnel)\u001b[0m\n                \u001b[36m</label>\u001b[39m\n                \u001b[36m<span\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mMax. 200 caractères\u001b[0m\n                \u001b[36m</span>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<textarea\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\u001b[39m\n                \u001b[33mid\u001b[39m=\u001b[32m\"reason\"\u001b[39m\n                \u001b[33mmaxlength\u001b[39m=\u001b[32m\"200\"\u001b[39m\n                \u001b[33mname\u001b[39m=\u001b[32m\"reason\"\u001b[39m\n                \u001b[33mplaceholder\u001b[39m=\u001b[32m\"Précisez le motif de votre demande si nécessaire...\"\u001b[39m\n                \u001b[33mrows\u001b[39m=\u001b[32m\"3\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"flex justify-end mt-8\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-60 disabled:cursor-not-allowed transition-opacity\"\u001b[39m\n              \u001b[33mdisabled\u001b[39m=\u001b[32m\"\"\u001b[39m\n              \u001b[33mtype\u001b[39m=\u001b[32m\"submit\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSoumettre la demande\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</form>\u001b[39m\n      \u001b[36m</div>\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n      258 |         (global.fetch as jest.Mock).mockRejectedValue(new Error('Failed to fetch types'));\n      259 |         renderTheForm();\n    > 260 |         await waitFor(() => {\n          |                      ^\n      261 |             expectToBeInDocument(screen.getByDisplayValue('Erreur de chargement'));\n      262 |         });\n      263 |     });\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at Object.<anonymous> (src/modules/conges/components/LeaveForm.test.tsx:260:22)\n\n  ● LeaveForm › should call useLeaveCalculation with initial dates and options\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: {\"endDate\": null, \"options\": {\"countHalfDays\": false, \"halfDayPeriod\": undefined}, \"startDate\": null}\n    Received\n           1\n              Object {\n                \"endDate\": null,\n                \"options\": Object {\n            -     \"countHalfDays\": false,\n                  \"halfDayPeriod\": undefined,\n            +     \"isHalfDay\": false,\n                },\n                \"startDate\": null,\n              },\n           2\n              Object {\n                \"endDate\": null,\n                \"options\": Object {\n            -     \"countHalfDays\": false,\n                  \"halfDayPeriod\": undefined,\n            +     \"isHalfDay\": false,\n                },\n                \"startDate\": null,\n              },\n\n    Number of calls: 2\n\n      45 |  */\n      46 | export function expectToHaveBeenCalledWith(mockFn: MockFn, ...args: any[]): void {\n    > 47 |     expect(mockFn).toHaveBeenCalledWith(...args);\n         |                    ^\n      48 | }\n      49 |\n      50 | /**\n\n      at expectToHaveBeenCalledWith (src/tests/utils/assertions.ts:47:20)\n      at Object.<anonymous> (src/modules/conges/components/LeaveForm.test.tsx:267:35)\n\n  ● LeaveForm › should update useLeaveCalculation when dates change\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: {\"endDate\": null, \"options\": {\"countHalfDays\": false, \"halfDayPeriod\": undefined}, \"startDate\": null}\n    Received\n           1\n              Object {\n                \"endDate\": null,\n                \"options\": Object {\n            -     \"countHalfDays\": false,\n                  \"halfDayPeriod\": undefined,\n            +     \"isHalfDay\": false,\n                },\n                \"startDate\": null,\n              },\n           2\n              Object {\n                \"endDate\": null,\n                \"options\": Object {\n            -     \"countHalfDays\": false,\n                  \"halfDayPeriod\": undefined,\n            +     \"isHalfDay\": false,\n                },\n                \"startDate\": null,\n              },\n\n    Number of calls: 2\n\n      45 |  */\n      46 | export function expectToHaveBeenCalledWith(mockFn: MockFn, ...args: any[]): void {\n    > 47 |     expect(mockFn).toHaveBeenCalledWith(...args);\n         |                    ^\n      48 | }\n      49 |\n      50 | /**\n\n      at expectToHaveBeenCalledWith (src/tests/utils/assertions.ts:47:20)\n      at Object.<anonymous> (src/modules/conges/components/LeaveForm.test.tsx:280:35)\n\n  ● LeaveForm › should handle half-day selection\n\n    expect(element).toBeChecked()\n\n    Received element is not checked:\n      <input class=\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\" disabled=\"\" id=\"isHalfDay\" name=\"isHalfDay\" type=\"checkbox\" />\n\n      73 |  */\n      74 | export function expectToBeChecked(element: HTMLElement | null | undefined): void {\n    > 75 |     expect(element).toBeChecked();\n         |                     ^\n      76 | }\n      77 |\n      78 | /**\n\n      at expectToBeChecked (src/tests/utils/assertions.ts:75:21)\n      at Object.<anonymous> (src/modules/conges/components/LeaveForm.test.tsx:346:26)\n\n  ● LeaveForm › should validate form on submit and show errors if invalid\n\n    Unable to find an element with the text: La date de début est requise.. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div>\u001b[39m\n        \u001b[36m<form\u001b[39m\n          \u001b[33mclass\u001b[39m=\u001b[32m\"space-y-6 max-w-2xl mx-auto\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"bg-gradient-to-r from-indigo-50 to-blue-50 p-4 rounded-lg shadow-sm mb-6\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<h3\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"text-lg font-medium text-gray-800 mb-2\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mNouvelle demande de congé\u001b[0m\n            \u001b[36m</h3>\u001b[39m\n            \u001b[36m<p\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"text-sm text-gray-600\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mComplétez le formulaire ci-dessous pour soumettre votre demande.\u001b[0m\n            \u001b[36m</p>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"bg-white p-6 rounded-lg shadow-md border border-gray-200\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"mb-6\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center justify-between\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<label\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700\"\u001b[39m\n                  \u001b[33mfor\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mType de congé\u001b[0m\n                \u001b[36m</label>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"relative inline-block\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<span\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"text-gray-400 hover:text-gray-600 cursor-help\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-circle-help h-4 w-4\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<circle\u001b[39m\n                        \u001b[33mcx\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                        \u001b[33mcy\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                        \u001b[33mr\u001b[39m=\u001b[32m\"10\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M12 17h.01\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                  \u001b[36m</span>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"mt-1 relative\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<select\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"block w-full rounded-md border-gray-300 shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm py-2 px-3\"\u001b[39m\n                  \u001b[33mdisabled\u001b[39m=\u001b[32m\"\"\u001b[39m\n                  \u001b[33mid\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                  \u001b[33mname\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                  \u001b[33mrequired\u001b[39m=\u001b[32m\"\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<option\u001b[39m\n                    \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[0mChargement...\u001b[0m\n                  \u001b[36m</option>\u001b[39m\n                \u001b[36m</select>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"grid grid-cols-1 gap-6 md:grid-cols-2 mb-6\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<label\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700 mb-1\"\u001b[39m\n                  \u001b[33mfor\u001b[39m=\u001b[32m\"startDate\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mDate de début\u001b[0m\n                \u001b[36m</label>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker-wrapper\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker__input-container\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<input\u001b[39m\n                        \u001b[33mautocomplete\u001b[39m=\u001b[32m\"off\"\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 pl-10 pr-4 py-2 disabled:bg-gray-100 disabled:cursor-not-allowed\"\u001b[39m\n                        \u001b[33mid\u001b[39m=\u001b[32m\"startDate\"\u001b[39m\n                        \u001b[33mplaceholder\u001b[39m=\u001b[32m\"Sélectionner une date\"\u001b[39m\n                        \u001b[33mtype\u001b[39m=\u001b[32m\"text\"\u001b[39m\n                        \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</div>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-calendar h-5 w-5 text-gray-400\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M8 2v4\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M16 2v4\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<rect\u001b[39m\n                        \u001b[33mheight\u001b[39m=\u001b[32m\"18\"\u001b[39m\n                        \u001b[33mrx\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                        \u001b[33mwidth\u001b[39m=\u001b[32m\"18\"\u001b[39m\n                        \u001b[33mx\u001b[39m=\u001b[32m\"3\"\u001b[39m\n                        \u001b[33my\u001b[39m=\u001b[32m\"4\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M3 10h18\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<label\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700 mb-1\"\u001b[39m\n                  \u001b[33mfor\u001b[39m=\u001b[32m\"endDate\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mDate de fin\u001b[0m\n                \u001b[36m</label>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker-wrapper\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker__input-container\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<input\u001b[39m\n                        \u001b[33mautocomplete\u001b[39m=\u001b[32m\"off\"\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 pl-10 pr-4 py-2 disabled:bg-gray-100 disabled:cursor-not-allowed\"\u001b[39m\n                        \u001b[33mid\u001b[39m=\u001b[32m\"endDate\"\u001b[39m\n                        \u001b[33mplaceholder\u001b[39m=\u001b[32m\"Sélectionner une date\"\u001b[39m\n                        \u001b[33mtype\u001b[39m=\u001b[32m\"text\"\u001b[39m\n                        \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</div>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-calendar h-5 w-5 text-gray-400\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M8 2v4\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M16 2v4\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<rect\u001b[39m\n                        \u001b[33mheight\u001b[39m=\u001b[32m\"18\"\u001b[39m\n                        \u001b[33mrx\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                        \u001b[33mwidth\u001b[39m=\u001b[32m\"18\"\u001b[39m\n                        \u001b[33mx\u001b[39m=\u001b[32m\"3\"\u001b[39m\n                        \u001b[33my\u001b[39m=\u001b[32m\"4\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M3 10h18\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"mb-6\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"flex flex-col space-y-4 p-4 bg-gray-50 rounded-md border border-gray-200\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<input\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"\u001b[39m\n                    \u001b[33mdisabled\u001b[39m=\u001b[32m\"\"\u001b[39m\n                    \u001b[33mid\u001b[39m=\u001b[32m\"isHalfDay\"\u001b[39m\n                    \u001b[33mname\u001b[39m=\u001b[32m\"isHalfDay\"\u001b[39m\n                    \u001b[33mtype\u001b[39m=\u001b[32m\"checkbox\"\u001b[39m\n                  \u001b[36m/>\u001b[39m\n                  \u001b[36m<label\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"ml-2 block text-sm font-medium text-gray-700\"\u001b[39m\n                    \u001b[33mfor\u001b[39m=\u001b[32m\"isHalfDay\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[0mDemi-journée\u001b[0m\n                  \u001b[36m</label>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"relative inline-block\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<span\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"text-gray-400 hover:text-gray-600 cursor-help ml-1\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<svg\u001b[39m\n                        \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-circle-help h-4 w-4\"\u001b[39m\n                        \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                        \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                        \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                        \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                        \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<circle\u001b[39m\n                          \u001b[33mcx\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                          \u001b[33mcy\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                          \u001b[33mr\u001b[39m=\u001b[32m\"10\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                        \u001b[36m<path\u001b[39m\n                          \u001b[33md\u001b[39m=\u001b[32m\"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                        \u001b[36m<path\u001b[39m\n                          \u001b[33md\u001b[39m=\u001b[32m\"M12 17h.01\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                      \u001b[36m</svg>\u001b[39m\n                    \u001b[36m</span>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"space-y-3 mb-6\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"mb-6\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center justify-between\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<label\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700\"\u001b[39m\n                  \u001b[33mfor\u001b[39m=\u001b[32m\"reason\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mMotif (optionnel)\u001b[0m\n                \u001b[36m</label>\u001b[39m\n                \u001b[36m<span\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mMax. 200 caractères\u001b[0m\n                \u001b[36m</span>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<textarea\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\u001b[39m\n                \u001b[33mid\u001b[39m=\u001b[32m\"reason\"\u001b[39m\n                \u001b[33mmaxlength\u001b[39m=\u001b[32m\"200\"\u001b[39m\n                \u001b[33mname\u001b[39m=\u001b[32m\"reason\"\u001b[39m\n                \u001b[33mplaceholder\u001b[39m=\u001b[32m\"Précisez le motif de votre demande si nécessaire...\"\u001b[39m\n                \u001b[33mrows\u001b[39m=\u001b[32m\"3\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"flex justify-end mt-8\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-60 disabled:cursor-not-allowed transition-opacity\"\u001b[39m\n              \u001b[33mdisabled\u001b[39m=\u001b[32m\"\"\u001b[39m\n              \u001b[33mtype\u001b[39m=\u001b[32m\"submit\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSoumettre la demande\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</form>\u001b[39m\n      \u001b[36m</div>\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n      406 |         await user.click(submitButton); // Soumission sans dates\n      407 |\n    > 408 |         expectToBeInDocument(await screen.findByText('La date de début est requise.'));\n          |                                           ^\n      409 |         expectToBeInDocument(screen.getByText('La date de fin est requise.'));\n      410 |         expectNotToHaveBeenCalled(mockedAxios.post);\n      411 |     });\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at node_modules/@testing-library/dom/dist/query-helpers.js:86:32\n      at Object.<anonymous> (src/modules/conges/components/LeaveForm.test.tsx:408:43)\n\n  ● LeaveForm › Form Submission › should submit valid data to /api/conges/batch and handle success\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"/api/conges/batch\", [ObjectContaining {\"endDate\": \"2024-09-03\", \"reason\": \"Vacances annuelles\", \"startDate\": \"2024-09-02\", \"typeCode\": \"ANNUAL\", \"userId\": 1}]\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<form\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"space-y-6 max-w-2xl mx-auto\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"bg-gradient-to-r from-indigo-50 to-blue-50 p-4 rounded-lg shadow-sm mb-6\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<h3\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"text-lg font-medium text-gray-800 mb-2\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[0mNouvelle demande de congé\u001b[0m\n              \u001b[36m</h3>\u001b[39m\n              \u001b[36m<p\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"text-sm text-gray-600\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[0mComplétez le formulaire ci-dessous pour soumettre votre demande.\u001b[0m\n              \u001b[36m</p>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"bg-white p-6 rounded-lg shadow-md border border-gray-200\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"mb-6\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center justify-between\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<label\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700\"\u001b[39m\n                    \u001b[33mfor\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[0mType de congé\u001b[0m\n                  \u001b[36m</label>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"relative inline-block\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<span\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"text-gray-400 hover:text-gray-600 cursor-help\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<svg\u001b[39m\n                        \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-circle-help h-4 w-4\"\u001b[39m\n                        \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                        \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                        \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                        \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                        \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<circle\u001b[39m\n                          \u001b[33mcx\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                          \u001b[33mcy\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                          \u001b[33mr\u001b[39m=\u001b[32m\"10\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                        \u001b[36m<path\u001b[39m\n                          \u001b[33md\u001b[39m=\u001b[32m\"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                        \u001b[36m<path\u001b[39m\n                          \u001b[33md\u001b[39m=\u001b[32m\"M12 17h.01\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                      \u001b[36m</svg>\u001b[39m\n                    \u001b[36m</span>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"mt-1 relative\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<select\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"block w-full rounded-md border-gray-300 shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm py-2 px-3\"\u001b[39m\n                    \u001b[33mid\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                    \u001b[33mname\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                    \u001b[33mrequired\u001b[39m=\u001b[32m\"\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<option\u001b[39m\n                      \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[0m-- Sélectionner un type --\u001b[0m\n                    \u001b[36m</option>\u001b[39m\n                    \u001b[36m<option\u001b[39m\n                      \u001b[33mtitle\u001b[39m=\u001b[32m\"Congés annuels bruts\"\u001b[39m\n                      \u001b[33mvalue\u001b[39m=\u001b[32m\"ANNUAL\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[0mCongé annuel\u001b[0m\n                    \u001b[36m</option>\u001b[39m\n                    \u001b[36m<option\u001b[39m\n                      \u001b[33mtitle\u001b[39m=\u001b[32m\"RTT bruts\"\u001b[39m\n                      \u001b[33mvalue\u001b[39m=\u001b[32m\"RTT\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[0mRTT API (Raw)\u001b[0m\n                    \u001b[36m</option>\u001b[39m\n                    \u001b[36m<option\u001b[39m\n                      \u001b[33mtitle\u001b[39m=\u001b[32m\"Congé maladie brut\"\u001b[39m\n                      \u001b[33mvalue\u001b[39m=\u001b[32m\"SICK\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[0mMaladie\u001b[0m\n                    \u001b[36m</option>\u001b[39m\n                  \u001b[36m</select>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"grid grid-cols-1 gap-6 md:grid-cols-2 mb-6\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<label\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700 mb-1\"\u001b[39m\n                    \u001b[33mfor\u001b[39m=\u001b[32m\"startDate\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[0mDate de début\u001b[0m\n                  \u001b[36m</label>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker-wrapper\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<div\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker__input-container\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<input\u001b[39m\n                          \u001b[33mautocomplete\u001b[39m=\u001b[32m\"off\"\u001b[39m\n                          \u001b[33mclass\u001b[39m=\u001b[32m\"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 pl-10 pr-4 py-2 disabled:bg-gray-100 disabled:cursor-not-allowed\"\u001b[39m\n                          \u001b[33mid\u001b[39m=\u001b[32m\"startDate\"\u001b[39m\n                          \u001b[33mplaceholder\u001b[39m=\u001b[32m\"Sélectionner une date\"\u001b[39m\n                          \u001b[33mtype\u001b[39m=\u001b[32m\"text\"\u001b[39m\n                          \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                      \u001b[36m</div>\u001b[39m\n                    \u001b[36m</div>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<svg\u001b[39m\n                        \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-calendar h-5 w-5 text-gray-400\"\u001b[39m\n                        \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                        \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                        \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                        \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                        \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n            ...\n\n      45 |  */\n      46 | export function expectToHaveBeenCalledWith(mockFn: MockFn, ...args: any[]): void {\n    > 47 |     expect(mockFn).toHaveBeenCalledWith(...args);\n         |                    ^\n      48 | }\n      49 |\n      50 | /**\n\n      at expectToHaveBeenCalledWith (src/tests/utils/assertions.ts:47:20)\n      at src/modules/conges/components/LeaveForm.test.tsx:507:43\n      at callback (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:76)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)\n\n  ● LeaveForm › Form Submission › should handle API error from /api/conges/batch on submit\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"/api/conges/batch\", Any<Array>\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<form\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"space-y-6 max-w-2xl mx-auto\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"bg-gradient-to-r from-indigo-50 to-blue-50 p-4 rounded-lg shadow-sm mb-6\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<h3\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"text-lg font-medium text-gray-800 mb-2\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[0mNouvelle demande de congé\u001b[0m\n              \u001b[36m</h3>\u001b[39m\n              \u001b[36m<p\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"text-sm text-gray-600\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[0mComplétez le formulaire ci-dessous pour soumettre votre demande.\u001b[0m\n              \u001b[36m</p>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"bg-white p-6 rounded-lg shadow-md border border-gray-200\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"mb-6\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center justify-between\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<label\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700\"\u001b[39m\n                    \u001b[33mfor\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[0mType de congé\u001b[0m\n                  \u001b[36m</label>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"relative inline-block\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<span\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"text-gray-400 hover:text-gray-600 cursor-help\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<svg\u001b[39m\n                        \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-circle-help h-4 w-4\"\u001b[39m\n                        \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                        \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                        \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                        \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                        \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<circle\u001b[39m\n                          \u001b[33mcx\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                          \u001b[33mcy\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                          \u001b[33mr\u001b[39m=\u001b[32m\"10\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                        \u001b[36m<path\u001b[39m\n                          \u001b[33md\u001b[39m=\u001b[32m\"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                        \u001b[36m<path\u001b[39m\n                          \u001b[33md\u001b[39m=\u001b[32m\"M12 17h.01\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                      \u001b[36m</svg>\u001b[39m\n                    \u001b[36m</span>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"mt-1 relative\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<select\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"block w-full rounded-md border-gray-300 shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm py-2 px-3\"\u001b[39m\n                    \u001b[33mid\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                    \u001b[33mname\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                    \u001b[33mrequired\u001b[39m=\u001b[32m\"\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<option\u001b[39m\n                      \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[0m-- Sélectionner un type --\u001b[0m\n                    \u001b[36m</option>\u001b[39m\n                    \u001b[36m<option\u001b[39m\n                      \u001b[33mtitle\u001b[39m=\u001b[32m\"Congés annuels bruts\"\u001b[39m\n                      \u001b[33mvalue\u001b[39m=\u001b[32m\"ANNUAL\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[0mCongé annuel\u001b[0m\n                    \u001b[36m</option>\u001b[39m\n                    \u001b[36m<option\u001b[39m\n                      \u001b[33mtitle\u001b[39m=\u001b[32m\"RTT bruts\"\u001b[39m\n                      \u001b[33mvalue\u001b[39m=\u001b[32m\"RTT\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[0mRTT API (Raw)\u001b[0m\n                    \u001b[36m</option>\u001b[39m\n                    \u001b[36m<option\u001b[39m\n                      \u001b[33mtitle\u001b[39m=\u001b[32m\"Congé maladie brut\"\u001b[39m\n                      \u001b[33mvalue\u001b[39m=\u001b[32m\"SICK\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[0mMaladie\u001b[0m\n                    \u001b[36m</option>\u001b[39m\n                  \u001b[36m</select>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"grid grid-cols-1 gap-6 md:grid-cols-2 mb-6\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<label\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700 mb-1\"\u001b[39m\n                    \u001b[33mfor\u001b[39m=\u001b[32m\"startDate\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[0mDate de début\u001b[0m\n                  \u001b[36m</label>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker-wrapper\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<div\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker__input-container\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<input\u001b[39m\n                          \u001b[33mautocomplete\u001b[39m=\u001b[32m\"off\"\u001b[39m\n                          \u001b[33mclass\u001b[39m=\u001b[32m\"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 pl-10 pr-4 py-2 disabled:bg-gray-100 disabled:cursor-not-allowed\"\u001b[39m\n                          \u001b[33mid\u001b[39m=\u001b[32m\"startDate\"\u001b[39m\n                          \u001b[33mplaceholder\u001b[39m=\u001b[32m\"Sélectionner une date\"\u001b[39m\n                          \u001b[33mtype\u001b[39m=\u001b[32m\"text\"\u001b[39m\n                          \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                      \u001b[36m</div>\u001b[39m\n                    \u001b[36m</div>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<svg\u001b[39m\n                        \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-calendar h-5 w-5 text-gray-400\"\u001b[39m\n                        \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                        \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                        \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                        \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                        \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n            ...\n\n      45 |  */\n      46 | export function expectToHaveBeenCalledWith(mockFn: MockFn, ...args: any[]): void {\n    > 47 |     expect(mockFn).toHaveBeenCalledWith(...args);\n         |                    ^\n      48 | }\n      49 |\n      50 | /**\n\n      at expectToHaveBeenCalledWith (src/tests/utils/assertions.ts:47:20)\n      at src/modules/conges/components/LeaveForm.test.tsx:572:43\n      at callback (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:76)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)\n\n  ● LeaveForm › Form Submission › should handle general network error on submit\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"/api/conges/batch\", Any<Array>\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<form\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"space-y-6 max-w-2xl mx-auto\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"bg-gradient-to-r from-indigo-50 to-blue-50 p-4 rounded-lg shadow-sm mb-6\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<h3\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"text-lg font-medium text-gray-800 mb-2\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[0mNouvelle demande de congé\u001b[0m\n              \u001b[36m</h3>\u001b[39m\n              \u001b[36m<p\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"text-sm text-gray-600\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[0mComplétez le formulaire ci-dessous pour soumettre votre demande.\u001b[0m\n              \u001b[36m</p>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"bg-white p-6 rounded-lg shadow-md border border-gray-200\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"mb-6\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center justify-between\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<label\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700\"\u001b[39m\n                    \u001b[33mfor\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[0mType de congé\u001b[0m\n                  \u001b[36m</label>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"relative inline-block\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<span\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"text-gray-400 hover:text-gray-600 cursor-help\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<svg\u001b[39m\n                        \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-circle-help h-4 w-4\"\u001b[39m\n                        \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                        \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                        \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                        \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                        \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<circle\u001b[39m\n                          \u001b[33mcx\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                          \u001b[33mcy\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                          \u001b[33mr\u001b[39m=\u001b[32m\"10\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                        \u001b[36m<path\u001b[39m\n                          \u001b[33md\u001b[39m=\u001b[32m\"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                        \u001b[36m<path\u001b[39m\n                          \u001b[33md\u001b[39m=\u001b[32m\"M12 17h.01\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                      \u001b[36m</svg>\u001b[39m\n                    \u001b[36m</span>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"mt-1 relative\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<select\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"block w-full rounded-md border-gray-300 shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm py-2 px-3\"\u001b[39m\n                    \u001b[33mid\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                    \u001b[33mname\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                    \u001b[33mrequired\u001b[39m=\u001b[32m\"\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<option\u001b[39m\n                      \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[0m-- Sélectionner un type --\u001b[0m\n                    \u001b[36m</option>\u001b[39m\n                    \u001b[36m<option\u001b[39m\n                      \u001b[33mtitle\u001b[39m=\u001b[32m\"Congés annuels bruts\"\u001b[39m\n                      \u001b[33mvalue\u001b[39m=\u001b[32m\"ANNUAL\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[0mCongé annuel\u001b[0m\n                    \u001b[36m</option>\u001b[39m\n                    \u001b[36m<option\u001b[39m\n                      \u001b[33mtitle\u001b[39m=\u001b[32m\"RTT bruts\"\u001b[39m\n                      \u001b[33mvalue\u001b[39m=\u001b[32m\"RTT\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[0mRTT API (Raw)\u001b[0m\n                    \u001b[36m</option>\u001b[39m\n                    \u001b[36m<option\u001b[39m\n                      \u001b[33mtitle\u001b[39m=\u001b[32m\"Congé maladie brut\"\u001b[39m\n                      \u001b[33mvalue\u001b[39m=\u001b[32m\"SICK\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[0mMaladie\u001b[0m\n                    \u001b[36m</option>\u001b[39m\n                  \u001b[36m</select>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"grid grid-cols-1 gap-6 md:grid-cols-2 mb-6\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<label\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700 mb-1\"\u001b[39m\n                    \u001b[33mfor\u001b[39m=\u001b[32m\"startDate\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[0mDate de début\u001b[0m\n                  \u001b[36m</label>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker-wrapper\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<div\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker__input-container\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<input\u001b[39m\n                          \u001b[33mautocomplete\u001b[39m=\u001b[32m\"off\"\u001b[39m\n                          \u001b[33mclass\u001b[39m=\u001b[32m\"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 pl-10 pr-4 py-2 disabled:bg-gray-100 disabled:cursor-not-allowed\"\u001b[39m\n                          \u001b[33mid\u001b[39m=\u001b[32m\"startDate\"\u001b[39m\n                          \u001b[33mplaceholder\u001b[39m=\u001b[32m\"Sélectionner une date\"\u001b[39m\n                          \u001b[33mtype\u001b[39m=\u001b[32m\"text\"\u001b[39m\n                          \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                      \u001b[36m</div>\u001b[39m\n                    \u001b[36m</div>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<svg\u001b[39m\n                        \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-calendar h-5 w-5 text-gray-400\"\u001b[39m\n                        \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                        \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                        \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                        \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                        \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n            ...\n\n      45 |  */\n      46 | export function expectToHaveBeenCalledWith(mockFn: MockFn, ...args: any[]): void {\n    > 47 |     expect(mockFn).toHaveBeenCalledWith(...args);\n         |                    ^\n      48 | }\n      49 |\n      50 | /**\n\n      at expectToHaveBeenCalledWith (src/tests/utils/assertions.ts:47:20)\n      at src/modules/conges/components/LeaveForm.test.tsx:611:43\n      at callback (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:76)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)\n\n  ● LeaveForm › Form Submission › should not submit if calculation is not successful\n\n    Unable to find an element with the text: /Calcul des jours en cours.../i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div>\u001b[39m\n        \u001b[36m<form\u001b[39m\n          \u001b[33mclass\u001b[39m=\u001b[32m\"space-y-6 max-w-2xl mx-auto\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"bg-gradient-to-r from-indigo-50 to-blue-50 p-4 rounded-lg shadow-sm mb-6\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<h3\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"text-lg font-medium text-gray-800 mb-2\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mNouvelle demande de congé\u001b[0m\n            \u001b[36m</h3>\u001b[39m\n            \u001b[36m<p\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"text-sm text-gray-600\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mComplétez le formulaire ci-dessous pour soumettre votre demande.\u001b[0m\n            \u001b[36m</p>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"bg-white p-6 rounded-lg shadow-md border border-gray-200\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"mb-6\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center justify-between\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<label\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700\"\u001b[39m\n                  \u001b[33mfor\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mType de congé\u001b[0m\n                \u001b[36m</label>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"relative inline-block\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<span\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"text-gray-400 hover:text-gray-600 cursor-help\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-circle-help h-4 w-4\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<circle\u001b[39m\n                        \u001b[33mcx\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                        \u001b[33mcy\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                        \u001b[33mr\u001b[39m=\u001b[32m\"10\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M12 17h.01\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                  \u001b[36m</span>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"mt-1 relative\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<select\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"block w-full rounded-md border-gray-300 shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm py-2 px-3\"\u001b[39m\n                  \u001b[33mid\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                  \u001b[33mname\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                  \u001b[33mrequired\u001b[39m=\u001b[32m\"\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<option\u001b[39m\n                    \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[0m-- Sélectionner un type --\u001b[0m\n                  \u001b[36m</option>\u001b[39m\n                  \u001b[36m<option\u001b[39m\n                    \u001b[33mtitle\u001b[39m=\u001b[32m\"Congés annuels bruts\"\u001b[39m\n                    \u001b[33mvalue\u001b[39m=\u001b[32m\"ANNUAL\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[0mCongé annuel\u001b[0m\n                  \u001b[36m</option>\u001b[39m\n                  \u001b[36m<option\u001b[39m\n                    \u001b[33mtitle\u001b[39m=\u001b[32m\"RTT bruts\"\u001b[39m\n                    \u001b[33mvalue\u001b[39m=\u001b[32m\"RTT\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[0mRTT API (Raw)\u001b[0m\n                  \u001b[36m</option>\u001b[39m\n                  \u001b[36m<option\u001b[39m\n                    \u001b[33mtitle\u001b[39m=\u001b[32m\"Congé maladie brut\"\u001b[39m\n                    \u001b[33mvalue\u001b[39m=\u001b[32m\"SICK\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[0mMaladie\u001b[0m\n                  \u001b[36m</option>\u001b[39m\n                \u001b[36m</select>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"grid grid-cols-1 gap-6 md:grid-cols-2 mb-6\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<label\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700 mb-1\"\u001b[39m\n                  \u001b[33mfor\u001b[39m=\u001b[32m\"startDate\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mDate de début\u001b[0m\n                \u001b[36m</label>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker-wrapper\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker__input-container\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<input\u001b[39m\n                        \u001b[33mautocomplete\u001b[39m=\u001b[32m\"off\"\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 pl-10 pr-4 py-2 disabled:bg-gray-100 disabled:cursor-not-allowed react-datepicker-ignore-onclickoutside\"\u001b[39m\n                        \u001b[33mid\u001b[39m=\u001b[32m\"startDate\"\u001b[39m\n                        \u001b[33mplaceholder\u001b[39m=\u001b[32m\"Sélectionner une date\"\u001b[39m\n                        \u001b[33mtype\u001b[39m=\u001b[32m\"text\"\u001b[39m\n                        \u001b[33mvalue\u001b[39m=\u001b[32m\"02/09/2024\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</div>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker__tab-loop\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker__tab-loop__start\"\u001b[39m\n                      \u001b[33mtabindex\u001b[39m=\u001b[32m\"0\"\u001b[39m\n                    \u001b[36m/>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker-popper z-50\"\u001b[39m\n                      \u001b[33mdata-placement\u001b[39m=\u001b[32m\"bottom\"\u001b[39m\n                      \u001b[33mstyle\u001b[39m=\u001b[32m\"position: absolute; left: 0px; top: 0px; transform: translate(0px, 10px);\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<div\u001b[39m\n                        \u001b[33mstyle\u001b[39m=\u001b[32m\"display: contents;\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<div\u001b[39m\n                          \u001b[33mstyle\u001b[39m=\u001b[32m\"display: contents;\"\u001b[39m\n                        \u001b[36m>\u001b[39m\n                          \u001b[36m<div\u001b[39m\n                            \u001b[33maria-label\u001b[39m=\u001b[32m\"Choose Date\"\u001b[39m\n                            \u001b[33maria-modal\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                            \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker shadow-lg rounded-md border bo...\n\n      653 |             await fillDatesInForm(user, '02/09/2024', '03/09/2024');\n      654 |             // Le hook est mocké pour retourner 'loading' avec ces dates.\n    > 655 |             await screen.findByText(/Calcul des jours en cours.../i, {}, { timeout: 3000 });\n          |                          ^\n      656 |\n      657 |             const submitButton = screen.getByText('Soumettre la demande');\n      658 |             await user.click(submitButton);\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at node_modules/@testing-library/dom/dist/query-helpers.js:86:32\n      at Object.<anonymous> (src/modules/conges/components/LeaveForm.test.tsx:655:26)\n\n\nTest Suites: 17 failed, 3 skipped, 16 passed, 33 of 36 total\nTests:       67 failed, 14 skipped, 376 passed, 457 total\nSnapshots:   0 total\nTime:        21.595 s\nRan all test suites matching /src\\/modules\\/conges|src\\/lib\\/auth/i.\n"
    }
  },
  "recommendations": [],
  "timestamp": "2025-05-26T14:55:07.007Z",
  "summary": {
    "bundleSize": 4364870977,
    "largeFilesCount": 42,
    "performanceIssues": 3,
    "recommendations": [
      "Bundle total trop volumineux. Considérer le code splitting.",
      "42 fichiers volumineux détectés. Optimiser ou diviser."
    ]
  }
}
{
  "bundles": {
    "pages": {
      "/_app": [
        "static/chunks/runtime-f73c2a846e32eb9c.js",
        "static/chunks/common-4ebc264d0fabf809.js",
        "static/css/65ea97200e769b40.css",
        "static/chunks/vendors-81b845e8ed625280.js",
        "static/chunks/main-d06352d7df19d5de.js",
        "static/chunks/pages/_app-a5558e6cd9d0f760.js"
      ],
      "/_error": [
        "static/chunks/runtime-f73c2a846e32eb9c.js",
        "static/chunks/common-4ebc264d0fabf809.js",
        "static/css/65ea97200e769b40.css",
        "static/chunks/vendors-81b845e8ed625280.js",
        "static/chunks/main-d06352d7df19d5de.js",
        "static/chunks/pages/_error-bdd02458553997b5.js"
      ],
      "/absences": [
        "static/chunks/runtime-f73c2a846e32eb9c.js",
        "static/chunks/common-4ebc264d0fabf809.js",
        "static/css/65ea97200e769b40.css",
        "static/chunks/vendors-81b845e8ed625280.js",
        "static/chunks/main-d06352d7df19d5de.js",
        "static/chunks/pages/absences-f31bab891ae705cf.js"
      ],
      "/administration/regles": [
        "static/chunks/runtime-f73c2a846e32eb9c.js",
        "static/chunks/common-4ebc264d0fabf809.js",
        "static/css/65ea97200e769b40.css",
        "static/chunks/vendors-81b845e8ed625280.js",
        "static/chunks/main-d06352d7df19d5de.js",
        "static/chunks/pages/administration/regles-0b68701181e40bf1.js"
      ],
      "/administration/statistiques": [
        "static/chunks/runtime-f73c2a846e32eb9c.js",
        "static/chunks/common-4ebc264d0fabf809.js",
        "static/css/65ea97200e769b40.css",
        "static/chunks/vendors-81b845e8ed625280.js",
        "static/chunks/main-d06352d7df19d5de.js",
        "static/chunks/pages/administration/statistiques-f3c46e50884cfdbf.js"
      ],
      "/calendar/page": [
        "static/chunks/runtime-f73c2a846e32eb9c.js",
        "static/chunks/common-4ebc264d0fabf809.js",
        "static/css/65ea97200e769b40.css",
        "static/chunks/vendors-81b845e8ed625280.js",
        "static/chunks/main-d06352d7df19d5de.js",
        "static/chunks/pages/calendar/page-409feb46bcfa26f4.js"
      ],
      "/docs": [
        "static/chunks/runtime-f73c2a846e32eb9c.js",
        "static/chunks/common-4ebc264d0fabf809.js",
        "static/css/65ea97200e769b40.css",
        "static/chunks/vendors-81b845e8ed625280.js",
        "static/chunks/main-d06352d7df19d5de.js",
        "static/chunks/pages/docs-e37142dfca67c1d4.js"
      ],
      "/planning/simulateur": [
        "static/chunks/runtime-f73c2a846e32eb9c.js",
        "static/chunks/common-4ebc264d0fabf809.js",
        "static/css/65ea97200e769b40.css",
        "static/chunks/vendors-81b845e8ed625280.js",
        "static/chunks/main-d06352d7df19d5de.js",
        "static/chunks/pages/planning/simulateur-94f3cadfead2c3d9.js"
      ]
    },
    "sortedPages": [],
    "analysis": {
      "totalSize": 4031551864,
      "largeFiles": [
        {
          "file": "static/chunks/common-4ebc264d0fabf809.js",
          "size": 3614507,
          "sizeFormatted": "3.45 MB"
        },
        {
          "file": "static/chunks/vendors-81b845e8ed625280.js",
          "size": 7617723,
          "sizeFormatted": "7.26 MB"
        },
        {
          "file": "server/chunks/1600.js",
          "size": 1598971,
          "sizeFormatted": "1.52 MB"
        },
        {
          "file": "server/chunks/9328.js",
          "size": 845438,
          "sizeFormatted": "825.62 KB"
        },
        {
          "file": "server/app/leaves/quotas/page.js",
          "size": 606142,
          "sizeFormatted": "591.94 KB"
        },
        {
          "file": "server/app/api/simulations/run/route.js",
          "size": 547892,
          "sizeFormatted": "535.05 KB"
        },
        {
          "file": "server/app/api/leaves/quotas/transfers/export/route.js",
          "size": 1382769,
          "sizeFormatted": "1.32 MB"
        },
        {
          "file": "server/app/api/calendar/export/route.js",
          "size": 755460,
          "sizeFormatted": "737.75 KB"
        },
        {
          "file": "server/app/admin/simulations/[scenarioId]/results/[resultId]/page.js",
          "size": 783022,
          "sizeFormatted": "764.67 KB"
        }
      ],
      "recommendations": [
        "Bundle total trop volumineux. Considérer le code splitting.",
        "9 fichiers volumineux détectés. Optimiser ou diviser."
      ]
    },
    "staticFiles": {
      "totalSize": 13277581,
      "fileTypes": {
        ".woff2": {
          "count": 7,
          "totalSize": 208172
        },
        ".css": {
          "count": 4,
          "totalSize": 179849
        },
        ".js": {
          "count": 263,
          "totalSize": 12889560
        }
      },
      "largeFiles": [
        {
          "file": "css/4294c7fb29304fb4.css",
          "size": 129340,
          "sizeFormatted": "126.31 KB"
        },
        {
          "file": "chunks/common-4ebc264d0fabf809.js",
          "size": 3614507,
          "sizeFormatted": "3.45 MB"
        },
        {
          "file": "chunks/leaves-77725b38b49e3225.js",
          "size": 131666,
          "sizeFormatted": "128.58 KB"
        },
        {
          "file": "chunks/polyfills-42372ed130431b0a.js",
          "size": 112594,
          "sizeFormatted": "109.96 KB"
        },
        {
          "file": "chunks/vendors-81b845e8ed625280.js",
          "size": 7617723,
          "sizeFormatted": "7.26 MB"
        }
      ]
    }
  },
  "performance": {
    "Build Time": {
      "duration": 28251,
      "status": "error",
      "error": "Command failed: npm run build\n ⚠ Invalid next.config.js options detected: \n ⚠     Unrecognized key(s) in object: 'serverComponentsExternalPackages' at \"experimental\"\n ⚠ See more info here: https://nextjs.org/docs/messages/invalid-next-config\n ⚠ `experimental.serverComponentsExternalPackages` has been moved to `serverExternalPackages`. Please update your next.config.js file accordingly.\n ⚠ Compiled with warnings in 18.0s\n\n./node_modules/@mapbox/node-pre-gyp/lib/util/compile.js\nModule not found: Can't resolve 'node-gyp' in '/Users/vincentperreard/Mathildanesth/node_modules/@mapbox/node-pre-gyp/lib/util'\n\nImport trace for requested module:\n./node_modules/@mapbox/node-pre-gyp/lib/util/compile.js\n./node_modules/@mapbox/node-pre-gyp/lib/ sync ^\\.\\/.*$\n./node_modules/@mapbox/node-pre-gyp/lib/node-pre-gyp.js\n./node_modules/bcrypt/bcrypt.js\n./src/lib/auth.ts\n./src/lib/middleware/withAuth.ts\n\n./node_modules/@mapbox/node-pre-gyp/lib/util/compile.js\nModule not found: Can't resolve 'npm' in '/Users/vincentperreard/Mathildanesth/node_modules/@mapbox/node-pre-gyp/lib/util'\n\nImport trace for requested module:\n./node_modules/@mapbox/node-pre-gyp/lib/util/compile.js\n./node_modules/@mapbox/node-pre-gyp/lib/ sync ^\\.\\/.*$\n./node_modules/@mapbox/node-pre-gyp/lib/node-pre-gyp.js\n./node_modules/bcrypt/bcrypt.js\n./src/lib/auth.ts\n./src/lib/middleware/withAuth.ts\n\n./node_modules/bcrypt/bcrypt.js\nCritical dependency: the request of a dependency is an expression\n\nImport trace for requested module:\n./node_modules/bcrypt/bcrypt.js\n./src/lib/auth.ts\n./src/lib/middleware/withAuth.ts\n\n./src/app/admin/bloc-operatoire/components/ReglesSupervisionAdmin.tsx\nAttempted import error: 'TableCaption' is not exported from '@/components/ui/table' (imported as 'TableCaption').\n\nImport trace for requested module:\n./src/app/admin/bloc-operatoire/components/ReglesSupervisionAdmin.tsx\n./src/app/bloc-operatoire/regles-supervision/page.tsx\n\n./src/app/admin/bloc-operatoire/components/ReglesSupervisionAdmin.tsx\nAttempted import error: 'Input' is not exported from '@/components/ui/input' (imported as 'Input').\n\nImport trace for requested module:\n./src/app/admin/bloc-operatoire/components/ReglesSupervisionAdmin.tsx\n./src/app/bloc-operatoire/regles-supervision/page.tsx\n\n./src/app/admin/bloc-operatoire/components/ReglesSupervisionAdmin.tsx\nAttempted import error: 'Input' is not exported from '@/components/ui/input' (imported as 'Input').\n\nImport trace for requested module:\n./src/app/admin/bloc-operatoire/components/ReglesSupervisionAdmin.tsx\n./src/app/bloc-operatoire/regles-supervision/page.tsx\n\n./src/app/admin/bloc-operatoire/components/ReglesSupervisionAdmin.tsx\nAttempted import error: 'Input' is not exported from '@/components/ui/input' (imported as 'Input').\n\nImport trace for requested module:\n./src/app/admin/bloc-operatoire/components/ReglesSupervisionAdmin.tsx\n./src/app/bloc-operatoire/regles-supervision/page.tsx\n\n./src/app/admin/bloc-operatoire/components/ReglesSupervisionAdmin.tsx\nAttempted import error: 'Textarea' is not exported from '@/components/ui/textarea' (imported as 'Textarea').\n\nImport trace for requested module:\n./src/app/admin/bloc-operatoire/components/ReglesSupervisionAdmin.tsx\n./src/app/bloc-operatoire/regles-supervision/page.tsx\n\n./src/app/admin/bloc-operatoire/components/ReglesSupervisionAdmin.tsx\nAttempted import error: 'Input' is not exported from '@/components/ui/input' (imported as 'Input').\n\nImport trace for requested module:\n./src/app/admin/bloc-operatoire/components/ReglesSupervisionAdmin.tsx\n./src/app/bloc-operatoire/regles-supervision/page.tsx\n\n./src/app/admin/bloc-operatoire/components/ReglesSupervisionAdmin.tsx\nAttempted import error: 'Input' is not exported from '@/components/ui/input' (imported as 'Input').\n\nImport trace for requested module:\n./src/app/admin/bloc-operatoire/components/ReglesSupervisionAdmin.tsx\n./src/app/bloc-operatoire/regles-supervision/page.tsx\n\n./src/app/admin/bloc-operatoire/components/ReglesSupervisionAdmin.tsx\nAttempted import error: 'Input' is not exported from '@/components/ui/input' (imported as 'Input').\n\nImport trace for requested module:\n./src/app/admin/bloc-operatoire/components/ReglesSupervisionAdmin.tsx\n./src/app/bloc-operatoire/regles-supervision/page.tsx\n\n./src/app/admin/holidays/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/holidays/page.tsx\n\n./src/app/admin/holidays/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/holidays/page.tsx\n\n./src/app/admin/holidays/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/holidays/page.tsx\n\n./src/app/admin/holidays/page.tsx\nAttempted import error: 'Input' is not exported from '@/components/ui/input' (imported as 'Input').\n\nImport trace for requested module:\n./src/app/admin/holidays/page.tsx\n\n./src/app/admin/holidays/page.tsx\nAttempted import error: 'Input' is not exported from '@/components/ui/input' (imported as 'Input').\n\nImport trace for requested module:\n./src/app/admin/holidays/page.tsx\n\n./src/app/admin/holidays/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/holidays/page.tsx\n\n./src/app/admin/holidays/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/holidays/page.tsx\n\n./src/app/admin/holidays/page.tsx\nAttempted import error: 'DatePicker' is not exported from '@/components/ui/date-picker' (imported as 'DatePicker').\n\nImport trace for requested module:\n./src/app/admin/holidays/page.tsx\n\n./src/app/admin/holidays/page.tsx\nAttempted import error: 'Input' is not exported from '@/components/ui/input' (imported as 'Input').\n\nImport trace for requested module:\n./src/app/admin/holidays/page.tsx\n\n./src/app/admin/holidays/page.tsx\nAttempted import error: 'Input' is not exported from '@/components/ui/input' (imported as 'Input').\n\nImport trace for requested module:\n./src/app/admin/holidays/page.tsx\n\n./src/app/admin/holidays/page.tsx\nAttempted import error: 'Input' is not exported from '@/components/ui/input' (imported as 'Input').\n\nImport trace for requested module:\n./src/app/admin/holidays/page.tsx\n\n./src/app/admin/holidays/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/holidays/page.tsx\n\n./src/app/admin/holidays/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/holidays/page.tsx\n\n./src/app/admin/schedule-rules/edit/[id]/page.tsx\nAttempted import error: 'RuleForm' is not exported from '@/modules/dynamicRules/components/RuleForm' (imported as 'RuleForm').\n\nImport trace for requested module:\n./src/app/admin/schedule-rules/edit/[id]/page.tsx\n\n./src/app/admin/schedule-rules/new/page.tsx\nAttempted import error: 'RuleForm' is not exported from '@/modules/dynamicRules/components/RuleForm' (imported as 'RuleForm').\n\nImport trace for requested module:\n./src/app/admin/schedule-rules/new/page.tsx\n\n./src/app/admin/schedule-rules/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/schedule-rules/page.tsx\n\n./src/app/admin/schedule-rules/page.tsx\nAttempted import error: 'RulesList' is not exported from '@/modules/dynamicRules/components/RulesList' (imported as 'RulesList').\n\nImport trace for requested module:\n./src/app/admin/schedule-rules/page.tsx\n\n./src/app/admin/schedule-rules/page.tsx\nAttempted import error: 'RulesList' is not exported from '@/modules/dynamicRules/components/RulesList' (imported as 'RulesList').\n\nImport trace for requested module:\n./src/app/admin/schedule-rules/page.tsx\n\n./src/app/admin/schedule-rules/page.tsx\nAttempted import error: 'RulesList' is not exported from '@/modules/dynamicRules/components/RulesList' (imported as 'RulesList').\n\nImport trace for requested module:\n./src/app/admin/schedule-rules/page.tsx\n\n./src/app/admin/simulations/[scenarioId]/filters/AdvancedFilters.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/[scenarioId]/filters/AdvancedFilters.tsx\n./src/app/admin/simulations/[scenarioId]/page.tsx\n\n./src/app/admin/simulations/[scenarioId]/filters/AdvancedFilters.tsx\nAttempted import error: 'Input' is not exported from '@/components/ui/input' (imported as 'Input').\n\nImport trace for requested module:\n./src/app/admin/simulations/[scenarioId]/filters/AdvancedFilters.tsx\n./src/app/admin/simulations/[scenarioId]/page.tsx\n\n./src/app/admin/simulations/[scenarioId]/filters/AdvancedFilters.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/[scenarioId]/filters/AdvancedFilters.tsx\n./src/app/admin/simulations/[scenarioId]/page.tsx\n\n./src/app/admin/simulations/[scenarioId]/filters/AdvancedFilters.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/[scenarioId]/filters/AdvancedFilters.tsx\n./src/app/admin/simulations/[scenarioId]/page.tsx\n\n./src/app/admin/simulations/[scenarioId]/filters/AdvancedFilters.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/[scenarioId]/filters/AdvancedFilters.tsx\n./src/app/admin/simulations/[scenarioId]/page.tsx\n\n./src/app/admin/simulations/[scenarioId]/filters/AdvancedFilters.tsx\nAttempted import error: 'Input' is not exported from '@/components/ui/input' (imported as 'Input').\n\nImport trace for requested module:\n./src/app/admin/simulations/[scenarioId]/filters/AdvancedFilters.tsx\n./src/app/admin/simulations/[scenarioId]/page.tsx\n\n./src/app/admin/simulations/[scenarioId]/filters/AdvancedFilters.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/[scenarioId]/filters/AdvancedFilters.tsx\n./src/app/admin/simulations/[scenarioId]/page.tsx\n\n./src/app/admin/simulations/[scenarioId]/filters/AdvancedFilters.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/[scenarioId]/filters/AdvancedFilters.tsx\n./src/app/admin/simulations/[scenarioId]/page.tsx\n\n./src/app/admin/simulations/[scenarioId]/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/[scenarioId]/page.tsx\n\n./src/app/admin/simulations/[scenarioId]/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/[scenarioId]/page.tsx\n\n./src/app/admin/simulations/[scenarioId]/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/[scenarioId]/page.tsx\n\n./src/app/admin/simulations/[scenarioId]/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/[scenarioId]/page.tsx\n\n./src/app/admin/simulations/[scenarioId]/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/[scenarioId]/page.tsx\n\n./src/app/admin/simulations/[scenarioId]/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/[scenarioId]/page.tsx\n\n./src/app/admin/simulations/[scenarioId]/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/[scenarioId]/page.tsx\n\n./src/app/admin/simulations/[scenarioId]/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/[scenarioId]/page.tsx\n\n./src/app/admin/simulations/[scenarioId]/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/[scenarioId]/page.tsx\n\n./src/app/admin/simulations/[scenarioId]/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/[scenarioId]/page.tsx\n\n./src/app/admin/simulations/[scenarioId]/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/[scenarioId]/page.tsx\n\n./src/app/admin/simulations/new/page.tsx\nAttempted import error: 'Input' is not exported from '@/components/ui/input' (imported as 'Input').\n\nImport trace for requested module:\n./src/app/admin/simulations/new/page.tsx\n\n./src/app/admin/simulations/new/page.tsx\nAttempted import error: 'Textarea' is not exported from '@/components/ui/textarea' (imported as 'Textarea').\n\nImport trace for requested module:\n./src/app/admin/simulations/new/page.tsx\n\n./src/app/admin/simulations/new/page.tsx\nAttempted import error: 'DatePicker' is not exported from '@/components/ui/date-picker' (imported as 'DatePicker').\n\nImport trace for requested module:\n./src/app/admin/simulations/new/page.tsx\n\n./src/app/admin/simulations/new/page.tsx\nAttempted import error: 'DatePicker' is not exported from '@/components/ui/date-picker' (imported as 'DatePicker').\n\nImport trace for requested module:\n./src/app/admin/simulations/new/page.tsx\n\n./src/app/admin/simulations/new/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/new/page.tsx\n\n./src/app/admin/simulations/new/page.tsx\nAttempted import error: 'Input' is not exported from '@/components/ui/input' (imported as 'Input').\n\nImport trace for requested module:\n./src/app/admin/simulations/new/page.tsx\n\n./src/app/admin/simulations/new/page.tsx\nAttempted import error: 'Input' is not exported from '@/components/ui/input' (imported as 'Input').\n\nImport trace for requested module:\n./src/app/admin/simulations/new/page.tsx\n\n./src/app/admin/simulations/new/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/new/page.tsx\n\n./src/app/admin/simulations/new/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/new/page.tsx\n\n./src/app/admin/simulations/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/page.tsx\n\n./src/app/admin/simulations/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/page.tsx\n\n./src/app/admin/simulations/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/page.tsx\n\n./src/app/admin/simulations/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/page.tsx\n\n./src/app/admin/simulations/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/page.tsx\n\n./src/app/admin/simulations/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/page.tsx\n\n./src/app/admin/simulations/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/page.tsx\n\n./src/app/admin/simulations/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/page.tsx\n\n./src/app/admin/simulations/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/page.tsx\n\n./src/app/admin/simulations/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/page.tsx\n\n./src/app/admin/simulations/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/page.tsx\n\n./src/app/admin/simulations/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/page.tsx\n\n./src/app/admin/simulations/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/page.tsx\n\n./src/app/admin/simulations/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/page.tsx\n\n./src/app/admin/simulations/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/page.tsx\n\n./src/app/admin/simulations/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/page.tsx\n\n./src/app/admin/simulations/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/page.tsx\n\n./src/app/admin/simulations/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/page.tsx\n\n./src/app/admin/simulations/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/page.tsx\n\n./src/app/admin/simulations/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/page.tsx\n\n./src/app/admin/simulations/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/page.tsx\n\n./src/app/admin/simulations/page.tsx\nAttempted import error: 'Input' is not exported from '@/components/ui/input' (imported as 'Input').\n\nImport trace for requested module:\n./src/app/admin/simulations/page.tsx\n\n./src/app/admin/simulations/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/page.tsx\n\n./src/app/admin/simulations/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/page.tsx\n\n./src/app/admin/simulations/performance-demo.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/performance-demo.tsx\n\n./src/app/admin/simulations/performance-demo.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/performance-demo.tsx\n\n./src/app/admin/simulations/performance-demo.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/performance-demo.tsx\n\n./src/app/admin/simulations/visualizations/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/visualizations/page.tsx\n\n./src/app/admin/skills/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/skills/page.tsx\n\n./src/app/admin/skills/page.tsx\nAttempted import error: 'Input' is not exported from '@/components/ui/input' (imported as 'Input').\n\nImport trace for requested module:\n./src/app/admin/skills/page.tsx\n\n./src/app/admin/skills/page.tsx\nAttempted import error: 'Textarea' is not exported from '@/components/ui/textarea' (imported as 'Textarea').\n\nImport trace for requested module:\n./src/app/admin/skills/page.tsx\n\n./src/app/admin/skills/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/skills/page.tsx\n\n./src/app/admin/skills/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/skills/page.tsx\n\n./src/app/admin/skills/page.tsx\nAttempted import error: 'Input' is not exported from '@/components/ui/input' (imported as 'Input').\n\nImport trace for requested module:\n./src/app/admin/skills/page.tsx\n\n./src/app/admin/skills/page.tsx\nAttempted import error: 'Textarea' is not exported from '@/components/ui/textarea' (imported as 'Textarea').\n\nImport trace for requested module:\n./src/app/admin/skills/page.tsx\n\n./src/app/admin/skills/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/skills/page.tsx\n\n./src/app/admin/skills/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/skills/page.tsx\n\n./src/app/admin/skills/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/skills/page.tsx\n\n./src/app/admin/skills/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/skills/page.tsx\n\n./src/app/admin/skills/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/skills/page.tsx\n\n./src/app/admin/skills/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/skills/page.tsx\n\n./src/app/admin/team-configurations/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/team-configurations/page.tsx\n\n./src/app/bloc-operatoire/components/BlocPlanning.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/bloc-operatoire/components/BlocPlanning.tsx\n./src/app/bloc-operatoire/page.tsx\n\n./src/app/bloc-operatoire/components/BlocPlanning.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/bloc-operatoire/components/BlocPlanning.tsx\n./src/app/bloc-operatoire/page.tsx\n\n./src/app/bloc-operatoire/components/BlocPlanning.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/bloc-operatoire/components/BlocPlanning.tsx\n./src/app/bloc-operatoire/page.tsx\n\n./src/app/bloc-operatoire/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/bloc-operatoire/page.tsx\n\n./src/app/bloc-operatoire/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/bloc-operatoire/page.tsx\n\n./src/app/bloc-operatoire/planning/page.tsx\nAttempted import error: 'DatePicker' is not exported from '@/components/ui/date-picker' (imported as 'DatePicker').\n\nImport trace for requested module:\n./src/app/bloc-operatoire/planning/page.tsx\n\n./src/app/leaves/quotas/advanced/page.tsx\nAttempted import error: 'QuotaAdvancedManagement' is not exported from '@/modules/leaves/components/QuotaAdvancedManagement' (imported as 'QuotaAdvancedManagement').\n\nImport trace for requested module:\n./src/app/leaves/quotas/advanced/page.tsx\n\n./src/app/parametres/chirurgiens/page.tsx\nAttempted import error: 'Role' is not exported from '@/types/user' (imported as 'Role').\n\nImport trace for requested module:\n./src/app/parametres/chirurgiens/page.tsx\n\n./src/app/parametres/chirurgiens/page.tsx\nAttempted import error: 'Role' is not exported from '@/types/user' (imported as 'Role').\n\nImport trace for requested module:\n./src/app/parametres/chirurgiens/page.tsx\n\n./src/app/parametres/hopitaux/page.tsx\nAttempted import error: '@/components/ui/switch' does not contain a default export (imported as 'Switch').\n\nImport trace for requested module:\n./src/app/parametres/hopitaux/page.tsx\n\n./src/components/dashboard/widgets/PredictiveInsightsWidget.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/components/dashboard/widgets/PredictiveInsightsWidget.tsx\n./src/app/statistiques/previsions/page.tsx\n\n./src/components/simulations/ApplySimulationModal.tsx\nAttempted import error: 'Textarea' is not exported from '@/components/ui/textarea' (imported as 'Textarea').\n\nImport trace for requested module:\n./src/components/simulations/ApplySimulationModal.tsx\n./src/app/admin/simulations/[scenarioId]/results/[resultId]/page.tsx\n\n./src/components/simulations/ApplySimulationModal.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/components/simulations/ApplySimulationModal.tsx\n./src/app/admin/simulations/[scenarioId]/results/[resultId]/page.tsx\n\n./src/components/simulations/ApplySimulationModal.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/components/simulations/ApplySimulationModal.tsx\n./src/app/admin/simulations/[scenarioId]/results/[resultId]/page.tsx\n\n./src/components/ui/data-table.tsx\nAttempted import error: 'Input' is not exported from '@/components/ui/input' (imported as 'Input').\n\nImport trace for requested module:\n./src/components/ui/data-table.tsx\n./src/app/admin/holidays/page.tsx\n\n./src/components/ui/data-table.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/components/ui/data-table.tsx\n./src/app/admin/holidays/page.tsx\n\n./src/components/ui/data-table.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/components/ui/data-table.tsx\n./src/app/admin/holidays/page.tsx\n\n./src/modules/dynamicRules/components/RulesList.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/modules/dynamicRules/components/RulesList.tsx\n./src/app/admin/schedule-rules/page.tsx\n\n./src/modules/dynamicRules/components/RulesList.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/modules/dynamicRules/components/RulesList.tsx\n./src/app/admin/schedule-rules/page.tsx\n\n./src/modules/dynamicRules/components/RulesList.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/modules/dynamicRules/components/RulesList.tsx\n./src/app/admin/schedule-rules/page.tsx\n\n./src/modules/dynamicRules/components/RulesList.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/modules/dynamicRules/components/RulesList.tsx\n./src/app/admin/schedule-rules/page.tsx\n\n./src/modules/leaves/components/reports/QuotaTransferReportPanel.tsx\nAttempted import error: 'TableCaption' is not exported from '@/components/ui/table' (imported as 'TableCaption').\n\nImport trace for requested module:\n./src/modules/leaves/components/reports/QuotaTransferReportPanel.tsx\n./src/modules/leaves/components/QuotaAdvancedManagement.tsx\n./src/app/leaves/quotas/advanced/page.tsx\n\n./src/modules/planning/bloc-operatoire/components/AddRoomModal.tsx\nAttempted import error: '@/components/ui/switch' does not contain a default export (imported as 'Switch').\n\nImport trace for requested module:\n./src/modules/planning/bloc-operatoire/components/AddRoomModal.tsx\n./src/modules/planning/bloc-operatoire/components/RoomsList.tsx\n\n./src/modules/planning/bloc-operatoire/components/OperatingRoomList.tsx\nAttempted import error: '@/components/ui/switch' does not contain a default export (imported as 'Switch').\n\nImport trace for requested module:\n./src/modules/planning/bloc-operatoire/components/OperatingRoomList.tsx\n./src/app/admin/bloc-operatoire/salles/page.tsx\n\n./src/modules/planning/bloc-operatoire/components/OperatingSectorList.tsx\nAttempted import error: '@/components/ui/switch' does not contain a default export (imported as 'Switch').\n\nImport trace for requested module:\n./src/modules/planning/bloc-operatoire/components/OperatingSectorList.tsx\n./src/app/admin/bloc-operatoire/secteurs/page.tsx\n\n./src/modules/planning/bloc-operatoire/components/SupervisionRulesList.tsx\nAttempted import error: '@/components/ui/switch' does not contain a default export (imported as 'Switch').\n\nImport trace for requested module:\n./src/modules/planning/bloc-operatoire/components/SupervisionRulesList.tsx\n\n./src/modules/planning/bloc-operatoire/components/SupervisionRulesList.tsx\nAttempted import error: '@/components/ui/switch' does not contain a default export (imported as 'Switch').\n\nImport trace for requested module:\n./src/modules/planning/bloc-operatoire/components/SupervisionRulesList.tsx\n\n./src/modules/planning/bloc-operatoire/components/SupervisionRulesList.tsx\nAttempted import error: '@/components/ui/switch' does not contain a default export (imported as 'Switch').\n\nImport trace for requested module:\n./src/modules/planning/bloc-operatoire/components/SupervisionRulesList.tsx\n\n./src/modules/planning/bloc-operatoire/hooks/useOperatingResourceQueries.ts\nAttempted import error: 'operatingSectorService' is not exported from '../services/OperatingSectorService' (imported as 'operatingSectorService').\n\nImport trace for requested module:\n./src/modules/planning/bloc-operatoire/hooks/useOperatingResourceQueries.ts\n./src/modules/planning/bloc-operatoire/components/SupervisionRulesList.tsx\n\n./src/modules/planning/bloc-operatoire/hooks/useOperatingResourceQueries.ts\nAttempted import error: 'operatingSectorService' is not exported from '../services/OperatingSectorService' (imported as 'operatingSectorService').\n\nImport trace for requested module:\n./src/modules/planning/bloc-operatoire/hooks/useOperatingResourceQueries.ts\n./src/modules/planning/bloc-operatoire/components/SupervisionRulesList.tsx\n\n./src/modules/planning/bloc-operatoire/hooks/useOperatingResourceQueries.ts\nAttempted import error: 'operatingSectorService' is not exported from '../services/OperatingSectorService' (imported as 'operatingSectorService').\n\nImport trace for requested module:\n./src/modules/planning/bloc-operatoire/hooks/useOperatingResourceQueries.ts\n./src/modules/planning/bloc-operatoire/components/SupervisionRulesList.tsx\n\n./src/modules/planning/bloc-operatoire/hooks/useOperatingResourceQueries.ts\nAttempted import error: 'operatingSectorService' is not exported from '../services/OperatingSectorService' (imported as 'operatingSectorService').\n\nImport trace for requested module:\n./src/modules/planning/bloc-operatoire/hooks/useOperatingResourceQueries.ts\n./src/modules/planning/bloc-operatoire/components/SupervisionRulesList.tsx\n\n./src/modules/planning/bloc-operatoire/hooks/useOperatingResourceQueries.ts\nAttempted import error: 'operatingRoomService' is not exported from '../services/OperatingRoomService' (imported as 'operatingRoomService').\n\nImport trace for requested module:\n./src/modules/planning/bloc-operatoire/hooks/useOperatingResourceQueries.ts\n./src/modules/planning/bloc-operatoire/components/SupervisionRulesList.tsx\n\n./src/modules/planning/bloc-operatoire/hooks/useOperatingResourceQueries.ts\nAttempted import error: 'operatingRoomService' is not exported from '../services/OperatingRoomService' (imported as 'operatingRoomService').\n\nImport trace for requested module:\n./src/modules/planning/bloc-operatoire/hooks/useOperatingResourceQueries.ts\n./src/modules/planning/bloc-operatoire/components/SupervisionRulesList.tsx\n\n./src/modules/planning/bloc-operatoire/hooks/useOperatingResourceQueries.ts\nAttempted import error: 'operatingRoomService' is not exported from '../services/OperatingRoomService' (imported as 'operatingRoomService').\n\nImport trace for requested module:\n./src/modules/planning/bloc-operatoire/hooks/useOperatingResourceQueries.ts\n./src/modules/planning/bloc-operatoire/components/SupervisionRulesList.tsx\n\n./src/modules/planning/bloc-operatoire/hooks/useOperatingResourceQueries.ts\nAttempted import error: 'operatingRoomService' is not exported from '../services/OperatingRoomService' (imported as 'operatingRoomService').\n\nImport trace for requested module:\n./src/modules/planning/bloc-operatoire/hooks/useOperatingResourceQueries.ts\n./src/modules/planning/bloc-operatoire/components/SupervisionRulesList.tsx\n\n./src/modules/planning/bloc-operatoire/services/SupervisionRulesService.ts\nAttempted import error: 'operatingRoomService' is not exported from './OperatingRoomService' (imported as 'operatingRoomService').\n\nImport trace for requested module:\n./src/modules/planning/bloc-operatoire/services/SupervisionRulesService.ts\n./src/modules/planning/bloc-operatoire/hooks/useOperatingResourceQueries.ts\n./src/modules/planning/bloc-operatoire/components/SupervisionRulesList.tsx\n\n./src/modules/planning/bloc-operatoire/services/SupervisionRulesService.ts\nAttempted import error: 'operatingRoomService' is not exported from './OperatingRoomService' (imported as 'operatingRoomService').\n\nImport trace for requested module:\n./src/modules/planning/bloc-operatoire/services/SupervisionRulesService.ts\n./src/modules/planning/bloc-operatoire/hooks/useOperatingResourceQueries.ts\n./src/modules/planning/bloc-operatoire/components/SupervisionRulesList.tsx\n\n./src/modules/planning/bloc-operatoire/services/SupervisionRulesService.ts\nAttempted import error: 'operatingRoomService' is not exported from './OperatingRoomService' (imported as 'operatingRoomService').\n\nImport trace for requested module:\n./src/modules/planning/bloc-operatoire/services/SupervisionRulesService.ts\n./src/modules/planning/bloc-operatoire/hooks/useOperatingResourceQueries.ts\n./src/modules/planning/bloc-operatoire/components/SupervisionRulesList.tsx\n\n./src/modules/planning/bloc-operatoire/services/SupervisionRulesService.ts\nAttempted import error: 'operatingRoomService' is not exported from './OperatingRoomService' (imported as 'operatingRoomService').\n\nImport trace for requested module:\n./src/modules/planning/bloc-operatoire/services/SupervisionRulesService.ts\n./src/modules/planning/bloc-operatoire/hooks/useOperatingResourceQueries.ts\n./src/modules/planning/bloc-operatoire/components/SupervisionRulesList.tsx\n\n./src/modules/planning/bloc-operatoire/services/SupervisionRulesService.ts\nAttempted import error: 'operatingRoomService' is not exported from './OperatingRoomService' (imported as 'operatingRoomService').\n\nImport trace for requested module:\n./src/modules/planning/bloc-operatoire/services/SupervisionRulesService.ts\n./src/modules/planning/bloc-operatoire/hooks/useOperatingResourceQueries.ts\n./src/modules/planning/bloc-operatoire/components/SupervisionRulesList.tsx\n\n./src/components/PlanningSimulator.tsx\nAttempted import error: './ui/switch' does not contain a default export (imported as 'Switch').\n\nImport trace for requested module:\n./src/components/PlanningSimulator.tsx\n\n./node_modules/sequelize/lib/dialects/abstract/connection-manager.js\nCritical dependency: the request of a dependency is an expression\n\nImport trace for requested module:\n./node_modules/sequelize/lib/dialects/abstract/connection-manager.js\n./node_modules/sequelize/lib/dialects/mariadb/connection-manager.js\n./node_modules/sequelize/lib/dialects/mariadb/index.js\n./node_modules/sequelize/lib/sequelize.js\n./node_modules/sequelize/lib/index.js\n./node_modules/sequelize/lib/index.mjs\n./src/models/TrameAffectation.ts\n./src/services/trameAffectationService.ts\n./src/app/admin/trames/page.tsx\n\n./src/app/admin/bloc-operatoire/components/ReglesSupervisionAdmin.tsx\nAttempted import error: 'TableCaption' is not exported from '@/components/ui/table' (imported as 'TableCaption').\n\nImport trace for requested module:\n./src/app/admin/bloc-operatoire/components/ReglesSupervisionAdmin.tsx\n./src/app/bloc-operatoire/regles-supervision/page.tsx\n\n./src/app/admin/bloc-operatoire/components/ReglesSupervisionAdmin.tsx\nAttempted import error: 'Input' is not exported from '@/components/ui/input' (imported as 'Input').\n\nImport trace for requested module:\n./src/app/admin/bloc-operatoire/components/ReglesSupervisionAdmin.tsx\n./src/app/bloc-operatoire/regles-supervision/page.tsx\n\n./src/app/admin/bloc-operatoire/components/ReglesSupervisionAdmin.tsx\nAttempted import error: 'Input' is not exported from '@/components/ui/input' (imported as 'Input').\n\nImport trace for requested module:\n./src/app/admin/bloc-operatoire/components/ReglesSupervisionAdmin.tsx\n./src/app/bloc-operatoire/regles-supervision/page.tsx\n\n./src/app/admin/bloc-operatoire/components/ReglesSupervisionAdmin.tsx\nAttempted import error: 'Input' is not exported from '@/components/ui/input' (imported as 'Input').\n\nImport trace for requested module:\n./src/app/admin/bloc-operatoire/components/ReglesSupervisionAdmin.tsx\n./src/app/bloc-operatoire/regles-supervision/page.tsx\n\n./src/app/admin/bloc-operatoire/components/ReglesSupervisionAdmin.tsx\nAttempted import error: 'Textarea' is not exported from '@/components/ui/textarea' (imported as 'Textarea').\n\nImport trace for requested module:\n./src/app/admin/bloc-operatoire/components/ReglesSupervisionAdmin.tsx\n./src/app/bloc-operatoire/regles-supervision/page.tsx\n\n./src/app/admin/bloc-operatoire/components/ReglesSupervisionAdmin.tsx\nAttempted import error: 'Input' is not exported from '@/components/ui/input' (imported as 'Input').\n\nImport trace for requested module:\n./src/app/admin/bloc-operatoire/components/ReglesSupervisionAdmin.tsx\n./src/app/bloc-operatoire/regles-supervision/page.tsx\n\n./src/app/admin/bloc-operatoire/components/ReglesSupervisionAdmin.tsx\nAttempted import error: 'Input' is not exported from '@/components/ui/input' (imported as 'Input').\n\nImport trace for requested module:\n./src/app/admin/bloc-operatoire/components/ReglesSupervisionAdmin.tsx\n./src/app/bloc-operatoire/regles-supervision/page.tsx\n\n./src/app/admin/bloc-operatoire/components/ReglesSupervisionAdmin.tsx\nAttempted import error: 'Input' is not exported from '@/components/ui/input' (imported as 'Input').\n\nImport trace for requested module:\n./src/app/admin/bloc-operatoire/components/ReglesSupervisionAdmin.tsx\n./src/app/bloc-operatoire/regles-supervision/page.tsx\n\n./src/app/admin/holidays/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/holidays/page.tsx\n\n./src/app/admin/holidays/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/holidays/page.tsx\n\n./src/app/admin/holidays/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/holidays/page.tsx\n\n./src/app/admin/holidays/page.tsx\nAttempted import error: 'Input' is not exported from '@/components/ui/input' (imported as 'Input').\n\nImport trace for requested module:\n./src/app/admin/holidays/page.tsx\n\n./src/app/admin/holidays/page.tsx\nAttempted import error: 'Input' is not exported from '@/components/ui/input' (imported as 'Input').\n\nImport trace for requested module:\n./src/app/admin/holidays/page.tsx\n\n./src/app/admin/holidays/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/holidays/page.tsx\n\n./src/app/admin/holidays/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/holidays/page.tsx\n\n./src/app/admin/holidays/page.tsx\nAttempted import error: 'DatePicker' is not exported from '@/components/ui/date-picker' (imported as 'DatePicker').\n\nImport trace for requested module:\n./src/app/admin/holidays/page.tsx\n\n./src/app/admin/holidays/page.tsx\nAttempted import error: 'Input' is not exported from '@/components/ui/input' (imported as 'Input').\n\nImport trace for requested module:\n./src/app/admin/holidays/page.tsx\n\n./src/app/admin/holidays/page.tsx\nAttempted import error: 'Input' is not exported from '@/components/ui/input' (imported as 'Input').\n\nImport trace for requested module:\n./src/app/admin/holidays/page.tsx\n\n./src/app/admin/holidays/page.tsx\nAttempted import error: 'Input' is not exported from '@/components/ui/input' (imported as 'Input').\n\nImport trace for requested module:\n./src/app/admin/holidays/page.tsx\n\n./src/app/admin/holidays/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/holidays/page.tsx\n\n./src/app/admin/holidays/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/holidays/page.tsx\n\n./src/app/admin/schedule-rules/edit/[id]/page.tsx\nAttempted import error: 'RuleForm' is not exported from '@/modules/dynamicRules/components/RuleForm' (imported as 'RuleForm').\n\nImport trace for requested module:\n./src/app/admin/schedule-rules/edit/[id]/page.tsx\n\n./src/app/admin/schedule-rules/new/page.tsx\nAttempted import error: 'RuleForm' is not exported from '@/modules/dynamicRules/components/RuleForm' (imported as 'RuleForm').\n\nImport trace for requested module:\n./src/app/admin/schedule-rules/new/page.tsx\n\n./src/app/admin/schedule-rules/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/schedule-rules/page.tsx\n\n./src/app/admin/schedule-rules/page.tsx\nAttempted import error: 'RulesList' is not exported from '@/modules/dynamicRules/components/RulesList' (imported as 'RulesList').\n\nImport trace for requested module:\n./src/app/admin/schedule-rules/page.tsx\n\n./src/app/admin/schedule-rules/page.tsx\nAttempted import error: 'RulesList' is not exported from '@/modules/dynamicRules/components/RulesList' (imported as 'RulesList').\n\nImport trace for requested module:\n./src/app/admin/schedule-rules/page.tsx\n\n./src/app/admin/schedule-rules/page.tsx\nAttempted import error: 'RulesList' is not exported from '@/modules/dynamicRules/components/RulesList' (imported as 'RulesList').\n\nImport trace for requested module:\n./src/app/admin/schedule-rules/page.tsx\n\n./src/app/admin/simulations/[scenarioId]/filters/AdvancedFilters.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/[scenarioId]/filters/AdvancedFilters.tsx\n./src/app/admin/simulations/[scenarioId]/page.tsx\n\n./src/app/admin/simulations/[scenarioId]/filters/AdvancedFilters.tsx\nAttempted import error: 'Input' is not exported from '@/components/ui/input' (imported as 'Input').\n\nImport trace for requested module:\n./src/app/admin/simulations/[scenarioId]/filters/AdvancedFilters.tsx\n./src/app/admin/simulations/[scenarioId]/page.tsx\n\n./src/app/admin/simulations/[scenarioId]/filters/AdvancedFilters.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/[scenarioId]/filters/AdvancedFilters.tsx\n./src/app/admin/simulations/[scenarioId]/page.tsx\n\n./src/app/admin/simulations/[scenarioId]/filters/AdvancedFilters.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/[scenarioId]/filters/AdvancedFilters.tsx\n./src/app/admin/simulations/[scenarioId]/page.tsx\n\n./src/app/admin/simulations/[scenarioId]/filters/AdvancedFilters.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/[scenarioId]/filters/AdvancedFilters.tsx\n./src/app/admin/simulations/[scenarioId]/page.tsx\n\n./src/app/admin/simulations/[scenarioId]/filters/AdvancedFilters.tsx\nAttempted import error: 'Input' is not exported from '@/components/ui/input' (imported as 'Input').\n\nImport trace for requested module:\n./src/app/admin/simulations/[scenarioId]/filters/AdvancedFilters.tsx\n./src/app/admin/simulations/[scenarioId]/page.tsx\n\n./src/app/admin/simulations/[scenarioId]/filters/AdvancedFilters.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/[scenarioId]/filters/AdvancedFilters.tsx\n./src/app/admin/simulations/[scenarioId]/page.tsx\n\n./src/app/admin/simulations/[scenarioId]/filters/AdvancedFilters.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/[scenarioId]/filters/AdvancedFilters.tsx\n./src/app/admin/simulations/[scenarioId]/page.tsx\n\n./src/app/admin/simulations/[scenarioId]/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/[scenarioId]/page.tsx\n\n./src/app/admin/simulations/[scenarioId]/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/[scenarioId]/page.tsx\n\n./src/app/admin/simulations/[scenarioId]/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/[scenarioId]/page.tsx\n\n./src/app/admin/simulations/[scenarioId]/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/[scenarioId]/page.tsx\n\n./src/app/admin/simulations/[scenarioId]/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/[scenarioId]/page.tsx\n\n./src/app/admin/simulations/[scenarioId]/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/[scenarioId]/page.tsx\n\n./src/app/admin/simulations/[scenarioId]/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/[scenarioId]/page.tsx\n\n./src/app/admin/simulations/[scenarioId]/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/[scenarioId]/page.tsx\n\n./src/app/admin/simulations/[scenarioId]/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/[scenarioId]/page.tsx\n\n./src/app/admin/simulations/[scenarioId]/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/[scenarioId]/page.tsx\n\n./src/app/admin/simulations/[scenarioId]/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/[scenarioId]/page.tsx\n\n./src/app/admin/simulations/new/page.tsx\nAttempted import error: 'Input' is not exported from '@/components/ui/input' (imported as 'Input').\n\nImport trace for requested module:\n./src/app/admin/simulations/new/page.tsx\n\n./src/app/admin/simulations/new/page.tsx\nAttempted import error: 'Textarea' is not exported from '@/components/ui/textarea' (imported as 'Textarea').\n\nImport trace for requested module:\n./src/app/admin/simulations/new/page.tsx\n\n./src/app/admin/simulations/new/page.tsx\nAttempted import error: 'DatePicker' is not exported from '@/components/ui/date-picker' (imported as 'DatePicker').\n\nImport trace for requested module:\n./src/app/admin/simulations/new/page.tsx\n\n./src/app/admin/simulations/new/page.tsx\nAttempted import error: 'DatePicker' is not exported from '@/components/ui/date-picker' (imported as 'DatePicker').\n\nImport trace for requested module:\n./src/app/admin/simulations/new/page.tsx\n\n./src/app/admin/simulations/new/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/new/page.tsx\n\n./src/app/admin/simulations/new/page.tsx\nAttempted import error: 'Input' is not exported from '@/components/ui/input' (imported as 'Input').\n\nImport trace for requested module:\n./src/app/admin/simulations/new/page.tsx\n\n./src/app/admin/simulations/new/page.tsx\nAttempted import error: 'Input' is not exported from '@/components/ui/input' (imported as 'Input').\n\nImport trace for requested module:\n./src/app/admin/simulations/new/page.tsx\n\n./src/app/admin/simulations/new/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/new/page.tsx\n\n./src/app/admin/simulations/new/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/new/page.tsx\n\n./src/app/admin/simulations/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/page.tsx\n\n./src/app/admin/simulations/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/page.tsx\n\n./src/app/admin/simulations/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/page.tsx\n\n./src/app/admin/simulations/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/page.tsx\n\n./src/app/admin/simulations/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/page.tsx\n\n./src/app/admin/simulations/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/page.tsx\n\n./src/app/admin/simulations/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/page.tsx\n\n./src/app/admin/simulations/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/page.tsx\n\n./src/app/admin/simulations/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/page.tsx\n\n./src/app/admin/simulations/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/page.tsx\n\n./src/app/admin/simulations/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/page.tsx\n\n./src/app/admin/simulations/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/page.tsx\n\n./src/app/admin/simulations/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/page.tsx\n\n./src/app/admin/simulations/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/page.tsx\n\n./src/app/admin/simulations/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/page.tsx\n\n./src/app/admin/simulations/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/page.tsx\n\n./src/app/admin/simulations/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/page.tsx\n\n./src/app/admin/simulations/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/page.tsx\n\n./src/app/admin/simulations/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/page.tsx\n\n./src/app/admin/simulations/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/page.tsx\n\n./src/app/admin/simulations/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/page.tsx\n\n./src/app/admin/simulations/page.tsx\nAttempted import error: 'Input' is not exported from '@/components/ui/input' (imported as 'Input').\n\nImport trace for requested module:\n./src/app/admin/simulations/page.tsx\n\n./src/app/admin/simulations/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/page.tsx\n\n./src/app/admin/simulations/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/page.tsx\n\n./src/app/admin/simulations/performance-demo.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/performance-demo.tsx\n\n./src/app/admin/simulations/performance-demo.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/performance-demo.tsx\n\n./src/app/admin/simulations/performance-demo.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/performance-demo.tsx\n\n./src/app/admin/simulations/visualizations/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/simulations/visualizations/page.tsx\n\n./src/app/admin/skills/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/skills/page.tsx\n\n./src/app/admin/skills/page.tsx\nAttempted import error: 'Input' is not exported from '@/components/ui/input' (imported as 'Input').\n\nImport trace for requested module:\n./src/app/admin/skills/page.tsx\n\n./src/app/admin/skills/page.tsx\nAttempted import error: 'Textarea' is not exported from '@/components/ui/textarea' (imported as 'Textarea').\n\nImport trace for requested module:\n./src/app/admin/skills/page.tsx\n\n./src/app/admin/skills/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/skills/page.tsx\n\n./src/app/admin/skills/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/skills/page.tsx\n\n./src/app/admin/skills/page.tsx\nAttempted import error: 'Input' is not exported from '@/components/ui/input' (imported as 'Input').\n\nImport trace for requested module:\n./src/app/admin/skills/page.tsx\n\n./src/app/admin/skills/page.tsx\nAttempted import error: 'Textarea' is not exported from '@/components/ui/textarea' (imported as 'Textarea').\n\nImport trace for requested module:\n./src/app/admin/skills/page.tsx\n\n./src/app/admin/skills/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/skills/page.tsx\n\n./src/app/admin/skills/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/skills/page.tsx\n\n./src/app/admin/skills/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/skills/page.tsx\n\n./src/app/admin/skills/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/skills/page.tsx\n\n./src/app/admin/skills/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/skills/page.tsx\n\n./src/app/admin/skills/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/skills/page.tsx\n\n./src/app/admin/team-configurations/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/admin/team-configurations/page.tsx\n\n./src/app/bloc-operatoire/components/BlocPlanning.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/bloc-operatoire/components/BlocPlanning.tsx\n./src/app/bloc-operatoire/page.tsx\n\n./src/app/bloc-operatoire/components/BlocPlanning.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/bloc-operatoire/components/BlocPlanning.tsx\n./src/app/bloc-operatoire/page.tsx\n\n./src/app/bloc-operatoire/components/BlocPlanning.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/bloc-operatoire/components/BlocPlanning.tsx\n./src/app/bloc-operatoire/page.tsx\n\n./src/app/bloc-operatoire/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/bloc-operatoire/page.tsx\n\n./src/app/bloc-operatoire/page.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/app/bloc-operatoire/page.tsx\n\n./src/app/bloc-operatoire/planning/page.tsx\nAttempted import error: 'DatePicker' is not exported from '@/components/ui/date-picker' (imported as 'DatePicker').\n\nImport trace for requested module:\n./src/app/bloc-operatoire/planning/page.tsx\n\n./src/app/leaves/quotas/advanced/page.tsx\nAttempted import error: 'QuotaAdvancedManagement' is not exported from '@/modules/leaves/components/QuotaAdvancedManagement' (imported as 'QuotaAdvancedManagement').\n\nImport trace for requested module:\n./src/app/leaves/quotas/advanced/page.tsx\n\n./src/app/parametres/chirurgiens/page.tsx\nAttempted import error: 'Role' is not exported from '@/types/user' (imported as 'Role').\n\nImport trace for requested module:\n./src/app/parametres/chirurgiens/page.tsx\n\n./src/app/parametres/chirurgiens/page.tsx\nAttempted import error: 'Role' is not exported from '@/types/user' (imported as 'Role').\n\nImport trace for requested module:\n./src/app/parametres/chirurgiens/page.tsx\n\n./src/app/parametres/hopitaux/page.tsx\nAttempted import error: '@/components/ui/switch' does not contain a default export (imported as 'Switch').\n\nImport trace for requested module:\n./src/app/parametres/hopitaux/page.tsx\n\n./src/components/dashboard/widgets/PredictiveInsightsWidget.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/components/dashboard/widgets/PredictiveInsightsWidget.tsx\n./src/app/statistiques/previsions/page.tsx\n\n./src/components/simulations/ApplySimulationModal.tsx\nAttempted import error: 'Textarea' is not exported from '@/components/ui/textarea' (imported as 'Textarea').\n\nImport trace for requested module:\n./src/components/simulations/ApplySimulationModal.tsx\n./src/app/admin/simulations/[scenarioId]/results/[resultId]/page.tsx\n\n./src/components/simulations/ApplySimulationModal.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/components/simulations/ApplySimulationModal.tsx\n./src/app/admin/simulations/[scenarioId]/results/[resultId]/page.tsx\n\n./src/components/simulations/ApplySimulationModal.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/components/simulations/ApplySimulationModal.tsx\n./src/app/admin/simulations/[scenarioId]/results/[resultId]/page.tsx\n\n./src/components/ui/data-table.tsx\nAttempted import error: 'Input' is not exported from '@/components/ui/input' (imported as 'Input').\n\nImport trace for requested module:\n./src/components/ui/data-table.tsx\n./src/app/admin/holidays/page.tsx\n\n./src/components/ui/data-table.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/components/ui/data-table.tsx\n./src/app/admin/holidays/page.tsx\n\n./src/components/ui/data-table.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/components/ui/data-table.tsx\n./src/app/admin/holidays/page.tsx\n\n./src/modules/dynamicRules/components/RulesList.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/modules/dynamicRules/components/RulesList.tsx\n./src/app/admin/schedule-rules/page.tsx\n\n./src/modules/dynamicRules/components/RulesList.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/modules/dynamicRules/components/RulesList.tsx\n./src/app/admin/schedule-rules/page.tsx\n\n./src/modules/dynamicRules/components/RulesList.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/modules/dynamicRules/components/RulesList.tsx\n./src/app/admin/schedule-rules/page.tsx\n\n./src/modules/dynamicRules/components/RulesList.tsx\nAttempted import error: 'Button' is not exported from '@/components/ui/button' (imported as 'Button').\n\nImport trace for requested module:\n./src/modules/dynamicRules/components/RulesList.tsx\n./src/app/admin/schedule-rules/page.tsx\n\n./src/modules/leaves/components/reports/QuotaTransferReportPanel.tsx\nAttempted import error: 'TableCaption' is not exported from '@/components/ui/table' (imported as 'TableCaption').\n\nImport trace for requested module:\n./src/modules/leaves/components/reports/QuotaTransferReportPanel.tsx\n./src/modules/leaves/components/QuotaAdvancedManagement.tsx\n./src/app/leaves/quotas/advanced/page.tsx\n\n./src/modules/planning/bloc-operatoire/components/AddRoomModal.tsx\nAttempted import error: '@/components/ui/switch' does not contain a default export (imported as 'Switch').\n\nImport trace for requested module:\n./src/modules/planning/bloc-operatoire/components/AddRoomModal.tsx\n./src/modules/planning/bloc-operatoire/components/RoomsList.tsx\n\n./src/modules/planning/bloc-operatoire/components/OperatingRoomList.tsx\nAttempted import error: '@/components/ui/switch' does not contain a default export (imported as 'Switch').\n\nImport trace for requested module:\n./src/modules/planning/bloc-operatoire/components/OperatingRoomList.tsx\n./src/app/admin/bloc-operatoire/salles/page.tsx\n\n./src/modules/planning/bloc-operatoire/components/OperatingSectorList.tsx\nAttempted import error: '@/components/ui/switch' does not contain a default export (imported as 'Switch').\n\nImport trace for requested module:\n./src/modules/planning/bloc-operatoire/components/OperatingSectorList.tsx\n./src/app/admin/bloc-operatoire/secteurs/page.tsx\n\n./src/modules/planning/bloc-operatoire/components/SupervisionRulesList.tsx\nAttempted import error: '@/components/ui/switch' does not contain a default export (imported as 'Switch').\n\nImport trace for requested module:\n./src/modules/planning/bloc-operatoire/components/SupervisionRulesList.tsx\n./src/app/admin/bloc-operatoire/regles-supervision/page.tsx\n\n./src/modules/planning/bloc-operatoire/components/SupervisionRulesList.tsx\nAttempted import error: '@/components/ui/switch' does not contain a default export (imported as 'Switch').\n\nImport trace for requested module:\n./src/modules/planning/bloc-operatoire/components/SupervisionRulesList.tsx\n./src/app/admin/bloc-operatoire/regles-supervision/page.tsx\n\n./src/modules/planning/bloc-operatoire/components/SupervisionRulesList.tsx\nAttempted import error: '@/components/ui/switch' does not contain a default export (imported as 'Switch').\n\nImport trace for requested module:\n./src/modules/planning/bloc-operatoire/components/SupervisionRulesList.tsx\n./src/app/admin/bloc-operatoire/regles-supervision/page.tsx\n\n./src/modules/planning/bloc-operatoire/hooks/useOperatingResourceQueries.ts\nAttempted import error: 'operatingSectorService' is not exported from '../services/OperatingSectorService' (imported as 'operatingSectorService').\n\nImport trace for requested module:\n./src/modules/planning/bloc-operatoire/hooks/useOperatingResourceQueries.ts\n./src/modules/planning/bloc-operatoire/components/SupervisionRulesList.tsx\n./src/app/admin/bloc-operatoire/regles-supervision/page.tsx\n\n./src/modules/planning/bloc-operatoire/hooks/useOperatingResourceQueries.ts\nAttempted import error: 'operatingSectorService' is not exported from '../services/OperatingSectorService' (imported as 'operatingSectorService').\n\nImport trace for requested module:\n./src/modules/planning/bloc-operatoire/hooks/useOperatingResourceQueries.ts\n./src/modules/planning/bloc-operatoire/components/SupervisionRulesList.tsx\n./src/app/admin/bloc-operatoire/regles-supervision/page.tsx\n\n./src/modules/planning/bloc-operatoire/hooks/useOperatingResourceQueries.ts\nAttempted import error: 'operatingSectorService' is not exported from '../services/OperatingSectorService' (imported as 'operatingSectorService').\n\nImport trace for requested module:\n./src/modules/planning/bloc-operatoire/hooks/useOperatingResourceQueries.ts\n./src/modules/planning/bloc-operatoire/components/SupervisionRulesList.tsx\n./src/app/admin/bloc-operatoire/regles-supervision/page.tsx\n\n./src/modules/planning/bloc-operatoire/hooks/useOperatingResourceQueries.ts\nAttempted import error: 'operatingSectorService' is not exported from '../services/OperatingSectorService' (imported as 'operatingSectorService').\n\nImport trace for requested module:\n./src/modules/planning/bloc-operatoire/hooks/useOperatingResourceQueries.ts\n./src/modules/planning/bloc-operatoire/components/SupervisionRulesList.tsx\n./src/app/admin/bloc-operatoire/regles-supervision/page.tsx\n\n./src/modules/planning/bloc-operatoire/hooks/useOperatingResourceQueries.ts\nAttempted import error: 'operatingRoomService' is not exported from '../services/OperatingRoomService' (imported as 'operatingRoomService').\n\nImport trace for requested module:\n./src/modules/planning/bloc-operatoire/hooks/useOperatingResourceQueries.ts\n./src/modules/planning/bloc-operatoire/components/SupervisionRulesList.tsx\n./src/app/admin/bloc-operatoire/regles-supervision/page.tsx\n\n./src/modules/planning/bloc-operatoire/hooks/useOperatingResourceQueries.ts\nAttempted import error: 'operatingRoomService' is not exported from '../services/OperatingRoomService' (imported as 'operatingRoomService').\n\nImport trace for requested module:\n./src/modules/planning/bloc-operatoire/hooks/useOperatingResourceQueries.ts\n./src/modules/planning/bloc-operatoire/components/SupervisionRulesList.tsx\n./src/app/admin/bloc-operatoire/regles-supervision/page.tsx\n\n./src/modules/planning/bloc-operatoire/hooks/useOperatingResourceQueries.ts\nAttempted import error: 'operatingRoomService' is not exported from '../services/OperatingRoomService' (imported as 'operatingRoomService').\n\nImport trace for requested module:\n./src/modules/planning/bloc-operatoire/hooks/useOperatingResourceQueries.ts\n./src/modules/planning/bloc-operatoire/components/SupervisionRulesList.tsx\n./src/app/admin/bloc-operatoire/regles-supervision/page.tsx\n\n./src/modules/planning/bloc-operatoire/hooks/useOperatingResourceQueries.ts\nAttempted import error: 'operatingRoomService' is not exported from '../services/OperatingRoomService' (imported as 'operatingRoomService').\n\nImport trace for requested module:\n./src/modules/planning/bloc-operatoire/hooks/useOperatingResourceQueries.ts\n./src/modules/planning/bloc-operatoire/components/SupervisionRulesList.tsx\n./src/app/admin/bloc-operatoire/regles-supervision/page.tsx\n\n./src/modules/planning/bloc-operatoire/services/SupervisionRulesService.ts\nAttempted import error: 'operatingRoomService' is not exported from './OperatingRoomService' (imported as 'operatingRoomService').\n\nImport trace for requested module:\n./src/modules/planning/bloc-operatoire/services/SupervisionRulesService.ts\n./src/modules/planning/bloc-operatoire/hooks/useOperatingResourceQueries.ts\n./src/modules/planning/bloc-operatoire/components/SupervisionRulesList.tsx\n./src/app/admin/bloc-operatoire/regles-supervision/page.tsx\n\n./src/modules/planning/bloc-operatoire/services/SupervisionRulesService.ts\nAttempted import error: 'operatingRoomService' is not exported from './OperatingRoomService' (imported as 'operatingRoomService').\n\nImport trace for requested module:\n./src/modules/planning/bloc-operatoire/services/SupervisionRulesService.ts\n./src/modules/planning/bloc-operatoire/hooks/useOperatingResourceQueries.ts\n./src/modules/planning/bloc-operatoire/components/SupervisionRulesList.tsx\n./src/app/admin/bloc-operatoire/regles-supervision/page.tsx\n\n./src/modules/planning/bloc-operatoire/services/SupervisionRulesService.ts\nAttempted import error: 'operatingRoomService' is not exported from './OperatingRoomService' (imported as 'operatingRoomService').\n\nImport trace for requested module:\n./src/modules/planning/bloc-operatoire/services/SupervisionRulesService.ts\n./src/modules/planning/bloc-operatoire/hooks/useOperatingResourceQueries.ts\n./src/modules/planning/bloc-operatoire/components/SupervisionRulesList.tsx\n./src/app/admin/bloc-operatoire/regles-supervision/page.tsx\n\n./src/modules/planning/bloc-operatoire/services/SupervisionRulesService.ts\nAttempted import error: 'operatingRoomService' is not exported from './OperatingRoomService' (imported as 'operatingRoomService').\n\nImport trace for requested module:\n./src/modules/planning/bloc-operatoire/services/SupervisionRulesService.ts\n./src/modules/planning/bloc-operatoire/hooks/useOperatingResourceQueries.ts\n./src/modules/planning/bloc-operatoire/components/SupervisionRulesList.tsx\n./src/app/admin/bloc-operatoire/regles-supervision/page.tsx\n\n./src/modules/planning/bloc-operatoire/services/SupervisionRulesService.ts\nAttempted import error: 'operatingRoomService' is not exported from './OperatingRoomService' (imported as 'operatingRoomService').\n\nImport trace for requested module:\n./src/modules/planning/bloc-operatoire/services/SupervisionRulesService.ts\n./src/modules/planning/bloc-operatoire/hooks/useOperatingResourceQueries.ts\n./src/modules/planning/bloc-operatoire/components/SupervisionRulesList.tsx\n./src/app/admin/bloc-operatoire/regles-supervision/page.tsx\n\n./src/app/admin/leaves/analytics/page.tsx\nAttempted import error: 'CardBody' is not exported from '@/components/ui/Card' (imported as 'CardBody').\n\nImport trace for requested module:\n./src/app/admin/leaves/analytics/page.tsx\n\n./src/app/admin/leaves/analytics/page.tsx\nAttempted import error: 'LeaveConflictDashboard' is not exported from '@/modules/leaves/components/LeaveConflictDashboard' (imported as 'LeaveConflictDashboard').\n\nImport trace for requested module:\n./src/app/admin/leaves/analytics/page.tsx\n\n./src/app/api/planning-rules/bloc/route.ts\nAttempted import error: 'getAllSupervisorRules' is not exported from '@/modules/planning/bloc-operatoire/services/blocPlanningService' (imported as 'getAllSupervisorRules').\n\nImport trace for requested module:\n./src/app/api/planning-rules/bloc/route.ts\n\n./src/app/api/planning-rules/bloc/route.ts\nAttempted import error: 'createSupervisorRule' is not exported from '@/modules/planning/bloc-operatoire/services/blocPlanningService' (imported as 'createSupervisorRule').\n\nImport trace for requested module:\n./src/app/api/planning-rules/bloc/route.ts\n\n./src/app/api/planning-rules/bloc/route.ts\nAttempted import error: 'updateSupervisorRule' is not exported from '@/modules/planning/bloc-operatoire/services/blocPlanningService' (imported as 'updateSupervisorRule').\n\nImport trace for requested module:\n./src/app/api/planning-rules/bloc/route.ts\n\n./src/app/api/planning-rules/bloc/route.ts\nAttempted import error: 'deleteSupervisorRule' is not exported from '@/modules/planning/bloc-operatoire/services/blocPlanningService' (imported as 'deleteSupervisorRule').\n\nImport trace for requested module:\n./src/app/api/planning-rules/bloc/route.ts\n\n./src/app/bloc-operatoire/salles/page.tsx\nAttempted import error: '@/modules/planning/bloc-operatoire/components/RoomsList' does not contain a default export (imported as 'RoomsList').\n\nImport trace for requested module:\n./src/app/bloc-operatoire/salles/page.tsx\n\n./src/components/ui/Card.tsx\nThere are multiple modules with names that only differ in casing.\nThis can lead to unexpected behavior when compiling on a filesystem with other case-semantic.\nUse equal casing. Compare these module identifiers:\n* javascript/auto|/Users/vincentperreard/Mathildanesth/node_modules/next/dist/build/webpack/loaders/next-flight-loader/index.js!/Users/vincentperreard/Mathildanesth/node_modules/next/dist/build/webpack/loaders/next-swc-loader.js??ruleSet[1].rules[15].oneOf[4].use[0]!/Users/vincentperreard/Mathildanesth/src/components/ui/Card.tsx|rsc\n    Used by 1 module(s), i. e.\n    javascript/auto|/Users/vincentperreard/Mathildanesth/node_modules/next/dist/build/webpack/loaders/next-flight-loader/index.js!/Users/vincentperreard/Mathildanesth/node_modules/next/dist/build/webpack/loaders/next-swc-loader.js??ruleSet[1].rules[15].oneOf[4].use[0]!/Users/vincentperreard/Mathildanesth/src/app/admin/leaves/analytics/page.tsx|rsc\n* javascript/auto|/Users/vincentperreard/Mathildanesth/node_modules/next/dist/build/webpack/loaders/next-flight-loader/index.js!/Users/vincentperreard/Mathildanesth/node_modules/next/dist/build/webpack/loaders/next-swc-loader.js??ruleSet[1].rules[15].oneOf[4].use[0]!/Users/vincentperreard/Mathildanesth/src/components/ui/card.tsx|rsc\n    Used by 3 module(s), i. e.\n    javascript/auto|/Users/vincentperreard/Mathildanesth/node_modules/next/dist/build/webpack/loaders/next-flight-loader/index.js!/Users/vincentperreard/Mathildanesth/node_modules/next/dist/build/webpack/loaders/next-swc-loader.js??ruleSet[1].rules[15].oneOf[4].use[0]!/Users/vincentperreard/Mathildanesth/src/app/admin/incompatibilites/page.tsx|rsc\n\nImport trace for requested module:\n./src/components/ui/Card.tsx\n./src/app/admin/leaves/analytics/page.tsx\n\n./src/modules/dynamicRules/services/RuleConflictDetectionService.ts\nAttempted import error: 'ComparisonOperator' is not exported from '../types/rule' (imported as 'ComparisonOperator').\n\nImport trace for requested module:\n./src/modules/dynamicRules/services/RuleConflictDetectionService.ts\n./src/modules/rules/services/RuleBasedPlanningGeneratorService.ts\n./src/app/api/simulations/[scenarioId]/run/route.ts\n\n./src/modules/dynamicRules/services/RuleConflictDetectionService.ts\nAttempted import error: 'ComparisonOperator' is not exported from '../types/rule' (imported as 'ComparisonOperator').\n\nImport trace for requested module:\n./src/modules/dynamicRules/services/RuleConflictDetectionService.ts\n./src/modules/rules/services/RuleBasedPlanningGeneratorService.ts\n./src/app/api/simulations/[scenarioId]/run/route.ts\n\n./src/modules/dynamicRules/services/RuleConflictDetectionService.ts\nAttempted import error: 'ComparisonOperator' is not exported from '../types/rule' (imported as 'ComparisonOperator').\n\nImport trace for requested module:\n./src/modules/dynamicRules/services/RuleConflictDetectionService.ts\n./src/modules/rules/services/RuleBasedPlanningGeneratorService.ts\n./src/app/api/simulations/[scenarioId]/run/route.ts\n\n./src/modules/dynamicRules/services/RuleConflictDetectionService.ts\nAttempted import error: 'ComparisonOperator' is not exported from '../types/rule' (imported as 'ComparisonOperator').\n\nImport trace for requested module:\n./src/modules/dynamicRules/services/RuleConflictDetectionService.ts\n./src/modules/rules/services/RuleBasedPlanningGeneratorService.ts\n./src/app/api/simulations/[scenarioId]/run/route.ts\n\n./src/modules/dynamicRules/services/RuleConflictDetectionService.ts\nAttempted import error: 'ComparisonOperator' is not exported from '../types/rule' (imported as 'ComparisonOperator').\n\nImport trace for requested module:\n./src/modules/dynamicRules/services/RuleConflictDetectionService.ts\n./src/modules/rules/services/RuleBasedPlanningGeneratorService.ts\n./src/app/api/simulations/[scenarioId]/run/route.ts\n\n./src/modules/dynamicRules/services/RuleConflictDetectionService.ts\nAttempted import error: 'ComparisonOperator' is not exported from '../types/rule' (imported as 'ComparisonOperator').\n\nImport trace for requested module:\n./src/modules/dynamicRules/services/RuleConflictDetectionService.ts\n./src/modules/rules/services/RuleBasedPlanningGeneratorService.ts\n./src/app/api/simulations/[scenarioId]/run/route.ts\n\n./src/modules/dynamicRules/services/RuleConflictDetectionService.ts\nAttempted import error: 'ComparisonOperator' is not exported from '../types/rule' (imported as 'ComparisonOperator').\n\nImport trace for requested module:\n./src/modules/dynamicRules/services/RuleConflictDetectionService.ts\n./src/modules/rules/services/RuleBasedPlanningGeneratorService.ts\n./src/app/api/simulations/[scenarioId]/run/route.ts\n\n./src/modules/dynamicRules/services/RuleConflictDetectionService.ts\nAttempted import error: 'ComparisonOperator' is not exported from '../types/rule' (imported as 'ComparisonOperator').\n\nImport trace for requested module:\n./src/modules/dynamicRules/services/RuleConflictDetectionService.ts\n./src/modules/rules/services/RuleBasedPlanningGeneratorService.ts\n./src/app/api/simulations/[scenarioId]/run/route.ts\n\n./src/modules/dynamicRules/services/RuleConflictDetectionService.ts\nAttempted import error: 'ComparisonOperator' is not exported from '../types/rule' (imported as 'ComparisonOperator').\n\nImport trace for requested module:\n./src/modules/dynamicRules/services/RuleConflictDetectionService.ts\n./src/modules/rules/services/RuleBasedPlanningGeneratorService.ts\n./src/app/api/simulations/[scenarioId]/run/route.ts\n\n./src/modules/dynamicRules/services/RuleConflictDetectionService.ts\nAttempted import error: 'ComparisonOperator' is not exported from '../types/rule' (imported as 'ComparisonOperator').\n\nImport trace for requested module:\n./src/modules/dynamicRules/services/RuleConflictDetectionService.ts\n./src/modules/rules/services/RuleBasedPlanningGeneratorService.ts\n./src/app/api/simulations/[scenarioId]/run/route.ts\n\n./src/modules/dynamicRules/services/RuleConflictDetectionService.ts\nAttempted import error: 'ComparisonOperator' is not exported from '../types/rule' (imported as 'ComparisonOperator').\n\nImport trace for requested module:\n./src/modules/dynamicRules/services/RuleConflictDetectionService.ts\n./src/modules/rules/services/RuleBasedPlanningGeneratorService.ts\n./src/app/api/simulations/[scenarioId]/run/route.ts\n\n./src/modules/dynamicRules/services/RuleConflictDetectionService.ts\nAttempted import error: 'ComparisonOperator' is not exported from '../types/rule' (imported as 'ComparisonOperator').\n\nImport trace for requested module:\n./src/modules/dynamicRules/services/RuleConflictDetectionService.ts\n./src/modules/rules/services/RuleBasedPlanningGeneratorService.ts\n./src/app/api/simulations/[scenarioId]/run/route.ts\n\n./src/modules/dynamicRules/services/RuleConflictDetectionService.ts\nAttempted import error: 'ComparisonOperator' is not exported from '../types/rule' (imported as 'ComparisonOperator').\n\nImport trace for requested module:\n./src/modules/dynamicRules/services/RuleConflictDetectionService.ts\n./src/modules/rules/services/RuleBasedPlanningGeneratorService.ts\n./src/app/api/simulations/[scenarioId]/run/route.ts\n\n./src/modules/dynamicRules/services/RuleConflictDetectionService.ts\nAttempted import error: 'ComparisonOperator' is not exported from '../types/rule' (imported as 'ComparisonOperator').\n\nImport trace for requested module:\n./src/modules/dynamicRules/services/RuleConflictDetectionService.ts\n./src/modules/rules/services/RuleBasedPlanningGeneratorService.ts\n./src/app/api/simulations/[scenarioId]/run/route.ts\n\n./src/modules/dynamicRules/services/RuleConflictDetectionService.ts\nAttempted import error: 'ComparisonOperator' is not exported from '../types/rule' (imported as 'ComparisonOperator').\n\nImport trace for requested module:\n./src/modules/dynamicRules/services/RuleConflictDetectionService.ts\n./src/modules/rules/services/RuleBasedPlanningGeneratorService.ts\n./src/app/api/simulations/[scenarioId]/run/route.ts\n\n./src/modules/dynamicRules/services/RuleConflictDetectionService.ts\nAttempted import error: 'ComparisonOperator' is not exported from '../types/rule' (imported as 'ComparisonOperator').\n\nImport trace for requested module:\n./src/modules/dynamicRules/services/RuleConflictDetectionService.ts\n./src/modules/rules/services/RuleBasedPlanningGeneratorService.ts\n./src/app/api/simulations/[scenarioId]/run/route.ts\n\n./src/modules/dynamicRules/services/RuleConflictDetectionService.ts\nAttempted import error: 'ComparisonOperator' is not exported from '../types/rule' (imported as 'ComparisonOperator').\n\nImport trace for requested module:\n./src/modules/dynamicRules/services/RuleConflictDetectionService.ts\n./src/modules/rules/services/RuleBasedPlanningGeneratorService.ts\n./src/app/api/simulations/[scenarioId]/run/route.ts\n\n./src/modules/dynamicRules/services/RuleConflictDetectionService.ts\nAttempted import error: 'ComparisonOperator' is not exported from '../types/rule' (imported as 'ComparisonOperator').\n\nImport trace for requested module:\n./src/modules/dynamicRules/services/RuleConflictDetectionService.ts\n./src/modules/rules/services/RuleBasedPlanningGeneratorService.ts\n./src/app/api/simulations/[scenarioId]/run/route.ts\n\n./src/modules/dynamicRules/services/RuleConflictDetectionService.ts\nAttempted import error: 'ComparisonOperator' is not exported from '../types/rule' (imported as 'ComparisonOperator').\n\nImport trace for requested module:\n./src/modules/dynamicRules/services/RuleConflictDetectionService.ts\n./src/modules/rules/services/RuleBasedPlanningGeneratorService.ts\n./src/app/api/simulations/[scenarioId]/run/route.ts\n\n./src/modules/dynamicRules/services/RuleConflictDetectionService.ts\nAttempted import error: 'ComparisonOperator' is not exported from '../types/rule' (imported as 'ComparisonOperator').\n\nImport trace for requested module:\n./src/modules/dynamicRules/services/RuleConflictDetectionService.ts\n./src/modules/rules/services/RuleBasedPlanningGeneratorService.ts\n./src/app/api/simulations/[scenarioId]/run/route.ts\n\n./src/components/PlanningSimulator.tsx\nAttempted import error: './ui/switch' does not contain a default export (imported as 'Switch').\n\nImport trace for requested module:\n./src/components/PlanningSimulator.tsx\n./src/pages/planning/simulateur.tsx\n\n./node_modules/sequelize/lib/dialects/abstract/connection-manager.js\nCritical dependency: the request of a dependency is an expression\n\nImport trace for requested module:\n./node_modules/sequelize/lib/dialects/abstract/connection-manager.js\n./node_modules/sequelize/lib/dialects/mariadb/connection-manager.js\n./node_modules/sequelize/lib/dialects/mariadb/index.js\n./node_modules/sequelize/lib/sequelize.js\n./node_modules/sequelize/lib/index.js\n./node_modules/sequelize/lib/index.mjs\n./src/models/TrameAffectation.ts\n./src/services/trameAffectationService.ts\n./src/app/admin/trames/page.tsx\n\n[PublicHolidayService] Impossible de récupérer les jours fériés depuis l'API pour l'année 2024. Utilisation du calcul local.\n[PublicHolidayService] Impossible de récupérer les jours fériés depuis l'API pour l'année 2025. Utilisation du calcul local.\n[PublicHolidayService] Impossible de récupérer les jours fériés depuis l'API pour l'année 2026. Utilisation du calcul local.\n[PublicHolidayService] Impossible de récupérer les jours fériés depuis l'API pour l'année 2027. Utilisation du calcul local.\n(node:80015) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.\n(Use `node --trace-deprecation ...` to show where the warning was created)\nError occurred prerendering page \"/bloc-operatoire\". Read more: https://nextjs.org/docs/messages/prerender-error\nError: Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined.\n    at nH (/Users/vincentperreard/Mathildanesth/node_modules/next/dist/compiled/next-server/app-page.runtime.prod.js:76:64717)\n    at nW (/Users/vincentperreard/Mathildanesth/node_modules/next/dist/compiled/next-server/app-page.runtime.prod.js:76:67762)\n    at nz (/Users/vincentperreard/Mathildanesth/node_modules/next/dist/compiled/next-server/app-page.runtime.prod.js:76:65337)\n    at nY (/Users/vincentperreard/Mathildanesth/node_modules/next/dist/compiled/next-server/app-page.runtime.prod.js:76:71193)\n    at nX (/Users/vincentperreard/Mathildanesth/node_modules/next/dist/compiled/next-server/app-page.runtime.prod.js:76:69876)\n    at nW (/Users/vincentperreard/Mathildanesth/node_modules/next/dist/compiled/next-server/app-page.runtime.prod.js:76:68029)\n    at nz (/Users/vincentperreard/Mathildanesth/node_modules/next/dist/compiled/next-server/app-page.runtime.prod.js:76:65337)\n    at nY (/Users/vincentperreard/Mathildanesth/node_modules/next/dist/compiled/next-server/app-page.runtime.prod.js:76:71193)\n    at nH (/Users/vincentperreard/Mathildanesth/node_modules/next/dist/compiled/next-server/app-page.runtime.prod.js:76:60968)\n    at nW (/Users/vincentperreard/Mathildanesth/node_modules/next/dist/compiled/next-server/app-page.runtime.prod.js:76:67762)\nExport encountered an error on /bloc-operatoire/page: /bloc-operatoire, exiting the build.\nError occurred prerendering page \"/admin/schedule-rules\". Read more: https://nextjs.org/docs/messages/prerender-error\nError: Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined.\n    at nH (/Users/vincentperreard/Mathildanesth/node_modules/next/dist/compiled/next-server/app-page.runtime.prod.js:76:64717)\n    at nW (/Users/vincentperreard/Mathildanesth/node_modules/next/dist/compiled/next-server/app-page.runtime.prod.js:76:67762)\n    at nz (/Users/vincentperreard/Mathildanesth/node_modules/next/dist/compiled/next-server/app-page.runtime.prod.js:76:65337)\n    at nY (/Users/vincentperreard/Mathildanesth/node_modules/next/dist/compiled/next-server/app-page.runtime.prod.js:76:71193)\n    at nX (/Users/vincentperreard/Mathildanesth/node_modules/next/dist/compiled/next-server/app-page.runtime.prod.js:76:69876)\n    at nW (/Users/vincentperreard/Mathildanesth/node_modules/next/dist/compiled/next-server/app-page.runtime.prod.js:76:68029)\n    at nz (/Users/vincentperreard/Mathildanesth/node_modules/next/dist/compiled/next-server/app-page.runtime.prod.js:76:65337)\n    at nY (/Users/vincentperreard/Mathildanesth/node_modules/next/dist/compiled/next-server/app-page.runtime.prod.js:76:71193)\n    at nH (/Users/vincentperreard/Mathildanesth/node_modules/next/dist/compiled/next-server/app-page.runtime.prod.js:76:60968)\n    at nW (/Users/vincentperreard/Mathildanesth/node_modules/next/dist/compiled/next-server/app-page.runtime.prod.js:76:67762)\nExport encountered an error on /admin/schedule-rules/page: /admin/schedule-rules, exiting the build.\n ⨯ Next.js build worker exited with code: 1 and signal: null\n"
    },
    "TypeScript Check": {
      "duration": 5088,
      "status": "error",
      "error": "Command failed: npx tsc --noEmit"
    },
    "Test Suite": {
      "duration": 15450,
      "status": "error",
      "error": "Command failed: npm run test:critical\n(node:80198) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.\n(Use `node --trace-deprecation ...` to show where the warning was created)\n(node:80192) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.\n(Use `node --trace-deprecation ...` to show where the warning was created)\nFAIL src/modules/leaves/services/__tests__/QuotaAdvancedService.test.ts\n  ● Console\n\n    console.log\n      jest.polyfills.js loaded and applied.\n\n      at Object.<anonymous> (jest.polyfills.js:247:9)\n\n    console.log\n      jest.setup.js loaded and mocks applied.\n\n      at Object.log (jest.setup.js:126:9)\n\n    console.debug\n      [EventBusProfiler] Initialized\n\n      at new debug (src/modules/integration/services/EventBusProfiler.ts:77:17)\n\n    console.error\n      Erreur lors de la récupération des règles de transfert: Error: Test error\n          at Object.<anonymous> (/Users/vincentperreard/Mathildanesth/src/modules/leaves/services/__tests__/QuotaAdvancedService.test.ts:245:70)\n          at Promise.then.completed (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:316:40)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n          at _runTest (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:121:9)\n          at run (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:74:19)\n          at runTestInternal (/Users/vincentperreard/Mathildanesth/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/Users/vincentperreard/Mathildanesth/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/Users/vincentperreard/Mathildanesth/node_modules/jest-runner/build/testWorker.js:106:12)\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at QuotaAdvancedService.error [as getActiveTransferRules] (src/modules/leaves/services/QuotaAdvancedService.ts:74:21)\n      at Object.<anonymous> (src/modules/leaves/services/__tests__/QuotaAdvancedService.test.ts:246:13)\n\n    console.error\n      Erreur lors de la récupération des règles de report: Error: Test error\n          at Object.<anonymous> (/Users/vincentperreard/Mathildanesth/src/modules/leaves/services/__tests__/QuotaAdvancedService.test.ts:258:71)\n          at Promise.then.completed (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:316:40)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n          at _runTest (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:121:9)\n          at run (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:74:19)\n          at runTestInternal (/Users/vincentperreard/Mathildanesth/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/Users/vincentperreard/Mathildanesth/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/Users/vincentperreard/Mathildanesth/node_modules/jest-runner/build/testWorker.js:106:12)\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at QuotaAdvancedService.error [as getActiveCarryOverRules] (src/modules/leaves/services/QuotaAdvancedService.ts:88:21)\n      at Object.<anonymous> (src/modules/leaves/services/__tests__/QuotaAdvancedService.test.ts:259:13)\n\n    console.warn\n      [MSW] Warning: intercepted a request without a matching request handler:\n      \n        • POST /api/audit/entries\n      \n        • Request body: {\"actionType\":\"QUOTA_TRANSFERRED\",\"userId\":\"user-123\",\"targetType\":\"quota\",\"description\":\"Transfert de undefined jour(s) de RECOVERY vers ANNUAL\",\"severity\":\"MEDIUM\",\"metadata\":{\"sourceType\":\"RECOVERY\",\"targetType\":\"ANNUAL\",\"targetAmount\":null,\"ratio\":1},\"userAgent\":\"Mozilla/5.0 (darwin) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/20.0.3\"}\n      \n      If you still wish to intercept this unhandled request, please create a request handler for it.\n      Read more: https://mswjs.io/docs/getting-started/mocks\n\n      at Object.warn (node_modules/msw/src/core/utils/internal/devUtils.ts:18:11)\n      at warn (node_modules/msw/src/core/utils/request/onUnhandledRequest.ts:50:18)\n      at applyStrategy (node_modules/msw/src/core/utils/request/onUnhandledRequest.ts:79:5)\n      at handleRequest (node_modules/msw/src/core/utils/handleRequest.ts:79:5)\n      at _Emitter.<anonymous> (node_modules/msw/src/node/SetupServerCommonApi.ts:60:26)\n      at emitAsync (node_modules/@mswjs/interceptors/src/utils/emitAsync.ts:23:5)\n      at node_modules/@mswjs/interceptors/src/utils/handleRequest.ts:125:5\n      at until (node_modules/@open-draft/until/src/until.ts:23:18)\n      at handleRequest (node_modules/@mswjs/interceptors/src/utils/handleRequest.ts:114:18)\n      at XMLHttpRequestController.xhrRequestController.onRequest (node_modules/@mswjs/interceptors/src/interceptors/XMLHttpRequest/XMLHttpRequestProxy.ts:64:34)\n\n    console.error\n      Error: AggregateError\n          at Object.dispatchError (/Users/vincentperreard/Mathildanesth/node_modules/jsdom/lib/jsdom/living/xhr/xhr-utils.js:63:19)\n          at Request.<anonymous> (/Users/vincentperreard/Mathildanesth/node_modules/jsdom/lib/jsdom/living/xhr/XMLHttpRequest-impl.js:655:18)\n          at Request.emit (node:events:530:35)\n          at ClientRequest.<anonymous> (/Users/vincentperreard/Mathildanesth/node_modules/jsdom/lib/jsdom/living/helpers/http-request.js:121:14)\n          at ClientRequest.emit (node:events:518:28)\n          at emitErrorEvent (node:_http_client:103:11)\n          at MockHttpSocket.socketErrorListener (node:_http_client:506:5)\n          at MockHttpSocket.emit (node:events:530:35)\n          at MockHttpSocket.emitEvent [as emit] (/Users/vincentperreard/Mathildanesth/node_modules/@mswjs/interceptors/src/interceptors/ClientRequest/MockHttpSocket.ts:152:12)\n          at Socket.emit (/Users/vincentperreard/Mathildanesth/node_modules/@mswjs/interceptors/src/interceptors/ClientRequest/MockHttpSocket.ts:271:14)\n          at Socket.emit (node:events:518:28)\n          at emitErrorNT (node:internal/streams/destroy:170:8)\n          at emitErrorCloseNT (node:internal/streams/destroy:129:3)\n          at processTicksAndRejections (node:internal/process/task_queues:90:21) {\n        type: 'XMLHttpRequest'\n      }\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at Object.dispatchError (node_modules/jsdom/lib/jsdom/living/xhr/xhr-utils.js:66:53)\n      at Request.<anonymous> (node_modules/jsdom/lib/jsdom/living/xhr/XMLHttpRequest-impl.js:655:18)\n      at ClientRequest.<anonymous> (node_modules/jsdom/lib/jsdom/living/helpers/http-request.js:121:14)\n      at MockHttpSocket.emitEvent [as emit] (node_modules/@mswjs/interceptors/src/interceptors/ClientRequest/MockHttpSocket.ts:152:12)\n      at Socket.emit (node_modules/@mswjs/interceptors/src/interceptors/ClientRequest/MockHttpSocket.ts:271:14)\n\n    console.error\n      [AuditService] Error creating audit entry: AxiosError {\n        message: 'Network Error',\n        name: 'AxiosError',\n        code: 'ERR_NETWORK',\n        config: {\n          transitional: {\n            silentJSONParsing: true,\n            forcedJSONParsing: true,\n            clarifyTimeoutError: false\n          },\n          adapter: [ 'xhr', 'http', 'fetch' ],\n          transformRequest: [ [Function: transformRequest] ],\n          transformResponse: [ [Function: transformResponse] ],\n          timeout: 0,\n          xsrfCookieName: 'XSRF-TOKEN',\n          xsrfHeaderName: 'X-XSRF-TOKEN',\n          maxContentLength: -1,\n          maxBodyLength: -1,\n          env: { FormData: [class FormData], Blob: [class Blob] },\n          validateStatus: [Function: validateStatus],\n          headers: Object [AxiosHeaders] {\n            Accept: 'application/json, text/plain, */*',\n            'Content-Type': 'application/json'\n          },\n          method: 'post',\n          url: '/api/audit/entries',\n          data: '{\"actionType\":\"QUOTA_TRANSFERRED\",\"userId\":\"user-123\",\"targetType\":\"quota\",\"description\":\"Transfert de undefined jour(s) de RECOVERY vers ANNUAL\",\"severity\":\"MEDIUM\",\"metadata\":{\"sourceType\":\"RECOVERY\",\"targetType\":\"ANNUAL\",\"targetAmount\":null,\"ratio\":1},\"userAgent\":\"Mozilla/5.0 (darwin) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/20.0.3\"}',\n          allowAbsoluteUrls: true\n        },\n        request: XMLHttpRequest {\n          open: [Function: open],\n          setRequestHeader: [Function: setRequestHeader],\n          send: [Function: send],\n          abort: [Function: abort],\n          getResponseHeader: [Function: getResponseHeader],\n          getAllResponseHeaders: [Function: getAllResponseHeaders],\n          overrideMimeType: [Function: overrideMimeType],\n          onreadystatechange: [Getter/Setter],\n          readyState: [Getter],\n          timeout: [Getter/Setter],\n          withCredentials: [Getter/Setter],\n          upload: XMLHttpRequestUpload {},\n          responseURL: [Getter],\n          status: [Getter],\n          statusText: [Getter],\n          responseType: [Getter/Setter],\n          response: [Getter],\n          responseText: [Getter],\n          responseXML: [Getter],\n          UNSENT: 0,\n          OPENED: 1,\n          HEADERS_RECEIVED: 2,\n          LOADING: 3,\n          DONE: 4,\n          [Symbol(SameObject caches)]: [Object: null prototype] { upload: XMLHttpRequestUpload {} }\n        }\n      }\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at AuditService.error [as createAuditEntry] (src/modules/leaves/services/AuditService.ts:317:21)\n      at QuotaAdvancedService.executeTransfer (src/modules/leaves/services/QuotaAdvancedService.ts:199:13)\n      at Object.<anonymous> (src/modules/leaves/services/__tests__/QuotaAdvancedService.test.ts:294:28)\n\n    console.error\n      Erreur lors de l'exécution du transfert: AxiosError {\n        message: 'Network Error',\n        name: 'AxiosError',\n        code: 'ERR_NETWORK',\n        config: {\n          transitional: {\n            silentJSONParsing: true,\n            forcedJSONParsing: true,\n            clarifyTimeoutError: false\n          },\n          adapter: [ 'xhr', 'http', 'fetch' ],\n          transformRequest: [ [Function: transformRequest] ],\n          transformResponse: [ [Function: transformResponse] ],\n          timeout: 0,\n          xsrfCookieName: 'XSRF-TOKEN',\n          xsrfHeaderName: 'X-XSRF-TOKEN',\n          maxContentLength: -1,\n          maxBodyLength: -1,\n          env: { FormData: [class FormData], Blob: [class Blob] },\n          validateStatus: [Function: validateStatus],\n          headers: Object [AxiosHeaders] {\n            Accept: 'application/json, text/plain, */*',\n            'Content-Type': 'application/json'\n          },\n          method: 'post',\n          url: '/api/audit/entries',\n          data: '{\"actionType\":\"QUOTA_TRANSFERRED\",\"userId\":\"user-123\",\"targetType\":\"quota\",\"description\":\"Transfert de undefined jour(s) de RECOVERY vers ANNUAL\",\"severity\":\"MEDIUM\",\"metadata\":{\"sourceType\":\"RECOVERY\",\"targetType\":\"ANNUAL\",\"targetAmount\":null,\"ratio\":1},\"userAgent\":\"Mozilla/5.0 (darwin) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/20.0.3\"}',\n          allowAbsoluteUrls: true\n        },\n        request: XMLHttpRequest {\n          open: [Function: open],\n          setRequestHeader: [Function: setRequestHeader],\n          send: [Function: send],\n          abort: [Function: abort],\n          getResponseHeader: [Function: getResponseHeader],\n          getAllResponseHeaders: [Function: getAllResponseHeaders],\n          overrideMimeType: [Function: overrideMimeType],\n          onreadystatechange: [Getter/Setter],\n          readyState: [Getter],\n          timeout: [Getter/Setter],\n          withCredentials: [Getter/Setter],\n          upload: XMLHttpRequestUpload {},\n          responseURL: [Getter],\n          status: [Getter],\n          statusText: [Getter],\n          responseType: [Getter/Setter],\n          response: [Getter],\n          responseText: [Getter],\n          responseXML: [Getter],\n          UNSENT: 0,\n          OPENED: 1,\n          HEADERS_RECEIVED: 2,\n          LOADING: 3,\n          DONE: 4,\n          [Symbol(SameObject caches)]: [Object: null prototype] { upload: XMLHttpRequestUpload {} }\n        }\n      }\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at QuotaAdvancedService.error [as executeTransfer] (src/modules/leaves/services/QuotaAdvancedService.ts:232:21)\n      at Object.<anonymous> (src/modules/leaves/services/__tests__/QuotaAdvancedService.test.ts:294:28)\n\n    console.error\n      Erreur lors de l'exécution du transfert: Error: Quota insuffisant simulé\n          at QuotaAdvancedService.executeTransfer (/Users/vincentperreard/Mathildanesth/src/modules/leaves/services/QuotaAdvancedService.ts:175:23)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n          at Object.<anonymous> (/Users/vincentperreard/Mathildanesth/src/modules/leaves/services/__tests__/QuotaAdvancedService.test.ts:316:13)\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at QuotaAdvancedService.error [as executeTransfer] (src/modules/leaves/services/QuotaAdvancedService.ts:232:21)\n      at Object.<anonymous> (src/modules/leaves/services/__tests__/QuotaAdvancedService.test.ts:316:13)\n\n    console.warn\n      [MSW] Warning: intercepted a request without a matching request handler:\n      \n        • POST /api/audit/entries\n      \n        • Request body: {\"actionType\":\"QUOTA_CARRIED_OVER\",\"userId\":\"user-123\",\"targetId\":\"user-123\",\"targetType\":\"quota\",\"description\":\"Report de 9 jour(s) de ANNUAL de 2024 vers 2025\",\"severity\":\"MEDIUM\",\"metadata\":{\"leaveType\":\"ANNUAL\",\"fromYear\":2024,\"toYear\":2025,\"amount\":9,\"expiryDate\":\"2035-12-30T23:00:00.000Z\",\"ruleId\":\"carry-rule-1\"},\"userAgent\":\"Mozilla/5.0 (darwin) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/20.0.3\"}\n      \n      If you still wish to intercept this unhandled request, please create a request handler for it.\n      Read more: https://mswjs.io/docs/getting-started/mocks\n\n      at Object.warn (node_modules/msw/src/core/utils/internal/devUtils.ts:18:11)\n      at warn (node_modules/msw/src/core/utils/request/onUnhandledRequest.ts:50:18)\n      at applyStrategy (node_modules/msw/src/core/utils/request/onUnhandledRequest.ts:79:5)\n      at handleRequest (node_modules/msw/src/core/utils/handleRequest.ts:79:5)\n      at _Emitter.<anonymous> (node_modules/msw/src/node/SetupServerCommonApi.ts:60:26)\n      at emitAsync (node_modules/@mswjs/interceptors/src/utils/emitAsync.ts:23:5)\n      at node_modules/@mswjs/interceptors/src/utils/handleRequest.ts:125:5\n      at until (node_modules/@open-draft/until/src/until.ts:23:18)\n      at handleRequest (node_modules/@mswjs/interceptors/src/utils/handleRequest.ts:114:18)\n      at XMLHttpRequestController.xhrRequestController.onRequest (node_modules/@mswjs/interceptors/src/interceptors/XMLHttpRequest/XMLHttpRequestProxy.ts:64:34)\n\n    console.error\n      Error: AggregateError\n          at Object.dispatchError (/Users/vincentperreard/Mathildanesth/node_modules/jsdom/lib/jsdom/living/xhr/xhr-utils.js:63:19)\n          at Request.<anonymous> (/Users/vincentperreard/Mathildanesth/node_modules/jsdom/lib/jsdom/living/xhr/XMLHttpRequest-impl.js:655:18)\n          at Request.emit (node:events:530:35)\n          at ClientRequest.<anonymous> (/Users/vincentperreard/Mathildanesth/node_modules/jsdom/lib/jsdom/living/helpers/http-request.js:121:14)\n          at ClientRequest.emit (node:events:518:28)\n          at emitErrorEvent (node:_http_client:103:11)\n          at MockHttpSocket.socketErrorListener (node:_http_client:506:5)\n          at MockHttpSocket.emit (node:events:530:35)\n          at MockHttpSocket.emitEvent [as emit] (/Users/vincentperreard/Mathildanesth/node_modules/@mswjs/interceptors/src/interceptors/ClientRequest/MockHttpSocket.ts:152:12)\n          at Socket.emit (/Users/vincentperreard/Mathildanesth/node_modules/@mswjs/interceptors/src/interceptors/ClientRequest/MockHttpSocket.ts:271:14)\n          at Socket.emit (node:events:518:28)\n          at emitErrorNT (node:internal/streams/destroy:170:8)\n          at emitErrorCloseNT (node:internal/streams/destroy:129:3)\n          at processTicksAndRejections (node:internal/process/task_queues:90:21) {\n        type: 'XMLHttpRequest'\n      }\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at Object.dispatchError (node_modules/jsdom/lib/jsdom/living/xhr/xhr-utils.js:66:53)\n      at Request.<anonymous> (node_modules/jsdom/lib/jsdom/living/xhr/XMLHttpRequest-impl.js:655:18)\n      at ClientRequest.<anonymous> (node_modules/jsdom/lib/jsdom/living/helpers/http-request.js:121:14)\n      at MockHttpSocket.emitEvent [as emit] (node_modules/@mswjs/interceptors/src/interceptors/ClientRequest/MockHttpSocket.ts:152:12)\n      at Socket.emit (node_modules/@mswjs/interceptors/src/interceptors/ClientRequest/MockHttpSocket.ts:271:14)\n\n    console.error\n      [AuditService] Error creating audit entry: AxiosError {\n        message: 'Network Error',\n        name: 'AxiosError',\n        code: 'ERR_NETWORK',\n        config: {\n          transitional: {\n            silentJSONParsing: true,\n            forcedJSONParsing: true,\n            clarifyTimeoutError: false\n          },\n          adapter: [ 'xhr', 'http', 'fetch' ],\n          transformRequest: [ [Function: transformRequest] ],\n          transformResponse: [ [Function: transformResponse] ],\n          timeout: 0,\n          xsrfCookieName: 'XSRF-TOKEN',\n          xsrfHeaderName: 'X-XSRF-TOKEN',\n          maxContentLength: -1,\n          maxBodyLength: -1,\n          env: { FormData: [class FormData], Blob: [class Blob] },\n          validateStatus: [Function: validateStatus],\n          headers: Object [AxiosHeaders] {\n            Accept: 'application/json, text/plain, */*',\n            'Content-Type': 'application/json'\n          },\n          method: 'post',\n          url: '/api/audit/entries',\n          data: '{\"actionType\":\"QUOTA_CARRIED_OVER\",\"userId\":\"user-123\",\"targetId\":\"user-123\",\"targetType\":\"quota\",\"description\":\"Report de 9 jour(s) de ANNUAL de 2024 vers 2025\",\"severity\":\"MEDIUM\",\"metadata\":{\"leaveType\":\"ANNUAL\",\"fromYear\":2024,\"toYear\":2025,\"amount\":9,\"expiryDate\":\"2035-12-30T23:00:00.000Z\",\"ruleId\":\"carry-rule-1\"},\"userAgent\":\"Mozilla/5.0 (darwin) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/20.0.3\"}',\n          allowAbsoluteUrls: true\n        },\n        request: XMLHttpRequest {\n          open: [Function: open],\n          setRequestHeader: [Function: setRequestHeader],\n          send: [Function: send],\n          abort: [Function: abort],\n          getResponseHeader: [Function: getResponseHeader],\n          getAllResponseHeaders: [Function: getAllResponseHeaders],\n          overrideMimeType: [Function: overrideMimeType],\n          onreadystatechange: [Getter/Setter],\n          readyState: [Getter],\n          timeout: [Getter/Setter],\n          withCredentials: [Getter/Setter],\n          upload: XMLHttpRequestUpload {},\n          responseURL: [Getter],\n          status: [Getter],\n          statusText: [Getter],\n          responseType: [Getter/Setter],\n          response: [Getter],\n          responseText: [Getter],\n          responseXML: [Getter],\n          UNSENT: 0,\n          OPENED: 1,\n          HEADERS_RECEIVED: 2,\n          LOADING: 3,\n          DONE: 4,\n          [Symbol(SameObject caches)]: [Object: null prototype] { upload: XMLHttpRequestUpload {} }\n        }\n      }\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at AuditService.error [as createAuditEntry] (src/modules/leaves/services/AuditService.ts:317:21)\n      at QuotaAdvancedService.executeCarryOver (src/modules/leaves/services/QuotaAdvancedService.ts:359:13)\n      at Object.<anonymous> (src/modules/leaves/services/__tests__/QuotaAdvancedService.test.ts:371:28)\n\n    console.error\n      Erreur lors de l'exécution du report: AxiosError {\n        message: 'Network Error',\n        name: 'AxiosError',\n        code: 'ERR_NETWORK',\n        config: {\n          transitional: {\n            silentJSONParsing: true,\n            forcedJSONParsing: true,\n            clarifyTimeoutError: false\n          },\n          adapter: [ 'xhr', 'http', 'fetch' ],\n          transformRequest: [ [Function: transformRequest] ],\n          transformResponse: [ [Function: transformResponse] ],\n          timeout: 0,\n          xsrfCookieName: 'XSRF-TOKEN',\n          xsrfHeaderName: 'X-XSRF-TOKEN',\n          maxContentLength: -1,\n          maxBodyLength: -1,\n          env: { FormData: [class FormData], Blob: [class Blob] },\n          validateStatus: [Function: validateStatus],\n          headers: Object [AxiosHeaders] {\n            Accept: 'application/json, text/plain, */*',\n            'Content-Type': 'application/json'\n          },\n          method: 'post',\n          url: '/api/audit/entries',\n          data: '{\"actionType\":\"QUOTA_CARRIED_OVER\",\"userId\":\"user-123\",\"targetId\":\"user-123\",\"targetType\":\"quota\",\"description\":\"Report de 9 jour(s) de ANNUAL de 2024 vers 2025\",\"severity\":\"MEDIUM\",\"metadata\":{\"leaveType\":\"ANNUAL\",\"fromYear\":2024,\"toYear\":2025,\"amount\":9,\"expiryDate\":\"2035-12-30T23:00:00.000Z\",\"ruleId\":\"carry-rule-1\"},\"userAgent\":\"Mozilla/5.0 (darwin) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/20.0.3\"}',\n          allowAbsoluteUrls: true\n        },\n        request: XMLHttpRequest {\n          open: [Function: open],\n          setRequestHeader: [Function: setRequestHeader],\n          send: [Function: send],\n          abort: [Function: abort],\n          getResponseHeader: [Function: getResponseHeader],\n          getAllResponseHeaders: [Function: getAllResponseHeaders],\n          overrideMimeType: [Function: overrideMimeType],\n          onreadystatechange: [Getter/Setter],\n          readyState: [Getter],\n          timeout: [Getter/Setter],\n          withCredentials: [Getter/Setter],\n          upload: XMLHttpRequestUpload {},\n          responseURL: [Getter],\n          status: [Getter],\n          statusText: [Getter],\n          responseType: [Getter/Setter],\n          response: [Getter],\n          responseText: [Getter],\n          responseXML: [Getter],\n          UNSENT: 0,\n          OPENED: 1,\n          HEADERS_RECEIVED: 2,\n          LOADING: 3,\n          DONE: 4,\n          [Symbol(SameObject caches)]: [Object: null prototype] { upload: XMLHttpRequestUpload {} }\n        }\n      }\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at QuotaAdvancedService.error [as executeCarryOver] (src/modules/leaves/services/QuotaAdvancedService.ts:392:21)\n      at Object.<anonymous> (src/modules/leaves/services/__tests__/QuotaAdvancedService.test.ts:371:28)\n\n    console.error\n      Erreur lors de l'exécution du report: Error: Aucun jour à reporter.\n          at QuotaAdvancedService.executeCarryOver (/Users/vincentperreard/Mathildanesth/src/modules/leaves/services/QuotaAdvancedService.ts:341:23)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n          at Object.<anonymous> (/Users/vincentperreard/Mathildanesth/src/modules/leaves/services/__tests__/QuotaAdvancedService.test.ts:386:13)\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at QuotaAdvancedService.error [as executeCarryOver] (src/modules/leaves/services/QuotaAdvancedService.ts:392:21)\n      at Object.<anonymous> (src/modules/leaves/services/__tests__/QuotaAdvancedService.test.ts:386:13)\n\n    console.error\n      Erreur lors de la récupération de l'état amélioré des quotas: Error: Network Error\n          at Object.<anonymous> (/Users/vincentperreard/Mathildanesth/src/modules/leaves/services/__tests__/QuotaAdvancedService.test.ts:421:60)\n          at Promise.then.completed (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:316:40)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n          at _runTest (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:121:9)\n          at run (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:74:19)\n          at runTestInternal (/Users/vincentperreard/Mathildanesth/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/Users/vincentperreard/Mathildanesth/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/Users/vincentperreard/Mathildanesth/node_modules/jest-runner/build/testWorker.js:106:12)\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at QuotaAdvancedService.error [as getEnhancedQuotaState] (src/modules/leaves/services/QuotaAdvancedService.ts:542:21)\n      at Object.<anonymous> (src/modules/leaves/services/__tests__/QuotaAdvancedService.test.ts:423:13)\n\n  ● QuotaAdvancedService › executeTransfer › devrait exécuter un transfert valide\n\n    AxiosError: Network Error\n\n      305 |\n      306 |             // Envoyer l'entrée à l'API\n    > 307 |             const response = await axios.post(`${this.apiBaseUrl}/entries`, enhancedEntry, {\n          |                              ^\n      308 |                 headers: this.defaultHeaders\n      309 |             });\n      310 |\n\n      at XMLHttpRequest.handleError (node_modules/axios/lib/adapters/xhr.js:110:14)\n      at XMLHttpRequest.invokeTheCallbackFunction (node_modules/jsdom/lib/jsdom/living/generated/EventHandlerNonNull.js:14:28)\n      at XMLHttpRequest.<anonymous> (node_modules/jsdom/lib/jsdom/living/helpers/create-event-accessor.js:35:32)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at XMLHttpRequestImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at fireAnEvent (node_modules/jsdom/lib/jsdom/living/helpers/events.js:18:36)\n      at requestErrorSteps (node_modules/jsdom/lib/jsdom/living/xhr/xhr-utils.js:131:3)\n      at Object.dispatchError (node_modules/jsdom/lib/jsdom/living/xhr/xhr-utils.js:60:3)\n      at Request.<anonymous> (node_modules/jsdom/lib/jsdom/living/xhr/XMLHttpRequest-impl.js:655:18)\n      at ClientRequest.<anonymous> (node_modules/jsdom/lib/jsdom/living/helpers/http-request.js:121:14)\n      at MockHttpSocket.emitEvent [as emit] (node_modules/@mswjs/interceptors/src/interceptors/ClientRequest/MockHttpSocket.ts:152:12)\n      at Socket.emit (node_modules/@mswjs/interceptors/src/interceptors/ClientRequest/MockHttpSocket.ts:271:14)\n      at Axios.request (node_modules/axios/lib/core/Axios.js:45:41)\n      at AuditService.createAuditEntry (src/modules/leaves/services/AuditService.ts:307:30)\n      at QuotaAdvancedService.executeTransfer (src/modules/leaves/services/QuotaAdvancedService.ts:199:13)\n      at Object.<anonymous> (src/modules/leaves/services/__tests__/QuotaAdvancedService.test.ts:294:28)\n\n  ● QuotaAdvancedService › executeCarryOver › devrait exécuter un report valide\n\n    AxiosError: Network Error\n\n      305 |\n      306 |             // Envoyer l'entrée à l'API\n    > 307 |             const response = await axios.post(`${this.apiBaseUrl}/entries`, enhancedEntry, {\n          |                              ^\n      308 |                 headers: this.defaultHeaders\n      309 |             });\n      310 |\n\n      at XMLHttpRequest.handleError (node_modules/axios/lib/adapters/xhr.js:110:14)\n      at XMLHttpRequest.invokeTheCallbackFunction (node_modules/jsdom/lib/jsdom/living/generated/EventHandlerNonNull.js:14:28)\n      at XMLHttpRequest.<anonymous> (node_modules/jsdom/lib/jsdom/living/helpers/create-event-accessor.js:35:32)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at XMLHttpRequestImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at fireAnEvent (node_modules/jsdom/lib/jsdom/living/helpers/events.js:18:36)\n      at requestErrorSteps (node_modules/jsdom/lib/jsdom/living/xhr/xhr-utils.js:131:3)\n      at Object.dispatchError (node_modules/jsdom/lib/jsdom/living/xhr/xhr-utils.js:60:3)\n      at Request.<anonymous> (node_modules/jsdom/lib/jsdom/living/xhr/XMLHttpRequest-impl.js:655:18)\n      at ClientRequest.<anonymous> (node_modules/jsdom/lib/jsdom/living/helpers/http-request.js:121:14)\n      at MockHttpSocket.emitEvent [as emit] (node_modules/@mswjs/interceptors/src/interceptors/ClientRequest/MockHttpSocket.ts:152:12)\n      at Socket.emit (node_modules/@mswjs/interceptors/src/interceptors/ClientRequest/MockHttpSocket.ts:271:14)\n      at Axios.request (node_modules/axios/lib/core/Axios.js:45:41)\n      at AuditService.createAuditEntry (src/modules/leaves/services/AuditService.ts:307:30)\n      at QuotaAdvancedService.executeCarryOver (src/modules/leaves/services/QuotaAdvancedService.ts:359:13)\n      at Object.<anonymous> (src/modules/leaves/services/__tests__/QuotaAdvancedService.test.ts:371:28)\n\n(node:80199) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.\n(Use `node --trace-deprecation ...` to show where the warning was created)\n(node:80194) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.\n(Use `node --trace-deprecation ...` to show where the warning was created)\n(node:80193) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.\n(Use `node --trace-deprecation ...` to show where the warning was created)\nFAIL src/modules/leaves/hooks/useConflictDetection.test.ts\n  ● Console\n\n    console.log\n      jest.polyfills.js loaded and applied.\n\n      at Object.<anonymous> (jest.polyfills.js:247:9)\n\n    console.log\n      jest.setup.js loaded and mocks applied.\n\n      at Object.log (jest.setup.js:126:9)\n\n  ● useConflictDetection › devrait initialiser correctement le hook\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/leaves/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › validateDates › devrait valider correctement des dates valides\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/leaves/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › validateDates › devrait rejeter des dates invalides - startDate null\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/leaves/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › validateDates › devrait rejeter des dates invalides - endDate null\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/leaves/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › validateDates › devrait rejeter des dates invalides - date de début après date de fin\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/leaves/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › validateDates › devrait rejeter des dates lorsque la validation échoue\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/leaves/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › checkConflicts › devrait vérifier les conflits et mettre à jour l'état - sans conflits\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/leaves/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › checkConflicts › devrait vérifier les conflits et mettre à jour l'état - avec conflits\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/leaves/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › checkConflicts › devrait gérer les erreurs lors de la vérification des conflits\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/leaves/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › checkConflicts › devrait rejeter avec une erreur si les dates sont invalides\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/leaves/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › checkConflicts › ne devrait pas appeler checkLeaveConflicts si les dates sont invalides\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/leaves/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › checkConflicts › devrait mettre à jour les conflits lorsque le service renvoie des conflits\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/leaves/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › checkConflicts › devrait gérer les erreurs du service\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/leaves/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › checkConflicts › ne devrait pas appeler le service si les dates sont invalides\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/leaves/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › getConflictsByType › devrait filtrer les conflits par type\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/leaves/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › resolveConflict › devrait supprimer un conflit et mettre à jour l'état des conflits bloquants\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/leaves/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › resetConflicts › devrait réinitialiser l'état des conflits\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/leaves/hooks/useConflictDetection.test.ts:93:14)\n\n(node:80196) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.\n(Use `node --trace-deprecation ...` to show where the warning was created)\nFAIL src/modules/leaves/services/__tests__/conflictRecommendationService.test.ts\n  ● Console\n\n    console.log\n      jest.polyfills.js loaded and applied.\n\n      at Object.<anonymous> (jest.polyfills.js:247:9)\n\n    console.log\n      jest.setup.js loaded and mocks applied.\n\n      at Object.log (jest.setup.js:126:9)\n\n    console.log\n      [Service Debug] analyzeConflicts - conflicts.length: 0\n\n      at ConflictRecommendationService.log [as analyzeConflicts] (src/modules/leaves/services/conflictRecommendationService.ts:74:17)\n\n    console.log\n      [Service Debug] Aucun conflit, appel de createEmptyAnalysisResult\n\n      at ConflictRecommendationService.log [as analyzeConflicts] (src/modules/leaves/services/conflictRecommendationService.ts:76:21)\n\n    console.log\n      [Service Debug] emptyResult: {\"recommendations\":[],\"automatedResolutionsCount\":0,\"manualResolutionsCount\":0,\"priorityDistribution\":{},\"highestPriorityConflicts\":[]}\n\n      at ConflictRecommendationService.log [as analyzeConflicts] (src/modules/leaves/services/conflictRecommendationService.ts:78:21)\n\n    console.log\n      [Service Debug] analyzeConflicts - conflicts.length: 2\n\n      at ConflictRecommendationService.log [as analyzeConflicts] (src/modules/leaves/services/conflictRecommendationService.ts:74:17)\n\n    console.log\n      [Service Debug] analyzeConflicts - generating recommendations...\n\n      at ConflictRecommendationService.log [as analyzeConflicts] (src/modules/leaves/services/conflictRecommendationService.ts:83:21)\n\n    console.log\n      [Service Debug] analyzeConflicts - generated recommendations: [{\"conflictId\":\"conflict1\",\"priority\":3,\"strategies\":[{\"strategy\":\"RESCHEDULE_BEFORE\",\"description\":\"Reprogrammer une semaine avant (25/05/2025 - 31/05/2025)\",\"confidence\":75,\"alternativeDates\":[{\"startDate\":\"25/05/2025\",\"endDate\":\"31/05/2025\"}]},{\"strategy\":\"RESCHEDULE_AFTER\",\"description\":\"Reprogrammer une semaine après (08/06/2025 - 14/06/2025)\",\"confidence\":75,\"alternativeDates\":[{\"startDate\":\"08/06/2025\",\"endDate\":\"14/06/2025\"}]},{\"strategy\":\"REJECT\",\"description\":\"Rejeter la demande de congé en raison du conflit\",\"confidence\":40}],\"automaticResolution\":false,\"explanation\":\"Ce conflit est de priorité moyenne. Une intervention manuelle est recommandée. Stratégie principale recommandée : Reprogrammer une semaine avant (25/05/2025 - 31/05/2025). Alternative(s) possible(s) : Reprogrammer une semaine après (08/06/2025 - 14/06/2025), Rejeter la demande de congé en raison du conflit.\",\"resolutionStatus\":\"PENDING\"},{\"conflictId\":\"conflict2\",\"priority\":5,\"strategies\":[{\"strategy\":\"REJECT\",\"description\":\"Rejeter la demande de congé en raison du conflit\",\"confidence\":85},{\"strategy\":\"RESCHEDULE_AFTER\",\"description\":\"Reprogrammer une semaine après (12/06/2025 - 17/06/2025)\",\"confidence\":75,\"alternativeDates\":[{\"startDate\":\"12/06/2025\",\"endDate\":\"17/06/2025\"}]}],\"automaticResolution\":false,\"explanation\":\"Ce conflit est de priorité très élevée. Une intervention manuelle est recommandée. Stratégie principale recommandée : Rejeter la demande de congé en raison du conflit. Alternative(s) possible(s) : Reprogrammer une semaine après (12/06/2025 - 17/06/2025).\",\"resolutionStatus\":\"PENDING\"}]\n\n      at ConflictRecommendationService.log [as analyzeConflicts] (src/modules/leaves/services/conflictRecommendationService.ts:87:21)\n\n    console.log\n      [Service Debug] analyzeConflicts - conflicts.length: 2\n\n      at ConflictRecommendationService.log [as analyzeConflicts] (src/modules/leaves/services/conflictRecommendationService.ts:74:17)\n\n    console.log\n      [Service Debug] analyzeConflicts - generating recommendations...\n\n      at ConflictRecommendationService.log [as analyzeConflicts] (src/modules/leaves/services/conflictRecommendationService.ts:83:21)\n\n    console.log\n      [Service Debug] analyzeConflicts - generated recommendations: [{\"conflictId\":\"conflict1\",\"priority\":3,\"strategies\":[{\"strategy\":\"RESCHEDULE_BEFORE\",\"description\":\"Reprogrammer une semaine avant (25/05/2025 - 31/05/2025)\",\"confidence\":75,\"alternativeDates\":[{\"startDate\":\"25/05/2025\",\"endDate\":\"31/05/2025\"}]},{\"strategy\":\"RESCHEDULE_AFTER\",\"description\":\"Reprogrammer une semaine après (08/06/2025 - 14/06/2025)\",\"confidence\":75,\"alternativeDates\":[{\"startDate\":\"08/06/2025\",\"endDate\":\"14/06/2025\"}]},{\"strategy\":\"REJECT\",\"description\":\"Rejeter la demande de congé en raison du conflit\",\"confidence\":40}],\"automaticResolution\":true,\"explanation\":\"Ce conflit est de priorité moyenne. La résolution automatique est possible. Stratégie principale recommandée : Reprogrammer une semaine avant (25/05/2025 - 31/05/2025). Alternative(s) possible(s) : Reprogrammer une semaine après (08/06/2025 - 14/06/2025), Rejeter la demande de congé en raison du conflit.\",\"resolutionStatus\":\"PENDING\"},{\"conflictId\":\"conflict2\",\"priority\":5,\"strategies\":[{\"strategy\":\"REJECT\",\"description\":\"Rejeter la demande de congé en raison du conflit\",\"confidence\":85},{\"strategy\":\"RESCHEDULE_AFTER\",\"description\":\"Reprogrammer une semaine après (12/06/2025 - 17/06/2025)\",\"confidence\":75,\"alternativeDates\":[{\"startDate\":\"12/06/2025\",\"endDate\":\"17/06/2025\"}]}],\"automaticResolution\":false,\"explanation\":\"Ce conflit est de priorité très élevée. Une intervention manuelle est recommandée. Stratégie principale recommandée : Rejeter la demande de congé en raison du conflit. Alternative(s) possible(s) : Reprogrammer une semaine après (12/06/2025 - 17/06/2025).\",\"resolutionStatus\":\"PENDING\"}]\n\n      at ConflictRecommendationService.log [as analyzeConflicts] (src/modules/leaves/services/conflictRecommendationService.ts:87:21)\n\n    console.log\n      [Service Debug] analyzeConflicts - conflicts.length: 2\n\n      at ConflictRecommendationService.log [as analyzeConflicts] (src/modules/leaves/services/conflictRecommendationService.ts:74:17)\n\n    console.log\n      [Service Debug] analyzeConflicts - generating recommendations...\n\n      at ConflictRecommendationService.log [as analyzeConflicts] (src/modules/leaves/services/conflictRecommendationService.ts:83:21)\n\n    console.log\n      [Service Debug] analyzeConflicts - generated recommendations: [{\"conflictId\":\"conflict1\",\"priority\":3,\"strategies\":[{\"strategy\":\"RESCHEDULE_BEFORE\",\"description\":\"Reprogrammer une semaine avant (25/05/2025 - 31/05/2025)\",\"confidence\":75,\"alternativeDates\":[{\"startDate\":\"25/05/2025\",\"endDate\":\"31/05/2025\"}]},{\"strategy\":\"RESCHEDULE_AFTER\",\"description\":\"Reprogrammer une semaine après (08/06/2025 - 14/06/2025)\",\"confidence\":75,\"alternativeDates\":[{\"startDate\":\"08/06/2025\",\"endDate\":\"14/06/2025\"}]},{\"strategy\":\"REJECT\",\"description\":\"Rejeter la demande de congé en raison du conflit\",\"confidence\":40}],\"automaticResolution\":true,\"explanation\":\"Ce conflit est de priorité moyenne. La résolution automatique est possible. Stratégie principale recommandée : Reprogrammer une semaine avant (25/05/2025 - 31/05/2025). Alternative(s) possible(s) : Reprogrammer une semaine après (08/06/2025 - 14/06/2025), Rejeter la demande de congé en raison du conflit.\",\"resolutionStatus\":\"PENDING\"},{\"conflictId\":\"conflict2\",\"priority\":5,\"strategies\":[{\"strategy\":\"REJECT\",\"description\":\"Rejeter la demande de congé en raison du conflit\",\"confidence\":85},{\"strategy\":\"RESCHEDULE_AFTER\",\"description\":\"Reprogrammer une semaine après (12/06/2025 - 17/06/2025)\",\"confidence\":75,\"alternativeDates\":[{\"startDate\":\"12/06/2025\",\"endDate\":\"17/06/2025\"}]}],\"automaticResolution\":false,\"explanation\":\"Ce conflit est de priorité très élevée. Une intervention manuelle est recommandée. Stratégie principale recommandée : Rejeter la demande de congé en raison du conflit. Alternative(s) possible(s) : Reprogrammer une semaine après (12/06/2025 - 17/06/2025).\",\"resolutionStatus\":\"PENDING\"}]\n\n      at ConflictRecommendationService.log [as analyzeConflicts] (src/modules/leaves/services/conflictRecommendationService.ts:87:21)\n\n    console.log\n      [Service Debug] analyzeConflicts - conflicts.length: 2\n\n      at ConflictRecommendationService.log [as analyzeConflicts] (src/modules/leaves/services/conflictRecommendationService.ts:74:17)\n\n    console.log\n      [Service Debug] analyzeConflicts - generating recommendations...\n\n      at ConflictRecommendationService.log [as analyzeConflicts] (src/modules/leaves/services/conflictRecommendationService.ts:83:21)\n\n    console.log\n      [Service Debug] analyzeConflicts - generated recommendations: [{\"conflictId\":\"conflict1\",\"priority\":3,\"strategies\":[{\"strategy\":\"RESCHEDULE_BEFORE\",\"description\":\"Reprogrammer une semaine avant (25/05/2025 - 31/05/2025)\",\"confidence\":75,\"alternativeDates\":[{\"startDate\":\"25/05/2025\",\"endDate\":\"31/05/2025\"}]},{\"strategy\":\"RESCHEDULE_AFTER\",\"description\":\"Reprogrammer une semaine après (08/06/2025 - 14/06/2025)\",\"confidence\":75,\"alternativeDates\":[{\"startDate\":\"08/06/2025\",\"endDate\":\"14/06/2025\"}]},{\"strategy\":\"REJECT\",\"description\":\"Rejeter la demande de congé en raison du conflit\",\"confidence\":40}],\"automaticResolution\":true,\"explanation\":\"Ce conflit est de priorité moyenne. La résolution automatique est possible. Stratégie principale recommandée : Reprogrammer une semaine avant (25/05/2025 - 31/05/2025). Alternative(s) possible(s) : Reprogrammer une semaine après (08/06/2025 - 14/06/2025), Rejeter la demande de congé en raison du conflit.\",\"resolutionStatus\":\"PENDING\"},{\"conflictId\":\"conflict2\",\"priority\":5,\"strategies\":[{\"strategy\":\"REJECT\",\"description\":\"Rejeter la demande de congé en raison du conflit\",\"confidence\":85},{\"strategy\":\"RESCHEDULE_AFTER\",\"description\":\"Reprogrammer une semaine après (12/06/2025 - 17/06/2025)\",\"confidence\":75,\"alternativeDates\":[{\"startDate\":\"12/06/2025\",\"endDate\":\"17/06/2025\"}]}],\"automaticResolution\":false,\"explanation\":\"Ce conflit est de priorité très élevée. Une intervention manuelle est recommandée. Stratégie principale recommandée : Rejeter la demande de congé en raison du conflit. Alternative(s) possible(s) : Reprogrammer une semaine après (12/06/2025 - 17/06/2025).\",\"resolutionStatus\":\"PENDING\"}]\n\n      at ConflictRecommendationService.log [as analyzeConflicts] (src/modules/leaves/services/conflictRecommendationService.ts:87:21)\n\n  ● ConflictRecommendationService › analyzeConflicts › devrait identifier correctement les résolutions automatiques possibles\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n      134 |\n      135 |             // Vérifier que l'événement a été émis pour les résolutions automatiques\n    > 136 |             expect(mockEventBus.emit).toHaveBeenCalled();\n          |                                       ^\n      137 |         });\n      138 |\n      139 |         it('devrait calculer correctement la distribution des priorités', () => {\n\n      at Object.<anonymous> (src/modules/leaves/services/__tests__/conflictRecommendationService.test.ts:136:39)\n\n  ● ConflictRecommendationService › updateRules › devrait mettre à jour les règles et émettre un événement\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: {\"data\": {\"updatedBy\": \"user\", \"updatedRules\": [\"priorityRules\"]}, \"type\": \"conflict.rules.updated\"}\n\n    Number of calls: 0\n\n      186 |\n      187 |             // Vérifier que l'événement a été émis\n    > 188 |             expect(mockEventBus.emit).toHaveBeenCalledWith({\n          |                                       ^\n      189 |                 type: 'conflict.rules.updated',\n      190 |                 data: {\n      191 |                     updatedRules: Object.keys(newRules),\n\n      at Object.<anonymous> (src/modules/leaves/services/__tests__/conflictRecommendationService.test.ts:188:39)\n\n  ● ConflictRecommendationService › resetRulesToDefault › devrait réinitialiser les règles aux valeurs par défaut\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: {\"data\": {\"resetToDefault\": true, \"updatedBy\": \"user\", \"updatedRules\": [\"all\"]}, \"type\": \"conflict.rules.updated\"}\n\n    Number of calls: 0\n\n      215 |\n      216 |             // Vérifier que l'événement a été émis\n    > 217 |             expect(mockEventBus.emit).toHaveBeenCalledWith({\n          |                                       ^\n      218 |                 type: 'conflict.rules.updated',\n      219 |                 data: {\n      220 |                     updatedRules: ['all'],\n\n      at Object.<anonymous> (src/modules/leaves/services/__tests__/conflictRecommendationService.test.ts:217:39)\n\n(node:80195) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.\n(Use `node --trace-deprecation ...` to show where the warning was created)\nFAIL src/modules/leaves/services/__tests__/leaveCalculator.comprehensive.test.ts\n  ● Console\n\n    console.log\n      jest.polyfills.js loaded and applied.\n\n      at Object.<anonymous> (jest.polyfills.js:247:9)\n\n    console.log\n      jest.setup.js loaded and mocks applied.\n\n      at Object.log (jest.setup.js:126:9)\n\n    console.log\n      Initializing console logger for client.\n\n      at log (src/utils/logger.ts:45:21)\n\n    console.info\n      Starting leave counted days calculation... {\n        startDate: '05/08/2024',\n        endDate: '09/08/2024',\n        scheduleId: 1,\n        isHalfDay: false,\n        halfDayPeriod: undefined,\n        options: undefined\n      }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:140:16)\n\n    console.info\n      Fetched 0 public holidays for the period.\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:179:16)\n\n    console.info\n      Leave counted days calculation successful { countedDays: 5, workDays: 5, scheduleId: 1 }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:345:16)\n\n    console.info\n      Starting leave counted days calculation... {\n        startDate: '05/08/2024',\n        endDate: '11/08/2024',\n        scheduleId: 1,\n        isHalfDay: false,\n        halfDayPeriod: undefined,\n        options: undefined\n      }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:140:16)\n\n    console.info\n      Fetched 0 public holidays for the period.\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:179:16)\n\n    console.info\n      Leave counted days calculation successful { countedDays: 5, workDays: 5, scheduleId: 1 }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:345:16)\n\n    console.info\n      Starting leave counted days calculation... {\n        startDate: '05/08/2024',\n        endDate: '05/08/2024',\n        scheduleId: 1,\n        isHalfDay: false,\n        halfDayPeriod: undefined,\n        options: undefined\n      }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:140:16)\n\n    console.info\n      Fetched 0 public holidays for the period.\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:179:16)\n\n    console.info\n      Leave counted days calculation successful { countedDays: 1, workDays: 1, scheduleId: 1 }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:345:16)\n\n    console.info\n      Starting leave counted days calculation... {\n        startDate: '10/08/2024',\n        endDate: '11/08/2024',\n        scheduleId: 1,\n        isHalfDay: false,\n        halfDayPeriod: undefined,\n        options: undefined\n      }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:140:16)\n\n    console.info\n      Fetched 0 public holidays for the period.\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:179:16)\n\n    console.info\n      Leave counted days calculation successful { countedDays: 0, workDays: 0, scheduleId: 1 }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:345:16)\n\n    console.warn\n      Invalid dates provided to calculateLeaveCountedDays {\n        startDateInput: 2024-08-10T00:00:00.000Z,\n        endDateInput: 2024-08-05T00:00:00.000Z\n      }\n\n      117 |         // Vérifier que la date de fin est après la date de début\n      118 |         if (isAfter(startDate, endDate)) {\n    > 119 |             logger.warn('Invalid dates provided to calculateLeaveCountedDays', { startDateInput, endDateInput });\n          |                    ^\n      120 |             return null;\n      121 |         }\n      122 |\n\n      at warn (src/modules/leaves/services/leaveCalculator.ts:119:20)\n      at Object.<anonymous> (src/modules/leaves/services/__tests__/leaveCalculator.comprehensive.test.ts:93:28)\n\n    console.info\n      Starting leave counted days calculation... {\n        startDate: '05/08/2024',\n        endDate: '09/08/2024',\n        scheduleId: 1,\n        isHalfDay: false,\n        halfDayPeriod: undefined,\n        options: undefined\n      }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:140:16)\n\n    console.info\n      Fetched 1 public holidays for the period.\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:179:16)\n\n    console.info\n      Leave counted days calculation successful { countedDays: 4, workDays: 4, scheduleId: 1 }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:345:16)\n\n    console.info\n      Starting leave counted days calculation... {\n        startDate: '23/12/2024',\n        endDate: '27/12/2024',\n        scheduleId: 1,\n        isHalfDay: false,\n        halfDayPeriod: undefined,\n        options: undefined\n      }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:140:16)\n\n    console.info\n      Fetched 2 public holidays for the period.\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:179:16)\n\n    console.info\n      Leave counted days calculation successful { countedDays: 3, workDays: 3, scheduleId: 1 }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:345:16)\n\n    console.info\n      Starting leave counted days calculation... {\n        startDate: '05/08/2024',\n        endDate: '11/08/2024',\n        scheduleId: 1,\n        isHalfDay: false,\n        halfDayPeriod: undefined,\n        options: undefined\n      }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:140:16)\n\n    console.info\n      Fetched 1 public holidays for the period.\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:179:16)\n\n    console.info\n      Leave counted days calculation successful { countedDays: 5, workDays: 5, scheduleId: 1 }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:345:16)\n\n    console.info\n      Starting leave counted days calculation... {\n        startDate: '05/08/2024',\n        endDate: '05/08/2024',\n        scheduleId: 1,\n        isHalfDay: true,\n        halfDayPeriod: 'AM',\n        options: { isHalfDay: true }\n      }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:140:16)\n\n    console.info\n      Fetched 0 public holidays for the period.\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:179:16)\n\n    console.info\n      Leave counted days calculation successful { countedDays: 0.5, workDays: 1, scheduleId: 1 }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:345:16)\n\n    console.info\n      Starting leave counted days calculation... {\n        startDate: '05/08/2024',\n        endDate: '05/08/2024',\n        scheduleId: 1,\n        isHalfDay: true,\n        halfDayPeriod: 'AM',\n        options: { isHalfDay: true, halfDayPeriod: 'AM' }\n      }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:140:16)\n\n    console.info\n      Fetched 0 public holidays for the period.\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:179:16)\n\n    console.info\n      Leave counted days calculation successful { countedDays: 0.5, workDays: 1, scheduleId: 1 }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:345:16)\n\n    console.info\n      Starting leave counted days calculation... {\n        startDate: '05/08/2024',\n        endDate: '05/08/2024',\n        scheduleId: 1,\n        isHalfDay: true,\n        halfDayPeriod: 'PM',\n        options: { isHalfDay: true, halfDayPeriod: 'PM' }\n      }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:140:16)\n\n    console.info\n      Fetched 0 public holidays for the period.\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:179:16)\n\n    console.info\n      Leave counted days calculation successful { countedDays: 0.5, workDays: 1, scheduleId: 1 }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:345:16)\n\n    console.info\n      Starting leave counted days calculation... {\n        startDate: '05/08/2024',\n        endDate: '09/08/2024',\n        scheduleId: 1,\n        isHalfDay: false,\n        halfDayPeriod: undefined,\n        options: undefined\n      }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:140:16)\n\n    console.info\n      Fetched 0 public holidays for the period.\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:179:16)\n\n    console.info\n      Leave counted days calculation successful { countedDays: 4, workDays: 5, scheduleId: 1 }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:345:16)\n\n    console.info\n      Starting leave counted days calculation... {\n        startDate: '05/08/2024',\n        endDate: '09/08/2024',\n        scheduleId: 1,\n        isHalfDay: false,\n        halfDayPeriod: undefined,\n        options: undefined\n      }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:140:16)\n\n    console.info\n      Fetched 0 public holidays for the period.\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:179:16)\n\n    console.info\n      Leave counted days calculation successful { countedDays: 5, workDays: 5, scheduleId: 1 }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:345:16)\n\n    console.info\n      Starting leave counted days calculation... {\n        startDate: '01/08/2024',\n        endDate: '31/08/2024',\n        scheduleId: 1,\n        isHalfDay: false,\n        halfDayPeriod: undefined,\n        options: undefined\n      }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:140:16)\n\n    console.info\n      Fetched 0 public holidays for the period.\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:179:16)\n\n    console.info\n      Leave counted days calculation successful { countedDays: 22, workDays: 22, scheduleId: 1 }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:345:16)\n\n    console.info\n      Starting leave counted days calculation... {\n        startDate: '01/08/2024',\n        endDate: '06/08/2024',\n        scheduleId: 1,\n        isHalfDay: false,\n        halfDayPeriod: undefined,\n        options: undefined\n      }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:140:16)\n          at async Promise.all (index 0)\n\n    console.info\n      Starting leave counted days calculation... {\n        startDate: '02/08/2024',\n        endDate: '07/08/2024',\n        scheduleId: 1,\n        isHalfDay: false,\n        halfDayPeriod: undefined,\n        options: undefined\n      }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:140:16)\n          at async Promise.all (index 1)\n\n    console.info\n      Starting leave counted days calculation... {\n        startDate: '03/08/2024',\n        endDate: '08/08/2024',\n        scheduleId: 1,\n        isHalfDay: false,\n        halfDayPeriod: undefined,\n        options: undefined\n      }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:140:16)\n          at async Promise.all (index 2)\n\n    console.info\n      Starting leave counted days calculation... {\n        startDate: '04/08/2024',\n        endDate: '09/08/2024',\n        scheduleId: 1,\n        isHalfDay: false,\n        halfDayPeriod: undefined,\n        options: undefined\n      }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:140:16)\n          at async Promise.all (index 3)\n\n    console.info\n      Starting leave counted days calculation... {\n        startDate: '05/08/2024',\n        endDate: '10/08/2024',\n        scheduleId: 1,\n        isHalfDay: false,\n        halfDayPeriod: undefined,\n        options: undefined\n      }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:140:16)\n          at async Promise.all (index 4)\n\n    console.info\n      Fetched 0 public holidays for the period.\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:179:16)\n          at async Promise.all (index 0)\n\n    console.info\n      Leave counted days calculation successful { countedDays: 4, workDays: 4, scheduleId: 1 }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:345:16)\n          at async Promise.all (index 0)\n\n    console.info\n      Fetched 0 public holidays for the period.\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:179:16)\n          at async Promise.all (index 1)\n\n    console.info\n      Leave counted days calculation successful { countedDays: 4, workDays: 4, scheduleId: 1 }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:345:16)\n          at async Promise.all (index 1)\n\n    console.info\n      Fetched 0 public holidays for the period.\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:179:16)\n          at async Promise.all (index 2)\n\n    console.info\n      Leave counted days calculation successful { countedDays: 4, workDays: 4, scheduleId: 1 }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:345:16)\n          at async Promise.all (index 2)\n\n    console.info\n      Fetched 0 public holidays for the period.\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:179:16)\n          at async Promise.all (index 3)\n\n    console.info\n      Leave counted days calculation successful { countedDays: 5, workDays: 5, scheduleId: 1 }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:345:16)\n          at async Promise.all (index 3)\n\n    console.info\n      Fetched 0 public holidays for the period.\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:179:16)\n          at async Promise.all (index 4)\n\n    console.info\n      Leave counted days calculation successful { countedDays: 5, workDays: 5, scheduleId: 1 }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:345:16)\n          at async Promise.all (index 4)\n\n    console.info\n      Starting leave counted days calculation... {\n        startDate: '05/08/2024',\n        endDate: '09/08/2024',\n        scheduleId: 1,\n        isHalfDay: false,\n        halfDayPeriod: undefined,\n        options: undefined\n      }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:140:16)\n\n    console.error\n      Erreur lors du calcul des jours de congés: Service indisponible {\n        startDate: 2024-08-05T00:00:00.000Z,\n        endDate: 2024-08-09T00:00:00.000Z,\n        scheduleId: 1,\n        options: undefined,\n        stack: 'Error: Service indisponible\\n' +\n          '    at Object.<anonymous> (/Users/vincentperreard/Mathildanesth/src/modules/leaves/services/__tests__/leaveCalculator.comprehensive.test.ts:294:17)\\n' +\n          '    at Promise.then.completed (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/utils.js:298:28)\\n' +\n          '    at new Promise (<anonymous>)\\n' +\n          '    at callAsyncCircusFn (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/utils.js:231:10)\\n' +\n          '    at _callCircusTest (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:316:40)\\n' +\n          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\\n' +\n          '    at _runTest (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:252:3)\\n' +\n          '    at _runTestsForDescribeBlock (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:126:9)\\n' +\n          '    at _runTestsForDescribeBlock (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:121:9)\\n' +\n          '    at _runTestsForDescribeBlock (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:121:9)\\n' +\n          '    at run (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:71:3)\\n' +\n          '    at runAndTransformResultsToJestFormat (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\\n' +\n          '    at jestAdapter (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:74:19)\\n' +\n          '    at runTestInternal (/Users/vincentperreard/Mathildanesth/node_modules/jest-runner/build/runTest.js:367:16)\\n' +\n          '    at runTest (/Users/vincentperreard/Mathildanesth/node_modules/jest-runner/build/runTest.js:444:34)\\n' +\n          '    at Object.worker (/Users/vincentperreard/Mathildanesth/node_modules/jest-runner/build/testWorker.js:106:12)'\n      }\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at Object.originalConsoleError [as error] (jest.setup.js:101:3)\n      at error (src/modules/leaves/services/leaveCalculator.ts:349:16)\n      at Object.<anonymous> (src/modules/leaves/services/__tests__/leaveCalculator.comprehensive.test.ts:298:28)\n\n    console.warn\n      Invalid dates provided to calculateLeaveCountedDays {\n        startDateInput: Invalid Date,\n        endDateInput: 2024-08-05T00:00:00.000Z\n      }\n\n      111 |\n      112 |         if (!startDate || !endDate) {\n    > 113 |             logger.warn('Invalid dates provided to calculateLeaveCountedDays', { startDateInput, endDateInput });\n          |                    ^\n      114 |             return null;\n      115 |         }\n      116 |\n\n      at warn (src/modules/leaves/services/leaveCalculator.ts:113:20)\n      at Object.<anonymous> (src/modules/leaves/services/__tests__/leaveCalculator.comprehensive.test.ts:308:29)\n\n    console.warn\n      Invalid dates provided to calculateLeaveCountedDays {\n        startDateInput: 2024-08-05T00:00:00.000Z,\n        endDateInput: Invalid Date\n      }\n\n      111 |\n      112 |         if (!startDate || !endDate) {\n    > 113 |             logger.warn('Invalid dates provided to calculateLeaveCountedDays', { startDateInput, endDateInput });\n          |                    ^\n      114 |             return null;\n      115 |         }\n      116 |\n\n      at warn (src/modules/leaves/services/leaveCalculator.ts:113:20)\n      at Object.<anonymous> (src/modules/leaves/services/__tests__/leaveCalculator.comprehensive.test.ts:309:29)\n\n    console.info\n      Calculating working days... { startDate: '05/08/2024', endDate: '09/08/2024', options: undefined }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:389:16)\n\n    console.info\n      Fetched 0 public holidays for working days calculation.\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:398:16)\n\n    console.info\n      Working days calculated: 5\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:433:16)\n\n    console.info\n      Checking if 05/08/2024 is a business day...\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:469:16)\n\n    console.info\n      Result for 05/08/2024: isWeekend=false, isHoliday=false\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:471:16)\n\n    console.info\n      Checking if 15/08/2024 is a business day...\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:469:16)\n\n    console.info\n      Result for 15/08/2024: isWeekend=false, isHoliday=true\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:471:16)\n\n    console.info\n      Starting leave counted days calculation... {\n        startDate: '05/08/2024',\n        endDate: '09/08/2024',\n        scheduleId: 1,\n        isHalfDay: false,\n        halfDayPeriod: undefined,\n        options: undefined\n      }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:140:16)\n\n    console.info\n      Fetched 0 public holidays for the period.\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:179:16)\n\n    console.info\n      Leave counted days calculation successful { countedDays: 5, workDays: 5, scheduleId: 1 }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:345:16)\n\n    console.info\n      Starting leave counted days calculation... {\n        startDate: '05/08/2024',\n        endDate: '09/08/2024',\n        scheduleId: 1,\n        isHalfDay: false,\n        halfDayPeriod: undefined,\n        options: undefined\n      }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:140:16)\n\n    console.info\n      Fetched 0 public holidays for the period.\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:179:16)\n\n    console.info\n      Leave counted days calculation successful { countedDays: 5, workDays: 5, scheduleId: 1 }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:345:16)\n\n    console.info\n      Starting leave counted days calculation... {\n        startDate: '05/08/2024',\n        endDate: '09/08/2024',\n        scheduleId: 1,\n        isHalfDay: false,\n        halfDayPeriod: undefined,\n        options: undefined\n      }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:140:16)\n\n    console.info\n      Fetched 0 public holidays for the period.\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:179:16)\n\n    console.info\n      Leave counted days calculation successful { countedDays: 5, workDays: 5, scheduleId: 1 }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:345:16)\n\n  ● LeaveCalculator - Tests Complets › Gestion des erreurs › should handle PublicHolidayService errors gracefully\n\n    expect(received).not.toBeNull()\n\n    Received: null\n\n      298 |             const result = await calculateLeaveCountedDays(startDate, endDate, standardSchedule);\n      299 |\n    > 300 |             expect(result).not.toBeNull();\n          |                                ^\n      301 |             expect(result!.countedDays).toBe(5); // Fallback sans jours fériés\n      302 |         });\n      303 |\n\n      at Object.<anonymous> (src/modules/leaves/services/__tests__/leaveCalculator.comprehensive.test.ts:300:32)\n\n\n  ●  Cannot log after tests are done. Did you forget to wait for something async in your test?\n    Attempted to log \"[PublicHolidayService] Impossible de récupérer les jours fériés depuis l'API pour l'année 2025. Utilisation du calcul local.\".\n\n\n\n      at console.warn (node_modules/@jest/console/build/BufferedConsole.js:191:10)\n      at PublicHolidayService.getPublicHolidaysForYear (src/modules/leaves/services/publicHolidayService.ts:7441:15)\n          at async Promise.all (index 1)\n      at PublicHolidayService.preloadData (src/modules/leaves/services/publicHolidayService.ts:7072:7)\n\n\n  ●  Cannot log after tests are done. Did you forget to wait for something async in your test?\n    Attempted to log \"[PublicHolidayService] Impossible de récupérer les jours fériés depuis l'API pour l'année 2027. Utilisation du calcul local.\".\n\n\n\n      at console.warn (node_modules/@jest/console/build/BufferedConsole.js:191:10)\n      at PublicHolidayService.getPublicHolidaysForYear (src/modules/leaves/services/publicHolidayService.ts:7441:15)\n          at async Promise.all (index 3)\n      at PublicHolidayService.preloadData (src/modules/leaves/services/publicHolidayService.ts:7072:7)\n\nFAIL src/modules/leaves/services/leaveCalculator.test.ts\n  ● Console\n\n    console.log\n      jest.polyfills.js loaded and applied.\n\n      at Object.<anonymous> (jest.polyfills.js:247:9)\n\n    console.log\n      jest.setup.js loaded and mocks applied.\n\n      at Object.log (jest.setup.js:126:9)\n\n  ● leaveCalculator › calculateLeaveCountedDays › devrait calculer correctement les jours pour une période standard\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 5\n    Received: 0\n\n      48 |\n      49 |             expect(result).not.toBeNull();\n    > 50 |             expect(result?.countedDays).toBe(5);\n         |                                         ^\n      51 |             expect(result?.naturalDays).toBe(5);\n      52 |             expect(result?.halfDays).toBe(0);\n      53 |         });\n\n      at Object.<anonymous> (src/modules/leaves/services/leaveCalculator.test.ts:50:41)\n\n  ● leaveCalculator › calculateLeaveCountedDays › devrait calculer correctement une demi-journée du matin\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 0.5\n    Received: 0\n\n      63 |\n      64 |             expect(result).not.toBeNull();\n    > 65 |             expect(result?.countedDays).toBe(0.5);\n         |                                         ^\n      66 |             expect(result?.naturalDays).toBe(1);\n      67 |             expect(result?.halfDays).toBe(1);\n      68 |         });\n\n      at Object.<anonymous> (src/modules/leaves/services/leaveCalculator.test.ts:65:41)\n\n  ● leaveCalculator › calculateLeaveCountedDays › devrait calculer correctement une demi-journée de l'après-midi\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 0.5\n    Received: 0\n\n      78 |\n      79 |             expect(result).not.toBeNull();\n    > 80 |             expect(result?.countedDays).toBe(0.5);\n         |                                         ^\n      81 |             expect(result?.naturalDays).toBe(1);\n      82 |             expect(result?.halfDays).toBe(1);\n      83 |         });\n\n      at Object.<anonymous> (src/modules/leaves/services/leaveCalculator.test.ts:80:41)\n\n  ● leaveCalculator › calculateLeaveCountedDays › devrait ignorer isHalfDay si startDate et endDate sont différents\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 2\n    Received: 0\n\n      94 |\n      95 |             expect(result).not.toBeNull();\n    > 96 |             expect(result?.countedDays).toBe(2); // Devrait compter 2 jours complets\n         |                                         ^\n      97 |             expect(result?.naturalDays).toBe(2);\n      98 |             expect(result?.halfDays).toBe(0);\n      99 |         });\n\n      at Object.<anonymous> (src/modules/leaves/services/leaveCalculator.test.ts:96:41)\n\n  ● leaveCalculator › calculateLeaveCountedDays › devrait prendre en compte les jours fériés\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 4\n    Received: 0\n\n      115 |\n      116 |             expect(result).not.toBeNull();\n    > 117 |             expect(result?.countedDays).toBe(4); // 5 jours - 1 jour férié\n          |                                         ^\n      118 |             expect(result?.naturalDays).toBe(5);\n      119 |         });\n      120 |\n\n      at Object.<anonymous> (src/modules/leaves/services/leaveCalculator.test.ts:117:41)\n\n\n  ●  Cannot log after tests are done. Did you forget to wait for something async in your test?\n    Attempted to log \"Erreur lors du chargement des permissions personnalisées: FetchError {\n      message: 'request to http://localhost/api/leaves/permissions failed, reason: ',\n      type: 'system',\n      errno: 'ECONNREFUSED',\n      code: 'ECONNREFUSED'\n    }\".\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.error (node_modules/@jest/console/build/BufferedConsole.js:127:10)\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at LeavePermissionService.error [as loadCustomPermissions] (src/modules/leaves/permissions/LeavePermissionService.ts:474:21)\n\nFAIL src/modules/leaves/permissions/__tests__/LeavePermissionService.test.ts\n  ● Console\n\n    console.log\n      jest.polyfills.js loaded and applied.\n\n      at Object.<anonymous> (jest.polyfills.js:247:9)\n\n    console.log\n      jest.setup.js loaded and mocks applied.\n\n      at Object.log (jest.setup.js:126:9)\n\n    console.debug\n      [EventBusProfiler] Initialized\n\n      at new debug (src/modules/integration/services/EventBusProfiler.ts:77:17)\n\n    console.error\n      Erreur lors du chargement des permissions personnalisées: TypeError: Only absolute URLs are supported\n          at getNodeRequestOptions (/Users/vincentperreard/Mathildanesth/node_modules/node-fetch/lib/index.js:1327:9)\n          at getNodeRequestOptions (/Users/vincentperreard/Mathildanesth/node_modules/node-fetch/lib/index.js:1450:19)\n          at new Promise (<anonymous>)\n          at fetch (/Users/vincentperreard/Mathildanesth/node_modules/node-fetch/lib/index.js:1447:9)\n          at call (/Users/vincentperreard/Mathildanesth/node_modules/cross-fetch/dist/node-ponyfill.js:10:20)\n          at LeavePermissionService.fetch [as loadCustomPermissions] (/Users/vincentperreard/Mathildanesth/src/modules/leaves/permissions/LeavePermissionService.ts:450:36)\n          at new loadCustomPermissions (/Users/vincentperreard/Mathildanesth/src/modules/leaves/permissions/LeavePermissionService.ts:237:14)\n          at Function.getInstance (/Users/vincentperreard/Mathildanesth/src/modules/leaves/permissions/LeavePermissionService.ts:201:47)\n          at Object.getInstance (/Users/vincentperreard/Mathildanesth/src/modules/leaves/permissions/LeavePermissionService.ts:1049:62)\n          at Runtime._execModule (/Users/vincentperreard/Mathildanesth/node_modules/jest-runtime/build/index.js:1439:24)\n          at Runtime._loadModule (/Users/vincentperreard/Mathildanesth/node_modules/jest-runtime/build/index.js:1022:12)\n          at Runtime.requireModule (/Users/vincentperreard/Mathildanesth/node_modules/jest-runtime/build/index.js:882:12)\n          at Runtime.requireModuleOrMock (/Users/vincentperreard/Mathildanesth/node_modules/jest-runtime/build/index.js:1048:21)\n          at Object.<anonymous> (/Users/vincentperreard/Mathildanesth/src/modules/leaves/permissions/__tests__/LeavePermissionService.test.ts:1:1)\n          at Runtime._execModule (/Users/vincentperreard/Mathildanesth/node_modules/jest-runtime/build/index.js:1439:24)\n          at Runtime._loadModule (/Users/vincentperreard/Mathildanesth/node_modules/jest-runtime/build/index.js:1022:12)\n          at Runtime.requireModule (/Users/vincentperreard/Mathildanesth/node_modules/jest-runtime/build/index.js:882:12)\n          at jestAdapter (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:72:13)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n          at runTestInternal (/Users/vincentperreard/Mathildanesth/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/Users/vincentperreard/Mathildanesth/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/Users/vincentperreard/Mathildanesth/node_modules/jest-runner/build/testWorker.js:106:12)\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at LeavePermissionService.error [as loadCustomPermissions] (src/modules/leaves/permissions/LeavePermissionService.ts:474:21)\n\n    console.warn\n      [MSW] Warning: intercepted a request without a matching request handler:\n      \n        • GET /api/leaves/permissions\n      \n      If you still wish to intercept this unhandled request, please create a request handler for it.\n      Read more: https://mswjs.io/docs/getting-started/mocks\n\n      448 |\n      449 |         try {\n    > 450 |             const response = await fetch('/api/leaves/permissions');\n          |                              ^\n      451 |             if (!response.ok) {\n      452 |                 throw new Error(`Erreur lors du chargement des permissions: ${response.statusText}`);\n      453 |             }\n\n      at Object.warn (node_modules/msw/src/core/utils/internal/devUtils.ts:18:11)\n      at warn (node_modules/msw/src/core/utils/request/onUnhandledRequest.ts:50:18)\n      at applyStrategy (node_modules/msw/src/core/utils/request/onUnhandledRequest.ts:79:5)\n      at handleRequest (node_modules/msw/src/core/utils/handleRequest.ts:79:11)\n      at _Emitter.<anonymous> (node_modules/msw/src/node/SetupServerCommonApi.ts:60:26)\n      at emitAsync (node_modules/@mswjs/interceptors/src/utils/emitAsync.ts:23:5)\n      at node_modules/@mswjs/interceptors/src/utils/handleRequest.ts:125:5\n      at until (node_modules/@open-draft/until/src/until.ts:23:18)\n      at handleRequest (node_modules/@mswjs/interceptors/src/utils/handleRequest.ts:114:18)\n      at globalThis.fetch (node_modules/@mswjs/interceptors/src/interceptors/fetch/index.ts:63:32)\n      at LeavePermissionService.loadCustomPermissions (src/modules/leaves/permissions/LeavePermissionService.ts:450:30)\n\n    console.error\n      Erreur lors du chargement des permissions personnalisées: TypeError: Cannot read properties of undefined (reading 'ok')\n          at LeavePermissionService.ok (/Users/vincentperreard/Mathildanesth/src/modules/leaves/permissions/LeavePermissionService.ts:451:27)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at LeavePermissionService.error (src/modules/leaves/permissions/LeavePermissionService.ts:474:21)\n\n    console.error\n      Erreur lors du chargement des permissions personnalisées: TypeError: Cannot read properties of undefined (reading 'ok')\n          at LeavePermissionService.ok (/Users/vincentperreard/Mathildanesth/src/modules/leaves/permissions/LeavePermissionService.ts:451:27)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at LeavePermissionService.error (src/modules/leaves/permissions/LeavePermissionService.ts:474:21)\n\n    console.error\n      Erreur lors du chargement des permissions personnalisées: TypeError: Cannot read properties of undefined (reading 'ok')\n          at LeavePermissionService.ok (/Users/vincentperreard/Mathildanesth/src/modules/leaves/permissions/LeavePermissionService.ts:451:27)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at LeavePermissionService.error (src/modules/leaves/permissions/LeavePermissionService.ts:474:21)\n\n    console.error\n      Erreur lors du chargement des permissions personnalisées: TypeError: Cannot read properties of undefined (reading 'ok')\n          at LeavePermissionService.ok (/Users/vincentperreard/Mathildanesth/src/modules/leaves/permissions/LeavePermissionService.ts:451:27)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at LeavePermissionService.error (src/modules/leaves/permissions/LeavePermissionService.ts:474:21)\n\n    console.error\n      Erreur lors du chargement des permissions personnalisées: TypeError: Cannot read properties of undefined (reading 'ok')\n          at LeavePermissionService.ok (/Users/vincentperreard/Mathildanesth/src/modules/leaves/permissions/LeavePermissionService.ts:451:27)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at LeavePermissionService.error (src/modules/leaves/permissions/LeavePermissionService.ts:474:21)\n\n    console.error\n      Erreur lors du chargement des permissions personnalisées: TypeError: Cannot read properties of undefined (reading 'ok')\n          at LeavePermissionService.ok (/Users/vincentperreard/Mathildanesth/src/modules/leaves/permissions/LeavePermissionService.ts:451:27)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at LeavePermissionService.error (src/modules/leaves/permissions/LeavePermissionService.ts:474:21)\n\n    console.error\n      Erreur lors du chargement des permissions personnalisées: TypeError: Cannot read properties of undefined (reading 'ok')\n          at LeavePermissionService.ok (/Users/vincentperreard/Mathildanesth/src/modules/leaves/permissions/LeavePermissionService.ts:451:27)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at LeavePermissionService.error (src/modules/leaves/permissions/LeavePermissionService.ts:474:21)\n\n    console.error\n      Erreur lors du chargement des permissions personnalisées: TypeError: Cannot read properties of undefined (reading 'ok')\n          at LeavePermissionService.ok (/Users/vincentperreard/Mathildanesth/src/modules/leaves/permissions/LeavePermissionService.ts:451:27)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at LeavePermissionService.error (src/modules/leaves/permissions/LeavePermissionService.ts:474:21)\n\n    console.error\n      Erreur lors du chargement des permissions personnalisées: TypeError: Cannot read properties of undefined (reading 'ok')\n          at LeavePermissionService.ok (/Users/vincentperreard/Mathildanesth/src/modules/leaves/permissions/LeavePermissionService.ts:451:27)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at LeavePermissionService.error (src/modules/leaves/permissions/LeavePermissionService.ts:474:21)\n\n    console.error\n      Erreur lors du chargement des permissions personnalisées: TypeError: Cannot read properties of undefined (reading 'ok')\n          at LeavePermissionService.ok (/Users/vincentperreard/Mathildanesth/src/modules/leaves/permissions/LeavePermissionService.ts:451:27)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at LeavePermissionService.error (src/modules/leaves/permissions/LeavePermissionService.ts:474:21)\n\n    console.log\n      [DEBUG] grantPermission called for user: test-user, permission: leaves.reports.view\n\n      at LeavePermissionService.log [as grantPermission] (src/modules/leaves/permissions/LeavePermissionService.ts:750:17)\n\n    console.log\n      [DEBUG] grantPermission: Current user performing action: id=employee-123, role=UTILISATEUR\n\n      at LeavePermissionService.log [as grantPermission] (src/modules/leaves/permissions/LeavePermissionService.ts:756:17)\n\n    console.log\n      [DEBUG] grantPermission: hasAuth (MANAGE_LEAVE_RULES) for employee-123: false\n\n      at LeavePermissionService.log [as grantPermission] (src/modules/leaves/permissions/LeavePermissionService.ts:759:17)\n\n    console.error\n      [DEBUG] grantPermission: User employee-123 does not have permission to MANAGE_LEAVE_RULES.\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at LeavePermissionService.error [as grantPermission] (src/modules/leaves/permissions/LeavePermissionService.ts:761:21)\n      at Object.<anonymous> (src/modules/leaves/permissions/__tests__/LeavePermissionService.test.ts:343:28)\n\n    console.error\n      Erreur lors du chargement des permissions personnalisées: TypeError: Cannot read properties of undefined (reading 'ok')\n          at LeavePermissionService.ok (/Users/vincentperreard/Mathildanesth/src/modules/leaves/permissions/LeavePermissionService.ts:451:27)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at LeavePermissionService.error (src/modules/leaves/permissions/LeavePermissionService.ts:474:21)\n\n    console.log\n      [DEBUG] grantPermission called for user: test-user, permission: leaves.reports.view\n\n      at LeavePermissionService.log [as grantPermission] (src/modules/leaves/permissions/LeavePermissionService.ts:750:17)\n\n    console.log\n      [DEBUG] grantPermission: Current user performing action: id=manager-456, role=MANAGER\n\n      at LeavePermissionService.log [as grantPermission] (src/modules/leaves/permissions/LeavePermissionService.ts:756:17)\n\n    console.log\n      [DEBUG] grantPermission: hasAuth (MANAGE_LEAVE_RULES) for manager-456: true\n\n      at LeavePermissionService.log [as grantPermission] (src/modules/leaves/permissions/LeavePermissionService.ts:759:17)\n\n    console.log\n      [DEBUG] saveCustomPermissions called for user: test-user, permissions: {\"userId\":\"test-user\",\"grantedPermissions\":[\"leaves.reports.view\"],\"deniedPermissions\":[]}\n\n      at LeavePermissionService.log [as saveCustomPermissions] (src/modules/leaves/permissions/LeavePermissionService.ts:865:17)\n\n    console.warn\n      Tentative de sauvegarde des permissions personnalisées avant leur chargement complet.\n\n      865 |         console.log(`[DEBUG] saveCustomPermissions called for user: ${userId}, permissions:`, JSON.stringify(permissions));\n      866 |         if (!this.permissionsLoaded) {\n    > 867 |             console.warn(\"Tentative de sauvegarde des permissions personnalisées avant leur chargement complet.\");\n          |                     ^\n      868 |         }\n      869 |         try {\n      870 |             const response = await fetch(`/api/leaves/permissions/${userId}/custom`, {\n\n      at LeavePermissionService.warn [as saveCustomPermissions] (src/modules/leaves/permissions/LeavePermissionService.ts:867:21)\n      at LeavePermissionService.saveCustomPermissions [as grantPermission] (src/modules/leaves/permissions/LeavePermissionService.ts:787:40)\n      at Object.<anonymous> (src/modules/leaves/permissions/__tests__/LeavePermissionService.test.ts:380:28)\n\n    console.log\n      [DEBUG] saveCustomPermissions fetch response for test-user: status=500, ok=false\n\n      at LeavePermissionService.log [as saveCustomPermissions] (src/modules/leaves/permissions/LeavePermissionService.ts:878:21)\n\n    console.error\n      Erreur réseau ou autre lors de la sauvegarde des permissions pour test-user: TypeError: response.text is not a function\n          at LeavePermissionService.text [as saveCustomPermissions] (/Users/vincentperreard/Mathildanesth/src/modules/leaves/permissions/LeavePermissionService.ts:881:50)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n          at LeavePermissionService.grantPermission (/Users/vincentperreard/Mathildanesth/src/modules/leaves/permissions/LeavePermissionService.ts:787:29)\n          at Object.<anonymous> (/Users/vincentperreard/Mathildanesth/src/modules/leaves/permissions/__tests__/LeavePermissionService.test.ts:380:28)\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at LeavePermissionService.error [as saveCustomPermissions] (src/modules/leaves/permissions/LeavePermissionService.ts:891:21)\n      at LeavePermissionService.grantPermission (src/modules/leaves/permissions/LeavePermissionService.ts:787:29)\n      at Object.<anonymous> (src/modules/leaves/permissions/__tests__/LeavePermissionService.test.ts:380:28)\n\n    console.error\n      Network or other error saving custom permissions for test-user {\n        userId: 'test-user',\n        error: TypeError: response.text is not a function\n            at LeavePermissionService.text [as saveCustomPermissions] (/Users/vincentperreard/Mathildanesth/src/modules/leaves/permissions/LeavePermissionService.ts:881:50)\n            at processTicksAndRejections (node:internal/process/task_queues:105:5)\n            at LeavePermissionService.grantPermission (/Users/vincentperreard/Mathildanesth/src/modules/leaves/permissions/LeavePermissionService.ts:787:29)\n            at Object.<anonymous> (/Users/vincentperreard/Mathildanesth/src/modules/leaves/permissions/__tests__/LeavePermissionService.test.ts:380:28)\n      }\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at LeavePermissionService.error [as saveCustomPermissions] (src/modules/leaves/permissions/LeavePermissionService.ts:892:21)\n      at LeavePermissionService.grantPermission (src/modules/leaves/permissions/LeavePermissionService.ts:787:29)\n      at Object.<anonymous> (src/modules/leaves/permissions/__tests__/LeavePermissionService.test.ts:380:28)\n\n    console.log\n      [DEBUG] grantPermission: saveCustomPermissions result for test-user: false\n\n      at LeavePermissionService.log [as grantPermission] (src/modules/leaves/permissions/LeavePermissionService.ts:788:21)\n\n    console.error\n      Erreur lors du chargement des permissions personnalisées: TypeError: Cannot read properties of undefined (reading 'ok')\n          at LeavePermissionService.ok (/Users/vincentperreard/Mathildanesth/src/modules/leaves/permissions/LeavePermissionService.ts:451:27)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at LeavePermissionService.error (src/modules/leaves/permissions/LeavePermissionService.ts:474:21)\n\n    console.log\n      [DEBUG] revokePermission called for user: test-user, permission: leaves.reports.view\n\n      at LeavePermissionService.log [as revokePermission] (src/modules/leaves/permissions/LeavePermissionService.ts:809:17)\n\n    console.error\n      User employee-123 does not have permission to MANAGE_LEAVE_RULES.\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at LeavePermissionService.error [as revokePermission] (src/modules/leaves/permissions/LeavePermissionService.ts:818:21)\n      at Object.<anonymous> (src/modules/leaves/permissions/__tests__/LeavePermissionService.test.ts:409:28)\n\n    console.error\n      Erreur lors du chargement des permissions personnalisées: TypeError: Cannot read properties of undefined (reading 'ok')\n          at LeavePermissionService.ok (/Users/vincentperreard/Mathildanesth/src/modules/leaves/permissions/LeavePermissionService.ts:451:27)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at LeavePermissionService.error (src/modules/leaves/permissions/LeavePermissionService.ts:474:21)\n\n    console.log\n      [DEBUG] revokePermission called for user: test-user, permission: leaves.reports.view\n\n      at LeavePermissionService.log [as revokePermission] (src/modules/leaves/permissions/LeavePermissionService.ts:809:17)\n\n    console.log\n      [DEBUG] saveCustomPermissions called for user: test-user, permissions: {\"userId\":\"test-user\",\"grantedPermissions\":[],\"deniedPermissions\":[\"leaves.reports.view\"]}\n\n      at LeavePermissionService.log [as saveCustomPermissions] (src/modules/leaves/permissions/LeavePermissionService.ts:865:17)\n\n    console.warn\n      Tentative de sauvegarde des permissions personnalisées avant leur chargement complet.\n\n      865 |         console.log(`[DEBUG] saveCustomPermissions called for user: ${userId}, permissions:`, JSON.stringify(permissions));\n      866 |         if (!this.permissionsLoaded) {\n    > 867 |             console.warn(\"Tentative de sauvegarde des permissions personnalisées avant leur chargement complet.\");\n          |                     ^\n      868 |         }\n      869 |         try {\n      870 |             const response = await fetch(`/api/leaves/permissions/${userId}/custom`, {\n\n      at LeavePermissionService.warn [as saveCustomPermissions] (src/modules/leaves/permissions/LeavePermissionService.ts:867:21)\n      at LeavePermissionService.saveCustomPermissions [as revokePermission] (src/modules/leaves/permissions/LeavePermissionService.ts:843:40)\n      at Object.<anonymous> (src/modules/leaves/permissions/__tests__/LeavePermissionService.test.ts:442:28)\n\n    console.log\n      [DEBUG] saveCustomPermissions fetch response for test-user: status=500, ok=false\n\n      at LeavePermissionService.log [as saveCustomPermissions] (src/modules/leaves/permissions/LeavePermissionService.ts:878:21)\n\n    console.error\n      Erreur réseau ou autre lors de la sauvegarde des permissions pour test-user: TypeError: response.text is not a function\n          at LeavePermissionService.text [as saveCustomPermissions] (/Users/vincentperreard/Mathildanesth/src/modules/leaves/permissions/LeavePermissionService.ts:881:50)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n          at LeavePermissionService.revokePermission (/Users/vincentperreard/Mathildanesth/src/modules/leaves/permissions/LeavePermissionService.ts:843:29)\n          at Object.<anonymous> (/Users/vincentperreard/Mathildanesth/src/modules/leaves/permissions/__tests__/LeavePermissionService.test.ts:442:28)\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at LeavePermissionService.error [as saveCustomPermissions] (src/modules/leaves/permissions/LeavePermissionService.ts:891:21)\n      at LeavePermissionService.revokePermission (src/modules/leaves/permissions/LeavePermissionService.ts:843:29)\n      at Object.<anonymous> (src/modules/leaves/permissions/__tests__/LeavePermissionService.test.ts:442:28)\n\n    console.error\n      Network or other error saving custom permissions for test-user {\n        userId: 'test-user',\n        error: TypeError: response.text is not a function\n            at LeavePermissionService.text [as saveCustomPermissions] (/Users/vincentperreard/Mathildanesth/src/modules/leaves/permissions/LeavePermissionService.ts:881:50)\n            at processTicksAndRejections (node:internal/process/task_queues:105:5)\n            at LeavePermissionService.revokePermission (/Users/vincentperreard/Mathildanesth/src/modules/leaves/permissions/LeavePermissionService.ts:843:29)\n            at Object.<anonymous> (/Users/vincentperreard/Mathildanesth/src/modules/leaves/permissions/__tests__/LeavePermissionService.test.ts:442:28)\n      }\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at LeavePermissionService.error [as saveCustomPermissions] (src/modules/leaves/permissions/LeavePermissionService.ts:892:21)\n      at LeavePermissionService.revokePermission (src/modules/leaves/permissions/LeavePermissionService.ts:843:29)\n      at Object.<anonymous> (src/modules/leaves/permissions/__tests__/LeavePermissionService.test.ts:442:28)\n\n    console.log\n      [DEBUG] revokePermission: saveCustomPermissions result for test-user: false\n\n      at LeavePermissionService.log [as revokePermission] (src/modules/leaves/permissions/LeavePermissionService.ts:844:21)\n\n    console.error\n      Erreur lors du chargement des permissions personnalisées: TypeError: Cannot read properties of undefined (reading 'ok')\n          at LeavePermissionService.ok (/Users/vincentperreard/Mathildanesth/src/modules/leaves/permissions/LeavePermissionService.ts:451:27)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at LeavePermissionService.error (src/modules/leaves/permissions/LeavePermissionService.ts:474:21)\n\n    console.error\n      Erreur lors du chargement des permissions personnalisées: TypeError: Cannot read properties of undefined (reading 'ok')\n          at LeavePermissionService.ok (/Users/vincentperreard/Mathildanesth/src/modules/leaves/permissions/LeavePermissionService.ts:451:27)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at LeavePermissionService.error (src/modules/leaves/permissions/LeavePermissionService.ts:474:21)\n\n    console.error\n      Erreur lors de la récupération des permissions pour l'utilisateur test-user: Error: Erreur lors de la récupération de l'utilisateur: undefined\n          at LeavePermissionService.getUserPermissions (/Users/vincentperreard/Mathildanesth/src/modules/leaves/permissions/LeavePermissionService.ts:916:23)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n          at Object.<anonymous> (/Users/vincentperreard/Mathildanesth/src/modules/leaves/permissions/__tests__/LeavePermissionService.test.ts:488:33)\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at LeavePermissionService.error [as getUserPermissions] (src/modules/leaves/permissions/LeavePermissionService.ts:947:21)\n      at Object.<anonymous> (src/modules/leaves/permissions/__tests__/LeavePermissionService.test.ts:488:33)\n\n    console.error\n      Erreur lors du chargement des permissions personnalisées: TypeError: Cannot read properties of undefined (reading 'ok')\n          at LeavePermissionService.ok (/Users/vincentperreard/Mathildanesth/src/modules/leaves/permissions/LeavePermissionService.ts:451:27)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at LeavePermissionService.error (src/modules/leaves/permissions/LeavePermissionService.ts:474:21)\n\n    console.error\n      Erreur lors du chargement des permissions personnalisées: TypeError: Cannot read properties of undefined (reading 'ok')\n          at LeavePermissionService.ok (/Users/vincentperreard/Mathildanesth/src/modules/leaves/permissions/LeavePermissionService.ts:451:27)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at LeavePermissionService.error (src/modules/leaves/permissions/LeavePermissionService.ts:474:21)\n\n    console.error\n      Erreur lors de la réinitialisation des permissions pour l'utilisateur test-user: Error: Erreur lors de la réinitialisation des permissions: undefined\n          at LeavePermissionService.resetUserPermissions (/Users/vincentperreard/Mathildanesth/src/modules/leaves/permissions/LeavePermissionService.ts:988:23)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n          at Object.<anonymous> (/Users/vincentperreard/Mathildanesth/src/modules/leaves/permissions/__tests__/LeavePermissionService.test.ts:551:28)\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at LeavePermissionService.error [as resetUserPermissions] (src/modules/leaves/permissions/LeavePermissionService.ts:1007:21)\n      at Object.<anonymous> (src/modules/leaves/permissions/__tests__/LeavePermissionService.test.ts:551:28)\n\n  ● LeavePermissionService › grantPermission › devrait accorder une permission à un utilisateur\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n      344 |\n      345 |             // Assert\n    > 346 |             expect(result).toBe(true);\n          |                            ^\n      347 |             expect(mockFetch).toHaveBeenCalledWith(\n      348 |                 `/api/leaves/permissions/${userId}/grant`,\n      349 |                 expect.objectContaining({\n\n      at Object.<anonymous> (src/modules/leaves/permissions/__tests__/LeavePermissionService.test.ts:346:28)\n\n  ● LeavePermissionService › grantPermission › devrait retourner false si l'API échoue\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: Anything, StringContaining \"Échoué (API: 500)\", Anything, ObjectContaining {\"granterId\": \"manager-456\", \"permission\": \"leaves.reports.view\", \"userId\": \"test-user\"}\n\n    Number of calls: 0\n\n      383 |             expect(result).toBe(false);\n      384 |             expect(mockFetch).toHaveBeenCalledTimes(1);\n    > 385 |             expect(mockAuditServiceInstance.logPermissionChange).toHaveBeenCalledWith(\n          |                                                                  ^\n      386 |                 expect.anything(), // AuditActionType.PERMISSION_GRANT_FAILED - utiliser expect.anything() pour l'instant\n      387 |                 expect.stringContaining('Échoué (API: 500)'),\n      388 |                 expect.anything(), // AuditSeverity.ERROR - utiliser expect.anything() pour l'instant\n\n      at Object.<anonymous> (src/modules/leaves/permissions/__tests__/LeavePermissionService.test.ts:385:66)\n\n  ● LeavePermissionService › revokePermission › devrait révoquer une permission d'un utilisateur\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n      410 |\n      411 |             // Assert\n    > 412 |             expect(result).toBe(true);\n          |                            ^\n      413 |             expect(mockFetch).toHaveBeenCalledWith(\n      414 |                 `/api/leaves/permissions/${userId}/revoke`,\n      415 |                 expect.objectContaining({\n\n      at Object.<anonymous> (src/modules/leaves/permissions/__tests__/LeavePermissionService.test.ts:412:28)\n\n  ● LeavePermissionService › revokePermission › devrait retourner false si l'API échoue\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: Anything, StringContaining \"Échoué (API: 500)\", Anything, ObjectContaining {\"granterId\": \"manager-456\", \"permission\": \"leaves.reports.view\", \"userId\": \"test-user\"}\n\n    Number of calls: 0\n\n      445 |             expect(result).toBe(false);\n      446 |             expect(mockFetch).toHaveBeenCalledTimes(1);\n    > 447 |             expect(mockAuditServiceInstance.logPermissionChange).toHaveBeenCalledWith(\n          |                                                                  ^\n      448 |                 expect.anything(),\n      449 |                 expect.stringContaining('Échoué (API: 500)'),\n      450 |                 expect.anything(),\n\n      at Object.<anonymous> (src/modules/leaves/permissions/__tests__/LeavePermissionService.test.ts:447:66)\n\n  ● LeavePermissionService › getUserPermissions › devrait retourner toutes les permissions d'un utilisateur\n\n    expect(received).toEqual(expected) // deep equality\n\n    - Expected  - 4\n    + Received  + 1\n\n    - Array [\n    -   \"leaves.reports.view\",\n    -   \"leaves.request\",\n    - ]\n    + Array []\n\n      471 |             // Assert\n      472 |             expect(mockFetch).toHaveBeenCalledWith(`/api/users/${userId}`);\n    > 473 |             expect(permissions).toEqual(mockPermissions);\n          |                                 ^\n      474 |         });\n      475 |\n      476 |         it('devrait retourner un tableau vide si l\\'API échoue', async () => {\n\n      at Object.<anonymous> (src/modules/leaves/permissions/__tests__/LeavePermissionService.test.ts:473:33)\n\n  ● LeavePermissionService › resetUserPermissions › devrait réinitialiser les permissions personnalisées d'un utilisateur\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"/api/leaves/permissions/custom-user-123/reset\", ObjectContaining {\"method\": \"POST\"}\n    Received: \"/api/leaves/permissions/custom-user-123\", {\"method\": \"DELETE\"}\n\n    Number of calls: 1\n\n      533 |             // Assert\n      534 |             expect(result).toBe(true);\n    > 535 |             expect(mockFetch).toHaveBeenCalledWith(\n          |                               ^\n      536 |                 `/api/leaves/permissions/${userId}/reset`,\n      537 |                 expect.objectContaining({ method: 'POST' })\n      538 |             );\n\n      at Object.<anonymous> (src/modules/leaves/permissions/__tests__/LeavePermissionService.test.ts:535:31)\n\n  ● LeavePermissionService › resetUserPermissions › devrait retourner false si l'API échoue\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: Anything, StringContaining \"Échoué (API: 500)\", Anything, ObjectContaining {\"granterId\": \"manager-456\", \"userId\": \"test-user\"}\n\n    Number of calls: 0\n\n      553 |             // Assert\n      554 |             expect(result).toBe(false);\n    > 555 |             expect(mockAuditServiceInstance.logPermissionChange).toHaveBeenCalledWith(\n          |                                                                  ^\n      556 |                 expect.anything(), // AuditActionType.PERMISSION_RESET_FAILED\n      557 |                 expect.stringContaining('Échoué (API: 500)'),\n      558 |                 expect.anything(), // AuditSeverity.ERROR\n\n      at Object.<anonymous> (src/modules/leaves/permissions/__tests__/LeavePermissionService.test.ts:555:66)\n\n(node:80197) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.\n(Use `node --trace-deprecation ...` to show where the warning was created)\nFAIL src/modules/leaves/services/quotaService.test.ts\n  ● Console\n\n    console.log\n      jest.polyfills.js loaded and applied.\n\n      at Object.<anonymous> (jest.polyfills.js:247:9)\n\n    console.log\n      jest.setup.js loaded and mocks applied.\n\n      at Object.log (jest.setup.js:126:9)\n\n  ● quotaService › simulateQuotaTransfer › calcule correctement un transfert avec ratio personnalisé\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 2\n    Received: 4\n\n      112 |             expect(result.success).toBe(true);\n      113 |             expect(result.sourceAmount).toBe(4);\n    > 114 |             expect(result.targetAmount).toBe(2);\n          |                                         ^\n      115 |         });\n      116 |\n      117 |         it('refuse le transfert si le montant est insuffisant', async () => {\n\n      at Object.<anonymous> (src/modules/leaves/services/quotaService.test.ts:114:41)\n\nFAIL src/modules/leaves/hooks/useLeave.test.ts\n  ● Console\n\n    console.log\n      jest.polyfills.js loaded and applied.\n\n      at Object.<anonymous> (jest.polyfills.js:247:9)\n\n    console.log\n      jest.setup.js loaded and mocks applied.\n\n      at Object.log (jest.setup.js:126:9)\n\n    console.log\n      Skipping beforeunload listener setup (not in a browser environment or sendBeacon not supported).\n\n      at log (src/services/errorLoggingService.ts:126:17)\n\n    console.warn\n      Accès à prisma depuis le navigateur. Ceci est uniquement pour la référence TypeScript et ne fonctionnera pas.\n\n      74 |     }\n      75 |\n    > 76 |     console.warn('Accès à prisma depuis le navigateur. Ceci est uniquement pour la référence TypeScript et ne fonctionnera pas.');\n         |             ^\n      77 | }\n      78 |\n      79 | export { prismaInstance as prisma }; \n\n      at Object.warn (src/lib/prisma.ts:76:13)\n      at Object.require (src/modules/leaves/services/leaveService.ts:43:1)\n      at Object.require (src/modules/leaves/hooks/useLeave.ts:13:1)\n      at Object.<anonymous> (src/modules/leaves/hooks/useLeave.test.ts:2:1)\n\n    console.error\n      Erreur dans checkAllowance: Error: Allowance check failed\n          at Object.<anonymous> (/Users/vincentperreard/Mathildanesth/src/modules/leaves/hooks/useLeave.test.ts:670:31)\n          at Promise.then.completed (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:316:40)\n          at _runTest (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:121:9)\n          at run (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:74:19)\n          at runTestInternal (/Users/vincentperreard/Mathildanesth/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/Users/vincentperreard/Mathildanesth/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/Users/vincentperreard/Mathildanesth/node_modules/jest-runner/build/testWorker.js:106:12)\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at Object.error [as checkAllowance] (src/modules/leaves/hooks/useLeave.ts:226:21)\n      at src/modules/leaves/hooks/useLeave.test.ts:680:21\n\n    console.error\n      Erreur dans checkAllowance: Error: Allowance check failed\n          at Object.<anonymous> (/Users/vincentperreard/Mathildanesth/src/modules/leaves/hooks/useLeave.test.ts:699:17)\n          at Promise.then.completed (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:316:40)\n          at _runTest (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:121:9)\n          at run (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:74:19)\n          at runTestInternal (/Users/vincentperreard/Mathildanesth/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/Users/vincentperreard/Mathildanesth/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/Users/vincentperreard/Mathildanesth/node_modules/jest-runner/build/testWorker.js:106:12)\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at Object.error [as checkAllowance] (src/modules/leaves/hooks/useLeave.ts:226:21)\n      at src/modules/leaves/hooks/useLeave.test.ts:710:21\n\n    console.error\n      Erreur dans saveLeaveAsDraft: Error: Save draft failed\n          at Object.<anonymous> (/Users/vincentperreard/Mathildanesth/src/modules/leaves/hooks/useLeave.test.ts:788:31)\n          at Promise.then.completed (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:316:40)\n          at _runTest (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:121:9)\n          at run (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:74:19)\n          at runTestInternal (/Users/vincentperreard/Mathildanesth/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/Users/vincentperreard/Mathildanesth/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/Users/vincentperreard/Mathildanesth/node_modules/jest-runner/build/testWorker.js:106:12)\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at Object.error [as saveLeaveAsDraft] (src/modules/leaves/hooks/useLeave.ts:269:21)\n      at src/modules/leaves/hooks/useLeave.test.ts:795:21\n\n    console.error\n      Erreur dans submitLeave: Error: Submit failed\n          at Object.<anonymous> (/Users/vincentperreard/Mathildanesth/src/modules/leaves/hooks/useLeave.test.ts:856:31)\n          at Promise.then.completed (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:316:40)\n          at _runTest (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:121:9)\n          at run (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:74:19)\n          at runTestInternal (/Users/vincentperreard/Mathildanesth/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/Users/vincentperreard/Mathildanesth/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/Users/vincentperreard/Mathildanesth/node_modules/jest-runner/build/testWorker.js:106:12)\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at Object.error [as submitLeave] (src/modules/leaves/hooks/useLeave.ts:318:21)\n      at src/modules/leaves/hooks/useLeave.test.ts:863:21\n\n    console.error\n      Erreur dans approveLeaveRequest: Error: Approve failed\n          at Object.<anonymous> (/Users/vincentperreard/Mathildanesth/src/modules/leaves/hooks/useLeave.test.ts:916:31)\n          at Promise.then.completed (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:316:40)\n          at _runTest (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:121:9)\n          at run (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:74:19)\n          at runTestInternal (/Users/vincentperreard/Mathildanesth/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/Users/vincentperreard/Mathildanesth/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/Users/vincentperreard/Mathildanesth/node_modules/jest-runner/build/testWorker.js:106:12)\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at Object.error [as approveLeaveRequest] (src/modules/leaves/hooks/useLeave.ts:347:21)\n      at src/modules/leaves/hooks/useLeave.test.ts:923:21\n\n    console.error\n      Erreur dans rejectLeaveRequest: Error: Reject failed\n          at Object.<anonymous> (/Users/vincentperreard/Mathildanesth/src/modules/leaves/hooks/useLeave.test.ts:973:31)\n          at Promise.then.completed (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:316:40)\n          at _runTest (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:121:9)\n          at run (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:74:19)\n          at runTestInternal (/Users/vincentperreard/Mathildanesth/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/Users/vincentperreard/Mathildanesth/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/Users/vincentperreard/Mathildanesth/node_modules/jest-runner/build/testWorker.js:106:12)\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at Object.error [as rejectLeaveRequest] (src/modules/leaves/hooks/useLeave.ts:376:21)\n      at src/modules/leaves/hooks/useLeave.test.ts:980:21\n\n    console.error\n      Erreur dans cancelLeaveRequest: Error: Cancel failed\n          at Object.<anonymous> (/Users/vincentperreard/Mathildanesth/src/modules/leaves/hooks/useLeave.test.ts:1027:31)\n          at Promise.then.completed (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:316:40)\n          at _runTest (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:121:9)\n          at run (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:74:19)\n          at runTestInternal (/Users/vincentperreard/Mathildanesth/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/Users/vincentperreard/Mathildanesth/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/Users/vincentperreard/Mathildanesth/node_modules/jest-runner/build/testWorker.js:106:12)\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at Object.error [as cancelLeaveRequest] (src/modules/leaves/hooks/useLeave.ts:405:21)\n      at src/modules/leaves/hooks/useLeave.test.ts:1034:21\n\n    console.error\n      Erreur dans fetchUserLeaves: Error: Fetch leaves failed\n          at Object.<anonymous> (/Users/vincentperreard/Mathildanesth/src/modules/leaves/hooks/useLeave.test.ts:1099:31)\n          at Promise.then.completed (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:316:40)\n          at _runTest (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:121:9)\n          at run (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:74:19)\n          at runTestInternal (/Users/vincentperreard/Mathildanesth/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/Users/vincentperreard/Mathildanesth/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/Users/vincentperreard/Mathildanesth/node_modules/jest-runner/build/testWorker.js:106:12)\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at error (src/modules/leaves/hooks/useLeave.ts:440:21)\n\n    console.error\n      Erreur dans fetchLeaveDetails: Error: Fetch details failed\n          at Object.<anonymous> (/Users/vincentperreard/Mathildanesth/src/modules/leaves/hooks/useLeave.test.ts:1148:31)\n          at Promise.then.completed (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:316:40)\n          at _runTest (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:121:9)\n          at _runTestsForDescribeBlock (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:121:9)\n          at run (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:74:19)\n          at runTestInternal (/Users/vincentperreard/Mathildanesth/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/Users/vincentperreard/Mathildanesth/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/Users/vincentperreard/Mathildanesth/node_modules/jest-runner/build/testWorker.js:106:12)\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at Object.error [as fetchLeaveDetails] (src/modules/leaves/hooks/useLeave.ts:462:21)\n      at src/modules/leaves/hooks/useLeave.test.ts:1154:17\n\n  ● useLeave Hook › should initialize with null leave and empty leaves array when no initialLeave provided\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: false\n    Received: true\n\n      172 |         expect(result.current.leave).toBeNull();\n      173 |         expect(result.current.leaves).toEqual([]);\n    > 174 |         expect(result.current.loading).toBe(false);\n          |                                        ^\n      175 |         expect(result.current.error).toBeNull();\n      176 |         expect(result.current.conflictCheckResult).toBeNull();\n      177 |         expect(result.current.allowanceCheckResult).toBeNull();\n\n      at Object.<anonymous> (src/modules/leaves/hooks/useLeave.test.ts:174:40)\n\n  ● useLeave Hook › checkConflicts › should call checkLeaveConflicts service with Date objects and update state on success\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n      461 |\n      462 |             // Vérifier que loading était true pendant l'appel\n    > 463 |             expect(loadingDuringCall).toBe(true);\n          |                                       ^\n      464 |\n      465 |             // Vérifier les états après l'appel\n      466 |             expect(result.current.loading).toBe(false);\n\n      at Object.<anonymous> (src/modules/leaves/hooks/useLeave.test.ts:463:39)\n\n  ● useLeave Hook › checkConflicts › should return null if userId is missing\n\n    expect(jest.fn()).not.toHaveBeenCalled()\n\n    Expected number of calls: 0\n    Received number of calls: 1\n\n    1: 2024-09-01T22:00:00.000Z, 2024-09-05T22:00:00.000Z, \"user123\", \"leave-initial\"\n\n      589 |\n      590 |             // Vérifier que le service n'a pas été appelé\n    > 591 |             expect(mockedCheckLeaveConflicts).not.toHaveBeenCalled();\n          |                                                   ^\n      592 |\n      593 |             // Vérifier que setError a été appelé avec les informations appropriées\n      594 |             expect(mockedSetError).toHaveBeenCalledWith(\n\n      at Object.<anonymous> (src/modules/leaves/hooks/useLeave.test.ts:591:51)\n\n  ● useLeave Hook › fetchUserLeaves › should set error state if fetchLeaves service fails\n\n    Fetch leaves failed\n\n      1097 |\n      1098 |         it('should set error state if fetchLeaves service fails', async () => {\n    > 1099 |             const mockError = new Error('Fetch leaves failed');\n           |                               ^\n      1100 |             mockedFetchLeaves.mockRejectedValueOnce(mockError);\n      1101 |\n      1102 |             const { result } = renderHook(() => useLeave({ userId: mockUserId }));\n\n      at Object.<anonymous> (src/modules/leaves/hooks/useLeave.test.ts:1099:31)\n\n  ● useLeave Hook › fetchUserLeaves › should set error state if fetchLeaves service fails\n\n    expect(received).toEqual(expected) // deep equality\n\n    - Expected  -  1\n    + Received  + 14\n\n    - Array []\n    + Array [\n    +   Object {\n    +     \"countedDays\": 5,\n    +     \"createdAt\": 2024-07-31T22:00:00.000Z,\n    +     \"endDate\": 2024-09-05T22:00:00.000Z,\n    +     \"id\": \"leave-initial\",\n    +     \"requestDate\": 2024-07-31T22:00:00.000Z,\n    +     \"startDate\": 2024-09-01T22:00:00.000Z,\n    +     \"status\": \"DRAFT\",\n    +     \"type\": \"ANNUAL\",\n    +     \"updatedAt\": 2024-07-31T22:00:00.000Z,\n    +     \"userId\": \"user123\",\n    +   },\n    + ]\n\n      1119 |                 severity: 'error'\n      1120 |             });\n    > 1121 |             expect(result.current.leaves).toEqual([]); // Liste reste vide\n           |                                           ^\n      1122 |         });\n      1123 |     });\n      1124 |\n\n      at Object.<anonymous> (src/modules/leaves/hooks/useLeave.test.ts:1121:43)\n\n  ● useLeave Hook › fetchLeaveDetails › should set error state if fetchLeaveById service fails\n\n    Fetch details failed\n\n      1146 |         it('should set error state if fetchLeaveById service fails', async () => {\n      1147 |             const specificLeaveId = 'leave-fail';\n    > 1148 |             const mockError = new Error('Fetch details failed');\n           |                               ^\n      1149 |             mockedFetchLeaveById.mockRejectedValueOnce(mockError);\n      1150 |\n      1151 |             const { result } = renderHook(() => useLeave({ userId: mockUserId }));\n\n      at Object.<anonymous> (src/modules/leaves/hooks/useLeave.test.ts:1148:31)\n\nFAIL src/modules/leaves/permissions/__tests__/LeavePermissionService.extended.test.ts\n  ● Console\n\n    console.log\n      jest.polyfills.js loaded and applied.\n\n      at Object.<anonymous> (jest.polyfills.js:247:9)\n\n    console.log\n      jest.setup.js loaded and mocks applied.\n\n      at Object.log (jest.setup.js:126:9)\n\n    console.debug\n      [EventBusProfiler] Initialized\n\n      at new debug (src/modules/integration/services/EventBusProfiler.ts:77:17)\n\n    console.error\n      Erreur lors du chargement des permissions personnalisées: TypeError: Only absolute URLs are supported\n          at getNodeRequestOptions (/Users/vincentperreard/Mathildanesth/node_modules/node-fetch/lib/index.js:1327:9)\n          at getNodeRequestOptions (/Users/vincentperreard/Mathildanesth/node_modules/node-fetch/lib/index.js:1450:19)\n          at new Promise (<anonymous>)\n          at fetch (/Users/vincentperreard/Mathildanesth/node_modules/node-fetch/lib/index.js:1447:9)\n          at call (/Users/vincentperreard/Mathildanesth/node_modules/cross-fetch/dist/node-ponyfill.js:10:20)\n          at LeavePermissionService.fetch [as loadCustomPermissions] (/Users/vincentperreard/Mathildanesth/src/modules/leaves/permissions/LeavePermissionService.ts:450:36)\n          at new loadCustomPermissions (/Users/vincentperreard/Mathildanesth/src/modules/leaves/permissions/LeavePermissionService.ts:237:14)\n          at Function.getInstance (/Users/vincentperreard/Mathildanesth/src/modules/leaves/permissions/LeavePermissionService.ts:201:47)\n          at Object.getInstance (/Users/vincentperreard/Mathildanesth/src/modules/leaves/permissions/LeavePermissionService.ts:1049:62)\n          at Runtime._execModule (/Users/vincentperreard/Mathildanesth/node_modules/jest-runtime/build/index.js:1439:24)\n          at Runtime._loadModule (/Users/vincentperreard/Mathildanesth/node_modules/jest-runtime/build/index.js:1022:12)\n          at Runtime.requireModule (/Users/vincentperreard/Mathildanesth/node_modules/jest-runtime/build/index.js:882:12)\n          at Runtime.requireModuleOrMock (/Users/vincentperreard/Mathildanesth/node_modules/jest-runtime/build/index.js:1048:21)\n          at Object.<anonymous> (/Users/vincentperreard/Mathildanesth/src/modules/leaves/permissions/__tests__/LeavePermissionService.extended.test.ts:1:1)\n          at Runtime._execModule (/Users/vincentperreard/Mathildanesth/node_modules/jest-runtime/build/index.js:1439:24)\n          at Runtime._loadModule (/Users/vincentperreard/Mathildanesth/node_modules/jest-runtime/build/index.js:1022:12)\n          at Runtime.requireModule (/Users/vincentperreard/Mathildanesth/node_modules/jest-runtime/build/index.js:882:12)\n          at jestAdapter (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:72:13)\n          at processTicksAndRejections (node:internal/process/task_queues:105:5)\n          at runTestInternal (/Users/vincentperreard/Mathildanesth/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/Users/vincentperreard/Mathildanesth/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/Users/vincentperreard/Mathildanesth/node_modules/jest-runner/build/testWorker.js:106:12)\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at LeavePermissionService.error [as loadCustomPermissions] (src/modules/leaves/permissions/LeavePermissionService.ts:474:21)\n\n    console.info\n      [DEBUG] grantPermission called for user: user-123, permission: leaves.reports.view\n\n      at console.<anonymous> (src/modules/leaves/permissions/__tests__/LeavePermissionService.extended.test.ts:179:25)\n\n    console.info\n      [DEBUG] grantPermission: Current user performing action: id=admin-123, role=ADMIN_TOTAL\n\n      at console.<anonymous> (src/modules/leaves/permissions/__tests__/LeavePermissionService.extended.test.ts:179:25)\n\n    console.info\n      [DEBUG] grantPermission: hasAuth (MANAGE_LEAVE_RULES) for admin-123: true\n\n      at console.<anonymous> (src/modules/leaves/permissions/__tests__/LeavePermissionService.extended.test.ts:179:25)\n\n    console.info\n      [DEBUG] grantPermission: saveCustomPermissions result for user-123: true\n\n      at console.<anonymous> (src/modules/leaves/permissions/__tests__/LeavePermissionService.extended.test.ts:179:25)\n\n    console.info\n      [DEBUG] revokePermission called for user: user-123, permission: leaves.reports.view\n\n      at console.<anonymous> (src/modules/leaves/permissions/__tests__/LeavePermissionService.extended.test.ts:179:25)\n\n    console.info\n      [DEBUG] revokePermission: saveCustomPermissions result for user-123: true\n\n      at console.<anonymous> (src/modules/leaves/permissions/__tests__/LeavePermissionService.extended.test.ts:179:25)\n\n    console.info\n      [DEBUG] grantPermission called for user: user-123, permission: leaves.reports.view\n\n      at console.<anonymous> (src/modules/leaves/permissions/__tests__/LeavePermissionService.extended.test.ts:179:25)\n\n    console.info\n      [DEBUG] grantPermission: Current user performing action: id=admin-123, role=ADMIN_TOTAL\n\n      at console.<anonymous> (src/modules/leaves/permissions/__tests__/LeavePermissionService.extended.test.ts:179:25)\n\n    console.info\n      [DEBUG] grantPermission: hasAuth (MANAGE_LEAVE_RULES) for admin-123: true\n\n      at console.<anonymous> (src/modules/leaves/permissions/__tests__/LeavePermissionService.extended.test.ts:179:25)\n\n    console.info\n      [DEBUG] grantPermission: saveCustomPermissions result for user-123: false\n\n      at console.<anonymous> (src/modules/leaves/permissions/__tests__/LeavePermissionService.extended.test.ts:179:25)\n\n    console.info\n      [DEBUG] revokePermission called for user: user-123, permission: leaves.reports.view\n\n      at console.<anonymous> (src/modules/leaves/permissions/__tests__/LeavePermissionService.extended.test.ts:179:25)\n\n    console.info\n      [DEBUG] revokePermission: saveCustomPermissions result for user-123: false\n\n      at console.<anonymous> (src/modules/leaves/permissions/__tests__/LeavePermissionService.extended.test.ts:179:25)\n\n  ● LeavePermissionService (Tests avancés) › Cache de permissions › devrait invalider le cache d'un utilisateur\n\n    Property `delete` does not exist in the provided object\n\n      186 |             // Arrange\n      187 |             const userId = mockEmployee.id;\n    > 188 |             const cacheSpy = jest.spyOn(permissionService['permissionCache'], 'delete');\n          |                                   ^\n      189 |\n      190 |             // Act\n      191 |             permissionService.invalidateUserCache(mockEmployee.id);\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:731:13)\n      at Object.<anonymous> (src/modules/leaves/permissions/__tests__/LeavePermissionService.extended.test.ts:188:35)\n\n  ● LeavePermissionService (Tests avancés) › Cache de permissions › devrait configurer le cache avec les options fournies\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n      212 |\n      213 |             // Assert\n    > 214 |             expect(optionsSpy).toHaveBeenCalled();\n          |                                ^\n      215 |\n      216 |             // Note: Ne pas tester les stats ici car elles peuvent varier en fonction de l'environnement\n      217 |             // et de l'ordre d'exécution des tests\n\n      at Object.<anonymous> (src/modules/leaves/permissions/__tests__/LeavePermissionService.extended.test.ts:214:32)\n\nFAIL src/modules/leaves/hooks/useLeaveQuota.test.ts\n  ● Console\n\n    console.log\n      jest.polyfills.js loaded and applied.\n\n      at Object.<anonymous> (jest.polyfills.js:247:9)\n\n    console.log\n      jest.setup.js loaded and mocks applied.\n\n      at Object.log (jest.setup.js:126:9)\n\n    console.error\n      Erreur lors de la récupération des quotas de congés Error: Erreur de chargement des quotas\n          at Object.<anonymous> (/Users/vincentperreard/Mathildanesth/src/modules/leaves/hooks/useLeaveQuota.test.ts:196:60)\n          at Promise.then.completed (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:316:40)\n          at _runTest (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:121:9)\n          at run (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:74:19)\n          at runTestInternal (/Users/vincentperreard/Mathildanesth/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/Users/vincentperreard/Mathildanesth/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/Users/vincentperreard/Mathildanesth/node_modules/jest-runner/build/testWorker.js:106:12)\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at Object.error [as refreshQuotas] (src/modules/leaves/hooks/useLeaveQuota.ts:246:21)\n      at src/modules/leaves/hooks/useLeaveQuota.test.ts:201:13\n\n  ● useLeaveQuota › devrait charger les quotas de congés\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 12\n    Received: 10\n\n       99 |         expect(result.current.totalBalance.pending).toBe(5);\n      100 |         expect(result.current.totalBalance.remaining).toBe(20);\n    > 101 |         expect(result.current.quotasByType.length).toBe(12); // Mise à jour pour tous les types incluant PATERNITY et PARENTAL\n          |                                                    ^\n      102 |     });\n      103 |\n      104 |     it('devrait récupérer le quota pour un type spécifique', async () => {\n\n      at Object.<anonymous> (src/modules/leaves/hooks/useLeaveQuota.test.ts:101:52)\n\n(node:80191) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.\n(Use `node --trace-deprecation ...` to show where the warning was created)\nPASS src/modules/leaves/__tests__/integration/riskDetectionSystem.test.ts\n  ● Console\n\n    console.log\n      jest.polyfills.js loaded and applied.\n\n      at Object.<anonymous> (jest.polyfills.js:247:9)\n\n    console.log\n      jest.setup.js loaded and mocks applied.\n\n      at Object.log (jest.setup.js:126:9)\n\n    console.log\n      Skipping beforeunload listener setup (not in a browser environment or sendBeacon not supported).\n\n      at log (src/services/errorLoggingService.ts:126:17)\n\n    console.log\n      Aucune période à risque future trouvée - test passé par défaut\n\n      at Object.<anonymous> (src/modules/leaves/__tests__/integration/riskDetectionSystem.test.ts:191:25)\n\n\n  ●  Cannot log after tests are done. Did you forget to wait for something async in your test?\n    Attempted to log \"[PublicHolidayService] Impossible de récupérer les jours fériés depuis l'API pour l'année 2025. Utilisation du calcul local.\".\n\n\n\n      at console.warn (node_modules/@jest/console/build/BufferedConsole.js:191:10)\n      at PublicHolidayService.getPublicHolidaysForYear (src/modules/leaves/services/publicHolidayService.ts:7441:15)\n          at async Promise.all (index 1)\n      at PublicHolidayService.preloadData (src/modules/leaves/services/publicHolidayService.ts:7072:7)\n\n\n  ●  Cannot log after tests are done. Did you forget to wait for something async in your test?\n    Attempted to log \"[PublicHolidayService] Impossible de récupérer les jours fériés depuis l'API pour l'année 2027. Utilisation du calcul local.\".\n\n\n\n      at console.warn (node_modules/@jest/console/build/BufferedConsole.js:191:10)\n      at PublicHolidayService.getPublicHolidaysForYear (src/modules/leaves/services/publicHolidayService.ts:7441:15)\n          at async Promise.all (index 3)\n      at PublicHolidayService.preloadData (src/modules/leaves/services/publicHolidayService.ts:7072:7)\n\nPASS src/modules/leaves/services/__tests__/leaveCalculator.test.ts\n  ● Console\n\n    console.log\n      jest.polyfills.js loaded and applied.\n\n      at Object.<anonymous> (jest.polyfills.js:247:9)\n\n    console.log\n      jest.setup.js loaded and mocks applied.\n\n      at Object.log (jest.setup.js:126:9)\n\n    console.log\n      Initializing console logger for client.\n\n      at log (src/utils/logger.ts:45:21)\n\n    console.info\n      Starting leave counted days calculation... {\n        startDate: '04/09/2023',\n        endDate: '08/09/2023',\n        scheduleId: 'full-time-test',\n        isHalfDay: false,\n        halfDayPeriod: undefined,\n        options: { forceCacheRefresh: true }\n      }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:140:16)\n\n    console.info\n      Fetched 0 public holidays for the period.\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:179:16)\n\n    console.info\n      Leave counted days calculation successful { countedDays: 5, workDays: 5, scheduleId: 'full-time-test' }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:345:16)\n\n    console.info\n      Starting leave counted days calculation... {\n        startDate: '04/09/2023',\n        endDate: '11/09/2023',\n        scheduleId: 'full-time-test',\n        isHalfDay: false,\n        halfDayPeriod: undefined,\n        options: { forceCacheRefresh: true }\n      }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:140:16)\n\n    console.info\n      Fetched 0 public holidays for the period.\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:179:16)\n\n    console.info\n      Leave counted days calculation successful { countedDays: 6, workDays: 6, scheduleId: 'full-time-test' }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:345:16)\n\n    console.info\n      Starting leave counted days calculation... {\n        startDate: '04/09/2023',\n        endDate: '08/09/2023',\n        scheduleId: 'full-time-test',\n        isHalfDay: false,\n        halfDayPeriod: undefined,\n        options: { skipHolidays: true, forceCacheRefresh: true }\n      }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:140:16)\n\n    console.info\n      Fetched 1 public holidays for the period.\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:179:16)\n\n    console.info\n      Leave counted days calculation successful { countedDays: 4, workDays: 4, scheduleId: 'full-time-test' }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:345:16)\n\n    console.info\n      Starting leave counted days calculation... {\n        startDate: '04/09/2023',\n        endDate: '08/09/2023',\n        scheduleId: 'full-time-test',\n        isHalfDay: false,\n        halfDayPeriod: undefined,\n        options: { skipHolidays: false, forceCacheRefresh: true }\n      }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:140:16)\n\n    console.info\n      Fetched 1 public holidays for the period.\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:179:16)\n\n    console.info\n      Leave counted days calculation successful { countedDays: 5, workDays: 5, scheduleId: 'full-time-test' }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:345:16)\n\n    console.info\n      Starting leave counted days calculation... {\n        startDate: '04/09/2023',\n        endDate: '08/09/2023',\n        scheduleId: 'full-time-test',\n        isHalfDay: true,\n        halfDayPeriod: 'AM',\n        options: { isHalfDay: true, forceCacheRefresh: true }\n      }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:140:16)\n\n    console.info\n      Fetched 0 public holidays for the period.\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:179:16)\n\n    console.info\n      Leave counted days calculation successful { countedDays: 4.5, workDays: 5, scheduleId: 'full-time-test' }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:345:16)\n\n    console.info\n      Starting leave counted days calculation... {\n        startDate: '04/09/2023',\n        endDate: '08/09/2023',\n        scheduleId: 'part-time-test',\n        isHalfDay: false,\n        halfDayPeriod: undefined,\n        options: { forceCacheRefresh: true }\n      }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:140:16)\n\n    console.info\n      Fetched 0 public holidays for the period.\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:179:16)\n\n    console.info\n      Leave counted days calculation successful { countedDays: 3, workDays: 5, scheduleId: 'part-time-test' }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:345:16)\n\n    console.info\n      Starting leave counted days calculation... {\n        startDate: '08/09/2023',\n        endDate: '10/09/2023',\n        scheduleId: 'full-time-test',\n        isHalfDay: false,\n        halfDayPeriod: undefined,\n        options: { forceCacheRefresh: true }\n      }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:140:16)\n\n    console.info\n      Fetched 1 public holidays for the period.\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:179:16)\n\n    console.info\n      Leave counted days calculation successful { countedDays: 1, workDays: 1, scheduleId: 'full-time-test' }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:345:16)\n\n    console.info\n      Starting leave counted days calculation... {\n        startDate: '08/09/2023',\n        endDate: '10/09/2023',\n        scheduleId: 'full-time-test',\n        isHalfDay: false,\n        halfDayPeriod: undefined,\n        options: {\n          countHolidaysOnWeekends: true,\n          skipHolidays: false,\n          forceCacheRefresh: true\n        }\n      }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:140:16)\n\n    console.info\n      Fetched 1 public holidays for the period.\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:179:16)\n\n    console.info\n      Leave counted days calculation successful { countedDays: 2, workDays: 1, scheduleId: 'full-time-test' }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:345:16)\n\n    console.info\n      Starting leave counted days calculation... {\n        startDate: '04/09/2023',\n        endDate: '08/09/2023',\n        scheduleId: 'full-time-test',\n        isHalfDay: false,\n        halfDayPeriod: undefined,\n        options: undefined\n      }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:140:16)\n\n    console.info\n      Fetched 0 public holidays for the period.\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:179:16)\n\n    console.info\n      Leave counted days calculation successful { countedDays: 5, workDays: 5, scheduleId: 'full-time-test' }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:345:16)\n\n    console.warn\n      Invalid dates provided to calculateLeaveCountedDays {\n        startDateInput: 2023-09-07T22:00:00.000Z,\n        endDateInput: 2023-09-03T22:00:00.000Z\n      }\n\n      117 |         // Vérifier que la date de fin est après la date de début\n      118 |         if (isAfter(startDate, endDate)) {\n    > 119 |             logger.warn('Invalid dates provided to calculateLeaveCountedDays', { startDateInput, endDateInput });\n          |                    ^\n      120 |             return null;\n      121 |         }\n      122 |\n\n      at warn (src/modules/leaves/services/leaveCalculator.ts:119:20)\n      at Object.<anonymous> (src/modules/leaves/services/__tests__/leaveCalculator.test.ts:197:28)\n\n    console.info\n      Starting leave counted days calculation... {\n        startDate: '04/09/2023',\n        endDate: '04/09/2023',\n        scheduleId: 'full-time-test',\n        isHalfDay: true,\n        halfDayPeriod: 'AM',\n        options: { isHalfDay: true, halfDayPeriod: 'AM', forceCacheRefresh: true }\n      }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:140:16)\n\n    console.info\n      Fetched 0 public holidays for the period.\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:179:16)\n\n    console.info\n      Leave counted days calculation successful { countedDays: 0.5, workDays: 1, scheduleId: 'full-time-test' }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:345:16)\n\n    console.info\n      Starting leave counted days calculation... {\n        startDate: '04/09/2023',\n        endDate: '04/09/2023',\n        scheduleId: 'full-time-test',\n        isHalfDay: true,\n        halfDayPeriod: 'PM',\n        options: { isHalfDay: true, halfDayPeriod: 'PM', forceCacheRefresh: true }\n      }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:140:16)\n\n    console.info\n      Fetched 0 public holidays for the period.\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:179:16)\n\n    console.info\n      Leave counted days calculation successful { countedDays: 0.5, workDays: 1, scheduleId: 'full-time-test' }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:345:16)\n\n    console.info\n      Starting leave counted days calculation... {\n        startDate: '04/09/2023',\n        endDate: '05/09/2023',\n        scheduleId: 'full-time-test',\n        isHalfDay: true,\n        halfDayPeriod: 'AM',\n        options: { isHalfDay: true, forceCacheRefresh: true }\n      }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:140:16)\n\n    console.info\n      Fetched 0 public holidays for the period.\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:179:16)\n\n    console.info\n      Leave counted days calculation successful { countedDays: 1.5, workDays: 2, scheduleId: 'full-time-test' }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:345:16)\n\n    console.info\n      Starting leave counted days calculation... {\n        startDate: '04/09/2023',\n        endDate: '05/09/2023',\n        scheduleId: 'full-time-test',\n        isHalfDay: false,\n        halfDayPeriod: undefined,\n        options: { skipHolidays: true, forceCacheRefresh: true }\n      }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:140:16)\n\n    console.info\n      Fetched 0 public holidays for the period.\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:179:16)\n\n    console.info\n      Leave counted days calculation successful { countedDays: 2, workDays: 2, scheduleId: 'full-time-test' }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:345:16)\n\n    console.info\n      Calculating working days... { startDate: '04/09/2023', endDate: '08/09/2023', options: undefined }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:389:16)\n\n    console.info\n      Fetched 0 public holidays for working days calculation.\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:398:16)\n\n    console.info\n      Working days calculated: 5\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:433:16)\n\n    console.info\n      Calculating working days... { startDate: '04/09/2023', endDate: '10/09/2023', options: undefined }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:389:16)\n\n    console.info\n      Fetched 0 public holidays for working days calculation.\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:398:16)\n\n    console.info\n      Working days calculated: 5\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:433:16)\n\n    console.info\n      Calculating working days... { startDate: '04/09/2023', endDate: '08/09/2023', options: undefined }\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:389:16)\n\n    console.info\n      Fetched 1 public holidays for working days calculation.\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:398:16)\n\n    console.info\n      Working days calculated: 4\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:433:16)\n\n    console.info\n      Checking if 04/09/2023 is a business day...\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:469:16)\n\n    console.info\n      Result for 04/09/2023: isWeekend=false, isHoliday=false\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:471:16)\n\n    console.info\n      Checking if 05/09/2023 is a business day...\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:469:16)\n\n    console.info\n      Result for 05/09/2023: isWeekend=false, isHoliday=true\n\n      at info (src/modules/leaves/services/leaveCalculator.ts:471:16)\n\n    console.warn\n      Invalid date provided to isBusinessDay { date: null }\n\n      459 |         const dateObj = parseDate(date);\n      460 |         if (!dateObj) {\n    > 461 |             logger.warn('Invalid date provided to isBusinessDay', { date });\n          |                    ^\n      462 |             return false;\n      463 |         }\n      464 |\n\n      at warn (src/modules/leaves/services/leaveCalculator.ts:461:20)\n      at Object.<anonymous> (src/modules/leaves/services/__tests__/leaveCalculator.test.ts:299:28)\n\nPASS src/modules/leaves/api/__tests__/LeaveReportApi.test.ts\n  ● Console\n\n    console.log\n      jest.polyfills.js loaded and applied.\n\n      at Object.<anonymous> (jest.polyfills.js:247:9)\n\n    console.log\n      jest.setup.js loaded and mocks applied.\n\n      at Object.log (jest.setup.js:126:9)\n\nPASS src/modules/leaves/services/__tests__/quotaManagementService.test.ts\n  ● Console\n\n    console.log\n      jest.polyfills.js loaded and applied.\n\n      at Object.<anonymous> (jest.polyfills.js:247:9)\n\n    console.log\n      jest.setup.js loaded and mocks applied.\n\n      at Object.log (jest.setup.js:126:9)\n\n    console.log\n      >>> DEBUG: Dans catch getTransferRules\n\n      at QuotaManagementService.log [as getTransferRules] (src/modules/leaves/services/quotaManagementService.ts:71:21)\n\n    console.log\n      >>> DEBUG: Dans catch simulateTransfer\n\n      at QuotaManagementService.log [as simulateTransfer] (src/modules/leaves/services/quotaManagementService.ts:245:21)\n\n    console.log\n      >>> DEBUG: Dans catch requestTransfer\n\n      at QuotaManagementService.log [as requestTransfer] (src/modules/leaves/services/quotaManagementService.ts:306:21)\n\n    console.log\n      >>> DEBUG: Dans catch getUserTransactionHistory\n\n      at QuotaManagementService.log [as getUserTransactionHistory] (src/modules/leaves/services/quotaManagementService.ts:190:21)\n\n    console.error\n      Échec du traitement de la demande de transfert:\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at QuotaManagementService.error [as processTransferRequest] (src/modules/leaves/services/quotaManagementService.ts:354:21)\n      at Object.<anonymous> (src/modules/leaves/services/__tests__/quotaManagementService.test.ts:341:24)\n\n    console.error\n      Échec du traitement de la demande de transfert:\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at QuotaManagementService.error [as processTransferRequest] (src/modules/leaves/services/quotaManagementService.ts:354:21)\n      at Object.<anonymous> (src/modules/leaves/services/__tests__/quotaManagementService.test.ts:384:24)\n\n    console.log\n      >>> DEBUG: Dans catch getCarryOverRules\n\n      at QuotaManagementService.log [as getCarryOverRules] (src/modules/leaves/services/quotaManagementService.ts:98:21)\n\n    console.error\n      Échec de la demande de report:\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at QuotaManagementService.error [as requestCarryOver] (src/modules/leaves/services/quotaManagementService.ts:467:21)\n      at Object.<anonymous> (src/modules/leaves/services/__tests__/quotaManagementService.test.ts:477:28)\n\n    console.error\n      Échec du traitement de la demande de report:\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at QuotaManagementService.error [as processCarryOverRequest] (src/modules/leaves/services/quotaManagementService.ts:515:21)\n      at Object.<anonymous> (src/modules/leaves/services/__tests__/quotaManagementService.test.ts:534:28)\n\nFAIL src/modules/leaves/quotas/transfer/__tests__/useQuotaTransfer.test.tsx\n  ● Console\n\n    console.log\n      jest.polyfills.js loaded and applied.\n\n      at Object.<anonymous> (jest.polyfills.js:247:9)\n\n    console.log\n      jest.setup.js loaded and mocks applied.\n\n      at Object.log (jest.setup.js:126:9)\n\n    console.error\n      Erreur lors de la simulation du transfert Error: Aucune règle de transfert n'est disponible pour Récupération vers Congés annuels\n          at Object.simulateTransfer (/Users/vincentperreard/Mathildanesth/src/modules/leaves/quotas/transfer/useQuotaTransfer.ts:248:23)\n          at /Users/vincentperreard/Mathildanesth/src/modules/leaves/quotas/transfer/__tests__/useQuotaTransfer.test.tsx:179:53\n          at callback (/Users/vincentperreard/Mathildanesth/node_modules/@testing-library/react/dist/act-compat.js:48:24)\n          at callback (/Users/vincentperreard/Mathildanesth/node_modules/react/cjs/react.development.js:2512:16)\n          at actImplementation (/Users/vincentperreard/Mathildanesth/node_modules/@testing-library/react/dist/act-compat.js:47:25)\n          at Object.<anonymous> (/Users/vincentperreard/Mathildanesth/src/modules/leaves/quotas/transfer/__tests__/useQuotaTransfer.test.tsx:178:18)\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at Object.error [as simulateTransfer] (src/modules/leaves/quotas/transfer/useQuotaTransfer.ts:267:21)\n      at src/modules/leaves/quotas/transfer/__tests__/useQuotaTransfer.test.tsx:179:53\n      at callback (node_modules/@testing-library/react/dist/act-compat.js:48:24)\n      at callback (node_modules/react/cjs/react.development.js:2512:16)\n      at actImplementation (node_modules/@testing-library/react/dist/act-compat.js:47:25)\n      at Object.<anonymous> (src/modules/leaves/quotas/transfer/__tests__/useQuotaTransfer.test.tsx:178:18)\n\n    console.error\n      Erreur lors de l'exécution du transfert Error: Aucune règle de transfert n'est disponible pour Récupération vers Congés annuels\n          at Object.executeTransfer (/Users/vincentperreard/Mathildanesth/src/modules/leaves/quotas/transfer/useQuotaTransfer.ts:298:23)\n          at /Users/vincentperreard/Mathildanesth/src/modules/leaves/quotas/transfer/__tests__/useQuotaTransfer.test.tsx:219:51\n          at callback (/Users/vincentperreard/Mathildanesth/node_modules/@testing-library/react/dist/act-compat.js:48:24)\n          at callback (/Users/vincentperreard/Mathildanesth/node_modules/react/cjs/react.development.js:2512:16)\n          at actImplementation (/Users/vincentperreard/Mathildanesth/node_modules/@testing-library/react/dist/act-compat.js:47:25)\n          at Object.<anonymous> (/Users/vincentperreard/Mathildanesth/src/modules/leaves/quotas/transfer/__tests__/useQuotaTransfer.test.tsx:218:18)\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at Object.error [as executeTransfer] (src/modules/leaves/quotas/transfer/useQuotaTransfer.ts:312:21)\n      at src/modules/leaves/quotas/transfer/__tests__/useQuotaTransfer.test.tsx:219:51\n      at callback (node_modules/@testing-library/react/dist/act-compat.js:48:24)\n      at callback (node_modules/react/cjs/react.development.js:2512:16)\n      at actImplementation (node_modules/@testing-library/react/dist/act-compat.js:47:25)\n      at Object.<anonymous> (src/modules/leaves/quotas/transfer/__tests__/useQuotaTransfer.test.tsx:218:18)\n\n    console.error\n      Erreur lors de l'exécution du transfert Error: Aucune règle de transfert n'est disponible pour Récupération vers Congés annuels\n          at Object.executeTransfer (/Users/vincentperreard/Mathildanesth/src/modules/leaves/quotas/transfer/useQuotaTransfer.ts:298:23)\n          at /Users/vincentperreard/Mathildanesth/src/modules/leaves/quotas/transfer/__tests__/useQuotaTransfer.test.tsx:254:51\n          at callback (/Users/vincentperreard/Mathildanesth/node_modules/@testing-library/react/dist/act-compat.js:48:24)\n          at callback (/Users/vincentperreard/Mathildanesth/node_modules/react/cjs/react.development.js:2512:16)\n          at actImplementation (/Users/vincentperreard/Mathildanesth/node_modules/@testing-library/react/dist/act-compat.js:47:25)\n          at Object.<anonymous> (/Users/vincentperreard/Mathildanesth/src/modules/leaves/quotas/transfer/__tests__/useQuotaTransfer.test.tsx:253:18)\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at Object.error [as executeTransfer] (src/modules/leaves/quotas/transfer/useQuotaTransfer.ts:312:21)\n      at src/modules/leaves/quotas/transfer/__tests__/useQuotaTransfer.test.tsx:254:51\n      at callback (node_modules/@testing-library/react/dist/act-compat.js:48:24)\n      at callback (node_modules/react/cjs/react.development.js:2512:16)\n      at actImplementation (node_modules/@testing-library/react/dist/act-compat.js:47:25)\n      at Object.<anonymous> (src/modules/leaves/quotas/transfer/__tests__/useQuotaTransfer.test.tsx:253:18)\n\n    console.error\n      Erreur lors de l'exécution du transfert Error: Aucune règle de transfert n'est disponible pour Récupération vers Congés annuels\n          at Object.executeTransfer (/Users/vincentperreard/Mathildanesth/src/modules/leaves/quotas/transfer/useQuotaTransfer.ts:298:23)\n          at /Users/vincentperreard/Mathildanesth/src/modules/leaves/quotas/transfer/__tests__/useQuotaTransfer.test.tsx:300:51\n          at callback (/Users/vincentperreard/Mathildanesth/node_modules/@testing-library/react/dist/act-compat.js:48:24)\n          at callback (/Users/vincentperreard/Mathildanesth/node_modules/react/cjs/react.development.js:2512:16)\n          at actImplementation (/Users/vincentperreard/Mathildanesth/node_modules/@testing-library/react/dist/act-compat.js:47:25)\n          at Object.<anonymous> (/Users/vincentperreard/Mathildanesth/src/modules/leaves/quotas/transfer/__tests__/useQuotaTransfer.test.tsx:299:18)\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at Object.error [as executeTransfer] (src/modules/leaves/quotas/transfer/useQuotaTransfer.ts:312:21)\n      at src/modules/leaves/quotas/transfer/__tests__/useQuotaTransfer.test.tsx:300:51\n      at callback (node_modules/@testing-library/react/dist/act-compat.js:48:24)\n      at callback (node_modules/react/cjs/react.development.js:2512:16)\n      at actImplementation (node_modules/@testing-library/react/dist/act-compat.js:47:25)\n      at Object.<anonymous> (src/modules/leaves/quotas/transfer/__tests__/useQuotaTransfer.test.tsx:299:18)\n\n  ● useQuotaTransfer › devrait charger les données initiales\n\n    expect(received).not.toBeNull()\n\n    Received: null\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div />\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n      130 |         expect(result.current.error).toBeNull();\n      131 |\n    > 132 |         await waitFor(() => expect(result.current.balance).not.toBeNull());\n          |                                                                ^\n      133 |\n      134 |         // Vérifier l'état après chargement\n      135 |         expect(result.current.loading).toBe(false);\n\n      at src/modules/leaves/quotas/transfer/__tests__/useQuotaTransfer.test.tsx:132:64\n      at callback (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:76)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)\n\n  ● useQuotaTransfer › devrait calculer correctement les types disponibles\n\n    expect(received).toContain(expected) // indexOf\n\n    Expected value: \"ANNUAL\"\n    Received array: []\n\n      151 |\n      152 |         // Vérifier les types sources disponibles\n    > 153 |         expect(result.current.availableSourceTypes).toContain(LeaveType.ANNUAL);\n          |                                                     ^\n      154 |         expect(result.current.availableSourceTypes).toContain(LeaveType.RECOVERY);\n      155 |\n      156 |         // Vérifier les types cibles disponibles par source\n\n      at Object.<anonymous> (src/modules/leaves/quotas/transfer/__tests__/useQuotaTransfer.test.tsx:153:53)\n\n  ● useQuotaTransfer › devrait simuler un transfert correctement\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: {\"sourceAmount\": 5, \"sourceType\": \"RECOVERY\", \"targetType\": \"ANNUAL\", \"userId\": \"mock-user-id\"}, [{\"createdAt\": 2025-05-25T17:18:05.040Z, \"id\": \"rule-1\", \"isActive\": true, \"name\": \"Récupération vers Congés Annuels\", \"ratio\": 1, \"ruleType\": \"STANDARD\", \"sourceType\": \"RECOVERY\", \"targetType\": \"ANNUAL\", \"updatedAt\": 2025-05-25T17:18:05.040Z}]\n\n    Number of calls: 0\n\n      188 |\n      189 |         // Vérifier les appels et le résultat\n    > 190 |         expect(previewQuotaTransfer).toHaveBeenCalledWith(transferRequest, applicableRules);\n          |                                      ^\n      191 |         expect(simulationResult).toMatchObject({\n      192 |             success: true,\n      193 |             sourceAmount: 5,\n\n      at Object.<anonymous> (src/modules/leaves/quotas/transfer/__tests__/useQuotaTransfer.test.tsx:190:38)\n\n  ● useQuotaTransfer › devrait exécuter un transfert correctement\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: {\"sourceAmount\": 5, \"sourceType\": \"RECOVERY\", \"targetType\": \"ANNUAL\", \"userId\": \"mock-user-id\"}\n\n    Number of calls: 0\n\n      221 |\n      222 |         // Vérifier les appels et le résultat\n    > 223 |         expect(transferQuota).toHaveBeenCalledWith(transferRequest);\n          |                               ^\n      224 |         expect(fetchLeaveBalance).toHaveBeenCalledTimes(2);\n      225 |         expect(transferResult).toEqual(mockTransferResult);\n      226 |     });\n\n      at Object.<anonymous> (src/modules/leaves/quotas/transfer/__tests__/useQuotaTransfer.test.tsx:223:31)\n\n  ● useQuotaTransfer › devrait gérer les erreurs de transfert\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"Erreur lors du transfert\"\n    Received: \"Aucune règle de transfert n'est disponible pour Récupération vers Congés annuels\"\n\n      304 |         expect(transferResult.success).toBe(false);\n      305 |         expect(result.current.transferError).toBeInstanceOf(Error);\n    > 306 |         expect(result.current.transferError?.message).toBe(errorMessage);\n          |                                                       ^\n      307 |     });\n      308 | }); \n\n      at Object.<anonymous> (src/modules/leaves/quotas/transfer/__tests__/useQuotaTransfer.test.tsx:306:55)\n\nPASS src/modules/leaves/services/__tests__/notificationEventService.test.ts\n  ● Console\n\n    console.log\n      jest.polyfills.js loaded and applied.\n\n      at Object.<anonymous> (jest.polyfills.js:247:9)\n\n    console.log\n      jest.setup.js loaded and mocks applied.\n\n      at Object.log (jest.setup.js:126:9)\n\nPASS src/modules/leaves/components/__tests__/LeaveRequestForm.test.tsx\n  ● Console\n\n    console.log\n      jest.polyfills.js loaded and applied.\n\n      at Object.<anonymous> (jest.polyfills.js:247:9)\n\n    console.log\n      jest.setup.js loaded and mocks applied.\n\n      at Object.log (jest.setup.js:126:9)\n\nPASS src/modules/leaves/hooks/useLeaveValidation.test.ts\n  ● Console\n\n    console.log\n      jest.polyfills.js loaded and applied.\n\n      at Object.<anonymous> (jest.polyfills.js:247:9)\n\n    console.log\n      jest.setup.js loaded and mocks applied.\n\n      at Object.log (jest.setup.js:126:9)\n\n    console.log\n      Skipping beforeunload listener setup (not in a browser environment or sendBeacon not supported).\n\n      at log (src/services/errorLoggingService.ts:126:17)\n\n    console.debug\n      [LeaveValidation] Cache miss (0 hits, 1 misses)\n\n      at Object.debug [as validateLeaveRequest] (src/modules/leaves/hooks/useLeaveValidation.ts:212:17)\n\n    console.debug\n      [LeaveValidation] Cache miss (0 hits, 1 misses)\n\n      at Object.debug [as validateLeaveRequest] (src/modules/leaves/hooks/useLeaveValidation.ts:212:17)\n\n    console.debug\n      [LeaveValidation] Cache miss (0 hits, 1 misses)\n\n      at Object.debug [as validateLeaveRequest] (src/modules/leaves/hooks/useLeaveValidation.ts:212:17)\n\n    console.debug\n      [LeaveValidation] Cache miss (0 hits, 1 misses)\n\n      at Object.debug [as validateLeaveRequest] (src/modules/leaves/hooks/useLeaveValidation.ts:212:17)\n\n    console.debug\n      [LeaveValidation] Cache miss (0 hits, 1 misses)\n\n      at Object.debug [as validateLeaveRequest] (src/modules/leaves/hooks/useLeaveValidation.ts:212:17)\n\n    console.debug\n      [LeaveValidation] Cache miss (0 hits, 1 misses)\n\n      at Object.debug [as validateLeaveRequest] (src/modules/leaves/hooks/useLeaveValidation.ts:212:17)\n\n    console.debug\n      [LeaveValidation] Cache miss (0 hits, 1 misses)\n\n      at Object.debug [as validateLeaveRequest] (src/modules/leaves/hooks/useLeaveValidation.ts:212:17)\n\n    console.debug\n      [LeaveValidation] Cache miss (0 hits, 2 misses)\n\n      at Object.debug [as validateLeaveRequest] (src/modules/leaves/hooks/useLeaveValidation.ts:212:17)\n\n    console.debug\n      [LeaveValidation] Cache miss (0 hits, 1 misses)\n\n      at Object.debug [as validateLeaveRequest] (src/modules/leaves/hooks/useLeaveValidation.ts:212:17)\n\n    console.debug\n      [LeaveValidation] Cache miss (0 hits, 2 misses)\n\n      at Object.debug [as validateLeaveRequest] (src/modules/leaves/hooks/useLeaveValidation.ts:212:17)\n\n    console.debug\n      [LeaveValidation] Cache miss (0 hits, 1 misses)\n\n      at Object.debug [as validateLeaveRequest] (src/modules/leaves/hooks/useLeaveValidation.ts:212:17)\n\n    console.debug\n      [LeaveValidation] Cache miss (0 hits, 1 misses)\n\n      at Object.debug [as validateLeaveRequest] (src/modules/leaves/hooks/useLeaveValidation.ts:212:17)\n\nPASS src/modules/leaves/utils/__tests__/dateCalculations.test.ts\n  ● Console\n\n    console.log\n      jest.polyfills.js loaded and applied.\n\n      at Object.<anonymous> (jest.polyfills.js:247:9)\n\n    console.log\n      jest.setup.js loaded and mocks applied.\n\n      at Object.log (jest.setup.js:126:9)\n\nPASS src/modules/leaves/services/leaveService.test.ts\n  ● Console\n\n    console.log\n      jest.polyfills.js loaded and applied.\n\n      at Object.<anonymous> (jest.polyfills.js:247:9)\n\n    console.log\n      jest.setup.js loaded and mocks applied.\n\n      at Object.log (jest.setup.js:126:9)\n\nPASS src/modules/leaves/services/__tests__/AuditService.test.ts\n  ● Console\n\n    console.log\n      jest.polyfills.js loaded and applied.\n\n      at Object.<anonymous> (jest.polyfills.js:247:9)\n\n    console.log\n      jest.setup.js loaded and mocks applied.\n\n      at Object.log (jest.setup.js:126:9)\n\n    console.debug\n      [EventBusProfiler] Initialized\n\n      at new debug (src/modules/integration/services/EventBusProfiler.ts:77:17)\n\nPASS src/modules/leaves/hooks/useLeaveCalculation.test.ts\n  ● Console\n\n    console.log\n      jest.polyfills.js loaded and applied.\n\n      at Object.<anonymous> (jest.polyfills.js:247:9)\n\n    console.log\n      jest.setup.js loaded and mocks applied.\n\n      at Object.log (jest.setup.js:126:9)\n\nFAIL src/modules/leaves/services/conflictDetectionService.test.ts\n  ● Test suite failed to run\n\n    Cannot find module '../../../services/teamService' from 'src/modules/leaves/services/conflictDetectionService.test.ts'\n\n       8 |\n       9 | jest.mock('../../../services/userService');\n    > 10 | jest.mock('../../../services/teamService');\n         |      ^\n      11 | jest.mock('../../../utils/performanceLogger');\n      12 |\n      13 | const MockUserService = UserService as jest.MockedClass<typeof UserService>;\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)\n      at Object.<anonymous> (src/modules/leaves/services/conflictDetectionService.test.ts:10:6)\n\nPASS src/modules/leaves/hooks/useLeaveListFilteringSorting.test.ts\n  ● Console\n\n    console.log\n      jest.polyfills.js loaded and applied.\n\n      at Object.<anonymous> (jest.polyfills.js:247:9)\n\n    console.log\n      jest.setup.js loaded and mocks applied.\n\n      at Object.log (jest.setup.js:126:9)\n\nPASS src/modules/leaves/components/LeaveRequestForm.test.tsx\n  ● Console\n\n    console.log\n      jest.polyfills.js loaded and applied.\n\n      at Object.<anonymous> (jest.polyfills.js:247:9)\n\n    console.log\n      jest.setup.js loaded and mocks applied.\n\n      at Object.log (jest.setup.js:126:9)\n\n    console.log\n      Skipping beforeunload listener setup (not in a browser environment or sendBeacon not supported).\n\n      at log (src/services/errorLoggingService.ts:126:17)\n\n    console.warn\n      Accès à prisma depuis le navigateur. Ceci est uniquement pour la référence TypeScript et ne fonctionnera pas.\n\n      74 |     }\n      75 |\n    > 76 |     console.warn('Accès à prisma depuis le navigateur. Ceci est uniquement pour la référence TypeScript et ne fonctionnera pas.');\n         |             ^\n      77 | }\n      78 |\n      79 | export { prismaInstance as prisma }; \n\n      at Object.warn (src/lib/prisma.ts:76:13)\n      at Object.require (src/modules/leaves/services/leaveService.ts:43:1)\n      at Object.require (src/modules/leaves/hooks/useLeave.ts:13:1)\n      at Object.require (src/modules/leaves/components/LeaveRequestForm.tsx:10:1)\n      at Object.<anonymous> (src/modules/leaves/components/LeaveRequestForm.test.tsx:3:1)\n\n    console.log\n      Skipping beforeunload listener setup (not in a browser environment or sendBeacon not supported).\n\n      at log (src/services/errorLoggingService.ts:126:17)\n\n    console.warn\n      Accès à prisma depuis le navigateur. Ceci est uniquement pour la référence TypeScript et ne fonctionnera pas.\n\n      74 |     }\n      75 |\n    > 76 |     console.warn('Accès à prisma depuis le navigateur. Ceci est uniquement pour la référence TypeScript et ne fonctionnera pas.');\n         |             ^\n      77 | }\n      78 |\n      79 | export { prismaInstance as prisma }; \n\n      at Object.warn (src/lib/prisma.ts:76:13)\n      at Object.require (src/modules/leaves/services/leaveService.ts:43:1)\n      at Object.require (src/modules/leaves/hooks/useConflictDetection.ts:8:1)\n      at Object.require (src/modules/leaves/components/LeaveRequestForm.tsx:11:1)\n      at Object.<anonymous> (src/modules/leaves/components/LeaveRequestForm.test.tsx:3:1)\n\n    console.log\n      Skipping beforeunload listener setup (not in a browser environment or sendBeacon not supported).\n\n      at log (src/services/errorLoggingService.ts:126:17)\n\n    console.warn\n      Accès à prisma depuis le navigateur. Ceci est uniquement pour la référence TypeScript et ne fonctionnera pas.\n\n      74 |     }\n      75 |\n    > 76 |     console.warn('Accès à prisma depuis le navigateur. Ceci est uniquement pour la référence TypeScript et ne fonctionnera pas.');\n         |             ^\n      77 | }\n      78 |\n      79 | export { prismaInstance as prisma }; \n\n      at Object.warn (src/lib/prisma.ts:76:13)\n      at Object.require (src/modules/leaves/services/leaveService.ts:43:1)\n      at Object.require (src/modules/leaves/components/LeaveRequestForm.tsx:12:1)\n      at Object.<anonymous> (src/modules/leaves/components/LeaveRequestForm.test.tsx:3:1)\n\n    console.log\n      Skipping beforeunload listener setup (not in a browser environment or sendBeacon not supported).\n\n      at log (src/services/errorLoggingService.ts:126:17)\n\n    console.log\n      Skipping beforeunload listener setup (not in a browser environment or sendBeacon not supported).\n\n      at log (src/services/errorLoggingService.ts:126:17)\n\n    console.warn\n      Accès à prisma depuis le navigateur. Ceci est uniquement pour la référence TypeScript et ne fonctionnera pas.\n\n      74 |     }\n      75 |\n    > 76 |     console.warn('Accès à prisma depuis le navigateur. Ceci est uniquement pour la référence TypeScript et ne fonctionnera pas.');\n         |             ^\n      77 | }\n      78 |\n      79 | export { prismaInstance as prisma }; \n\n      at Object.warn (src/lib/prisma.ts:76:13)\n      at Object.require (src/modules/leaves/services/leaveService.ts:43:1)\n      at Object.require (src/modules/leaves/hooks/useLeaveQuota.ts:3:1)\n      at Object.require (src/modules/leaves/components/LeaveRequestForm.tsx:20:1)\n      at Object.<anonymous> (src/modules/leaves/components/LeaveRequestForm.test.tsx:3:1)\n\n    console.error\n      Warning: Each child in a list should have a unique \"key\" prop.\n      \n      Check the render method of `LeaveQuotaDisplay`. See https://reactjs.org/link/warning-keys for more information.\n          at div\n          at quotasByType (/Users/vincentperreard/Mathildanesth/src/modules/leaves/components/LeaveQuotaDisplay.tsx:26:5)\n          at div\n          at userId (/Users/vincentperreard/Mathildanesth/src/modules/leaves/components/LeaveRequestForm.tsx:42:5)\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at call (node_modules/react/cjs/react-jsx-runtime.development.js:87:30)\n      at printWarning (node_modules/react/cjs/react-jsx-runtime.development.js:61:7)\n      at error (node_modules/react/cjs/react-jsx-runtime.development.js:1078:5)\n      at validateExplicitKey (node_modules/react/cjs/react-jsx-runtime.development.js:1105:11)\n      at validateChildKeys (node_modules/react/cjs/react-jsx-runtime.development.js:1277:11)\n      at jsxWithValidation (node_modules/react/cjs/react-jsx-runtime.development.js:1320:12)\n      at LeaveQuotaDisplay (src/modules/leaves/components/LeaveQuotaDisplay.tsx:93:21)\n      at Component (node_modules/react-dom/cjs/react-dom.development.js:15486:18)\n      at renderWithHooks (node_modules/react-dom/cjs/react-dom.development.js:20103:13)\n      at mountIndeterminateComponent (node_modules/react-dom/cjs/react-dom.development.js:21626:16)\n      at beginWork (node_modules/react-dom/cjs/react-dom.development.js:27465:14)\n      at beginWork$1 (node_modules/react-dom/cjs/react-dom.development.js:26599:12)\n      at performUnitOfWork (node_modules/react-dom/cjs/react-dom.development.js:26505:5)\n      at workLoopSync (node_modules/react-dom/cjs/react-dom.development.js:26473:7)\n      at renderRootSync (node_modules/react-dom/cjs/react-dom.development.js:25777:74)\n      at callback (node_modules/react/cjs/react.development.js:2667:24)\n      at flushActQueue (node_modules/react/cjs/react.development.js:2582:11)\n      at actImplementation (node_modules/@testing-library/react/dist/act-compat.js:47:25)\n      at renderRoot (node_modules/@testing-library/react/dist/pure.js:190:25)\n      at renderRoot (node_modules/@testing-library/react/dist/pure.js:292:10)\n      at Object.<anonymous> (src/modules/leaves/components/LeaveRequestForm.test.tsx:122:15)\n\n    console.error\n      Error: AggregateError\n          at Object.dispatchError (/Users/vincentperreard/Mathildanesth/node_modules/jsdom/lib/jsdom/living/xhr/xhr-utils.js:63:19)\n          at Request.<anonymous> (/Users/vincentperreard/Mathildanesth/node_modules/jsdom/lib/jsdom/living/xhr/XMLHttpRequest-impl.js:655:18)\n          at Request.emit (node:events:530:35)\n          at ClientRequest.<anonymous> (/Users/vincentperreard/Mathildanesth/node_modules/jsdom/lib/jsdom/living/helpers/http-request.js:121:14)\n          at ClientRequest.emit (node:events:518:28)\n          at emitErrorEvent (node:_http_client:103:11)\n          at Socket.socketErrorListener (node:_http_client:506:5)\n          at Socket.emit (node:events:518:28)\n          at emitErrorNT (node:internal/streams/destroy:170:8)\n          at emitErrorCloseNT (node:internal/streams/destroy:129:3)\n          at processTicksAndRejections (node:internal/process/task_queues:90:21) {\n        type: 'XMLHttpRequest'\n      }\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at Object.dispatchError (node_modules/jsdom/lib/jsdom/living/xhr/xhr-utils.js:66:53)\n      at Request.<anonymous> (node_modules/jsdom/lib/jsdom/living/xhr/XMLHttpRequest-impl.js:655:18)\n      at ClientRequest.<anonymous> (node_modules/jsdom/lib/jsdom/living/helpers/http-request.js:121:14)\n\n    console.warn\n      [PublicHolidayService] Impossible de récupérer les jours fériés depuis l'API pour l'année 2024. Utilisation du calcul local.\n\n\n\n      at PublicHolidayService.getPublicHolidaysForYear (src/modules/leaves/services/publicHolidayService.ts:7441:15)\n          at async Promise.all (index 0)\n      at PublicHolidayService.preloadData (src/modules/leaves/services/publicHolidayService.ts:7072:7)\n\n    console.error\n      Error: AggregateError\n          at Object.dispatchError (/Users/vincentperreard/Mathildanesth/node_modules/jsdom/lib/jsdom/living/xhr/xhr-utils.js:63:19)\n          at Request.<anonymous> (/Users/vincentperreard/Mathildanesth/node_modules/jsdom/lib/jsdom/living/xhr/XMLHttpRequest-impl.js:655:18)\n          at Request.emit (node:events:530:35)\n          at ClientRequest.<anonymous> (/Users/vincentperreard/Mathildanesth/node_modules/jsdom/lib/jsdom/living/helpers/http-request.js:121:14)\n          at ClientRequest.emit (node:events:518:28)\n          at emitErrorEvent (node:_http_client:103:11)\n          at Socket.socketErrorListener (node:_http_client:506:5)\n          at Socket.emit (node:events:518:28)\n          at emitErrorNT (node:internal/streams/destroy:170:8)\n          at emitErrorCloseNT (node:internal/streams/destroy:129:3)\n          at processTicksAndRejections (node:internal/process/task_queues:90:21) {\n        type: 'XMLHttpRequest'\n      }\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at Object.dispatchError (node_modules/jsdom/lib/jsdom/living/xhr/xhr-utils.js:66:53)\n      at Request.<anonymous> (node_modules/jsdom/lib/jsdom/living/xhr/XMLHttpRequest-impl.js:655:18)\n      at ClientRequest.<anonymous> (node_modules/jsdom/lib/jsdom/living/helpers/http-request.js:121:14)\n\n    console.warn\n      [PublicHolidayService] Impossible de récupérer les jours fériés depuis l'API pour l'année 2025. Utilisation du calcul local.\n\n\n\n      at PublicHolidayService.getPublicHolidaysForYear (src/modules/leaves/services/publicHolidayService.ts:7441:15)\n          at async Promise.all (index 1)\n      at PublicHolidayService.preloadData (src/modules/leaves/services/publicHolidayService.ts:7072:7)\n\n    console.error\n      Error: AggregateError\n          at Object.dispatchError (/Users/vincentperreard/Mathildanesth/node_modules/jsdom/lib/jsdom/living/xhr/xhr-utils.js:63:19)\n          at Request.<anonymous> (/Users/vincentperreard/Mathildanesth/node_modules/jsdom/lib/jsdom/living/xhr/XMLHttpRequest-impl.js:655:18)\n          at Request.emit (node:events:530:35)\n          at ClientRequest.<anonymous> (/Users/vincentperreard/Mathildanesth/node_modules/jsdom/lib/jsdom/living/helpers/http-request.js:121:14)\n          at ClientRequest.emit (node:events:518:28)\n          at emitErrorEvent (node:_http_client:103:11)\n          at Socket.socketErrorListener (node:_http_client:506:5)\n          at Socket.emit (node:events:518:28)\n          at emitErrorNT (node:internal/streams/destroy:170:8)\n          at emitErrorCloseNT (node:internal/streams/destroy:129:3)\n          at processTicksAndRejections (node:internal/process/task_queues:90:21) {\n        type: 'XMLHttpRequest'\n      }\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at Object.dispatchError (node_modules/jsdom/lib/jsdom/living/xhr/xhr-utils.js:66:53)\n      at Request.<anonymous> (node_modules/jsdom/lib/jsdom/living/xhr/XMLHttpRequest-impl.js:655:18)\n      at ClientRequest.<anonymous> (node_modules/jsdom/lib/jsdom/living/helpers/http-request.js:121:14)\n\n    console.warn\n      [PublicHolidayService] Impossible de récupérer les jours fériés depuis l'API pour l'année 2026. Utilisation du calcul local.\n\n\n\n      at PublicHolidayService.getPublicHolidaysForYear (src/modules/leaves/services/publicHolidayService.ts:7441:15)\n          at async Promise.all (index 2)\n      at PublicHolidayService.preloadData (src/modules/leaves/services/publicHolidayService.ts:7072:7)\n\n    console.error\n      Error: AggregateError\n          at Object.dispatchError (/Users/vincentperreard/Mathildanesth/node_modules/jsdom/lib/jsdom/living/xhr/xhr-utils.js:63:19)\n          at Request.<anonymous> (/Users/vincentperreard/Mathildanesth/node_modules/jsdom/lib/jsdom/living/xhr/XMLHttpRequest-impl.js:655:18)\n          at Request.emit (node:events:530:35)\n          at ClientRequest.<anonymous> (/Users/vincentperreard/Mathildanesth/node_modules/jsdom/lib/jsdom/living/helpers/http-request.js:121:14)\n          at ClientRequest.emit (node:events:518:28)\n          at emitErrorEvent (node:_http_client:103:11)\n          at Socket.socketErrorListener (node:_http_client:506:5)\n          at Socket.emit (node:events:518:28)\n          at emitErrorNT (node:internal/streams/destroy:170:8)\n          at emitErrorCloseNT (node:internal/streams/destroy:129:3)\n          at processTicksAndRejections (node:internal/process/task_queues:90:21) {\n        type: 'XMLHttpRequest'\n      }\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at Object.dispatchError (node_modules/jsdom/lib/jsdom/living/xhr/xhr-utils.js:66:53)\n      at Request.<anonymous> (node_modules/jsdom/lib/jsdom/living/xhr/XMLHttpRequest-impl.js:655:18)\n      at ClientRequest.<anonymous> (node_modules/jsdom/lib/jsdom/living/helpers/http-request.js:121:14)\n\n    console.warn\n      [PublicHolidayService] Impossible de récupérer les jours fériés depuis l'API pour l'année 2027. Utilisation du calcul local.\n\n\n\n      at PublicHolidayService.getPublicHolidaysForYear (src/modules/leaves/services/publicHolidayService.ts:7441:15)\n          at async Promise.all (index 3)\n      at PublicHolidayService.preloadData (src/modules/leaves/services/publicHolidayService.ts:7072:7)\n\nPASS src/modules/leaves/components/LeaveCard.test.tsx\n  ● Console\n\n    console.log\n      jest.polyfills.js loaded and applied.\n\n      at Object.<anonymous> (jest.polyfills.js:247:9)\n\n    console.log\n      jest.setup.js loaded and mocks applied.\n\n      at Object.log (jest.setup.js:126:9)\n\nFAIL src/modules/leaves/hooks/__tests__/useConflictDetection.test.ts (5.56 s)\n  ● Console\n\n    console.log\n      jest.polyfills.js loaded and applied.\n\n      at Object.<anonymous> (jest.polyfills.js:247:9)\n\n    console.log\n      jest.setup.js loaded and mocks applied.\n\n      at Object.log (jest.setup.js:126:9)\n\n    console.error\n      Erreur dans checkConflicts: Error: Erreur réseau\n          at Object.<anonymous> (/Users/vincentperreard/Mathildanesth/src/modules/leaves/hooks/__tests__/useConflictDetection.test.ts:105:27)\n          at Promise.then.completed (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:316:40)\n          at _runTest (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:121:9)\n          at run (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:74:19)\n          at runTestInternal (/Users/vincentperreard/Mathildanesth/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/Users/vincentperreard/Mathildanesth/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/Users/vincentperreard/Mathildanesth/node_modules/jest-runner/build/testWorker.js:106:12)\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at error (src/modules/leaves/hooks/useConflictDetection.ts:205:25)\n      at src/modules/leaves/hooks/useConflictDetection.ts:233:36\n\n  ● useConflictDetection › devrait initialiser correctement l'état et vérifier les conflits\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: false\n    Received: true\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div />\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n      86 |\n      87 |         // Attendre la fin du chargement\n    > 88 |         await waitFor(() => expect(result.current.loading).toBe(false));\n         |                                                            ^\n      89 |\n      90 |         // Assert : vérifier que la méthode du *service* a été appelée (indirectement par le hook)\n      91 |         // Il faut peut-être ajuster ce que le hook passe au service\n\n      at src/modules/leaves/hooks/__tests__/useConflictDetection.test.ts:88:60\n      at callback (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:76)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)\n\n  ● useConflictDetection - resolveConflict › devrait appeler le service (indirectement) et mettre à jour l'état après résolution\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: false\n    Received: true\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div />\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n      160 |         // Charger les conflits initiaux en appelant checkConflicts avec des objets Date\n      161 |         act(() => { result.current.checkConflicts(mockStartDateObj, mockEndDateObj); });\n    > 162 |         await waitFor(() => expect(result.current.loading).toBe(false));\n          |                                                            ^\n      163 |         expect(result.current.conflicts).toEqual(initialConflictsResult.conflicts);\n      164 |         expect(result.current.hasBlockingConflicts).toBe(true);\n      165 |\n\n      at src/modules/leaves/hooks/__tests__/useConflictDetection.test.ts:162:60\n      at callback (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:76)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)\n\n  ● useConflictDetection - resolveConflict › devrait gérer les erreurs lors de la résolution\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: false\n    Received: true\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div />\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n      202 |         // Charger les conflits initiaux en appelant checkConflicts avec des objets Date\n      203 |         act(() => { result.current.checkConflicts(mockStartDateObj, mockEndDateObj); });\n    > 204 |         await waitFor(() => expect(result.current.loading).toBe(false));\n          |                                                            ^\n      205 |\n      206 |         // Act : Appeler resolveConflict du hook. On s'attend à ce qu'il échoue.\n      207 |         // Pour simuler l'échec, on pourrait mocker une dépendance ou modifier le hook\n\n      at src/modules/leaves/hooks/__tests__/useConflictDetection.test.ts:204:60\n      at callback (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:76)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)\n\n  ● useConflictDetection - getConflictsByType › devrait filtrer les conflits par type\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: false\n    Received: true\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div />\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n      244 |         // Charger les conflits en appelant checkConflicts avec des objets Date\n      245 |         act(() => { result.current.checkConflicts(mockStartDateObj, mockEndDateObj); });\n    > 246 |         await waitFor(() => expect(result.current.loading).toBe(false));\n          |                                                            ^\n      247 |\n      248 |         // Act & Assert : Appeler getConflictsByType du *hook*\n      249 |         expect(result.current.getConflictsByType(ConflictType.USER_LEAVE_OVERLAP)).toEqual([mockConflicts[0]]);\n\n      at src/modules/leaves/hooks/__tests__/useConflictDetection.test.ts:246:60\n      at callback (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:76)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)\n\nPASS src/modules/leaves/components/LeavesList.test.tsx\n  ● Console\n\n    console.log\n      jest.polyfills.js loaded and applied.\n\n      at Object.<anonymous> (jest.polyfills.js:247:9)\n\n    console.log\n      jest.setup.js loaded and mocks applied.\n\n      at Object.log (jest.setup.js:126:9)\n\n    console.log\n      Temps de rendu pour 100 congés: 92.79433400000016ms\n\n      at Object.<anonymous> (src/modules/leaves/components/LeavesList.test.tsx:1000:17)\n\n    console.log\n      Pagination non détectée, vérification de base uniquement\n\n      at Object.<anonymous> (src/modules/leaves/components/LeavesList.test.tsx:1199:25)\n\nFAIL src/modules/leaves/components/UserLeaveBalance.test.tsx (6.405 s)\n  ● Console\n\n    console.log\n      jest.polyfills.js loaded and applied.\n\n      at Object.<anonymous> (jest.polyfills.js:247:9)\n\n    console.log\n      jest.setup.js loaded and mocks applied.\n\n      at Object.log (jest.setup.js:126:9)\n\n    console.error\n      Erreur lors du chargement des soldes de congés: Error: Network error\n          at Object.<anonymous> (/Users/vincentperreard/Mathildanesth/src/modules/leaves/components/UserLeaveBalance.test.tsx:97:47)\n          at Promise.then.completed (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:316:40)\n          at _runTest (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:121:9)\n          at run (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:74:19)\n          at runTestInternal (/Users/vincentperreard/Mathildanesth/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/Users/vincentperreard/Mathildanesth/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/Users/vincentperreard/Mathildanesth/node_modules/jest-runner/build/testWorker.js:106:12)\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at error (src/modules/leaves/components/UserLeaveBalance.tsx:47:25)\n\n  ● UserLeaveBalance Component › affiche correctement les soldes de congés\n\n    Unable to find an element with the text: Congé Annuel. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div>\u001b[39m\n        \u001b[36m<div\u001b[39m\n          \u001b[33mclass\u001b[39m=\u001b[32m\"rounded-lg border bg-card text-card-foreground shadow-sm dark:bg-slate-800 dark:border-slate-700 w-full\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"flex flex-col space-y-1.5 p-6\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<h3\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"font-semibold tracking-tight bg-gradient-to-r from-primary-600 via-secondary-600 to-tertiary-600 bg-clip-text text-transparent text-lg\"\u001b[39m\n              \u001b[33mstyle\u001b[39m=\u001b[32m\"background-clip: text;\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mChargement des soldes...\u001b[0m\n            \u001b[36m</h3>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"p-6 pt-0\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"space-y-3\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</div>\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n      74 |\n      75 |         expectToBeInDocument(screen.getByText('Chargement des soldes...'));\n    > 76 |         await waitFor(() => {\n         |                      ^\n      77 |             expectToBeInDocument(screen.getByText('Congé Annuel'));\n      78 |         });\n      79 |\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at Object.<anonymous> (src/modules/leaves/components/UserLeaveBalance.test.tsx:76:22)\n\n  ● UserLeaveBalance Component › affiche un message d'erreur si le chargement échoue\n\n    Unable to find an element with the text: Erreur. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div>\u001b[39m\n        \u001b[36m<div\u001b[39m\n          \u001b[33mclass\u001b[39m=\u001b[32m\"rounded-lg border bg-card text-card-foreground shadow-sm dark:bg-slate-800 dark:border-slate-700 w-full\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"flex flex-col space-y-1.5 p-6\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<h3\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"font-semibold tracking-tight bg-gradient-to-r from-primary-600 via-secondary-600 to-tertiary-600 bg-clip-text text-transparent text-lg\"\u001b[39m\n              \u001b[33mstyle\u001b[39m=\u001b[32m\"background-clip: text;\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mChargement des soldes...\u001b[0m\n            \u001b[36m</h3>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"p-6 pt-0\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"space-y-3\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</div>\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n       97 |         mockedAxios.get.mockRejectedValueOnce(new Error('Network error'));\n       98 |         render(<UserLeaveBalance userId={123} />);\n    >  99 |         await waitFor(() => {\n          |                      ^\n      100 |             expectToBeInDocument(screen.getByText('Erreur'));\n      101 |         });\n      102 |         expectToBeInDocument(screen.getByText('Impossible de charger les soldes de congés'));\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at Object.<anonymous> (src/modules/leaves/components/UserLeaveBalance.test.tsx:99:22)\n\n  ● UserLeaveBalance Component › affiche un message si aucun solde n'est disponible\n\n    Unable to find an element with the text: Aucun solde disponible. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div>\u001b[39m\n        \u001b[36m<div\u001b[39m\n          \u001b[33mclass\u001b[39m=\u001b[32m\"rounded-lg border bg-card text-card-foreground shadow-sm dark:bg-slate-800 dark:border-slate-700 w-full\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"flex flex-col space-y-1.5 p-6\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<h3\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"font-semibold tracking-tight bg-gradient-to-r from-primary-600 via-secondary-600 to-tertiary-600 bg-clip-text text-transparent text-lg\"\u001b[39m\n              \u001b[33mstyle\u001b[39m=\u001b[32m\"background-clip: text;\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mChargement des soldes...\u001b[0m\n            \u001b[36m</h3>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"p-6 pt-0\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"space-y-3\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</div>\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n      106 |         mockedAxios.get.mockResolvedValueOnce({ data: [] });\n      107 |         render(<UserLeaveBalance userId={123} />);\n    > 108 |         await waitFor(() => {\n          |                      ^\n      109 |             expectToBeInDocument(screen.getByText('Aucun solde disponible'));\n      110 |         });\n      111 |     });\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at Object.<anonymous> (src/modules/leaves/components/UserLeaveBalance.test.tsx:108:22)\n\n  ● UserLeaveBalance Component › respecte l'option compact=true en masquant les détails\n\n    Unable to find an element with the text: Congé Annuel. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div>\u001b[39m\n        \u001b[36m<div\u001b[39m\n          \u001b[33mclass\u001b[39m=\u001b[32m\"rounded-lg border bg-card text-card-foreground shadow-sm dark:bg-slate-800 dark:border-slate-700 w-full\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"flex flex-col space-y-1.5 p-6\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<h3\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"font-semibold tracking-tight bg-gradient-to-r from-primary-600 via-secondary-600 to-tertiary-600 bg-clip-text text-transparent text-lg\"\u001b[39m\n              \u001b[33mstyle\u001b[39m=\u001b[32m\"background-clip: text;\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mChargement des soldes...\u001b[0m\n            \u001b[36m</h3>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"p-6 pt-0\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"space-y-3\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</div>\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n      114 |         mockedAxios.get.mockResolvedValueOnce({ data: mockBalanceData });\n      115 |         render(<UserLeaveBalance userId={123} compact={true} />);\n    > 116 |         await waitFor(() => {\n          |                      ^\n      117 |             expectToBeInDocument(screen.getByText('Congé Annuel'));\n      118 |         });\n      119 |         expectToBeInDocument(screen.getByText('15.5 jours'));\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at Object.<anonymous> (src/modules/leaves/components/UserLeaveBalance.test.tsx:116:22)\n\n  ● UserLeaveBalance Component › respecte l'option hideHeader=true\n\n    Unable to find an element with the text: Congé Annuel. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div>\u001b[39m\n        \u001b[36m<div\u001b[39m\n          \u001b[33mclass\u001b[39m=\u001b[32m\"rounded-lg border bg-card text-card-foreground shadow-sm dark:bg-slate-800 dark:border-slate-700 w-full\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"p-6 pt-0\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"space-y-3\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</div>\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n      126 |         mockedAxios.get.mockResolvedValueOnce({ data: mockBalanceData });\n      127 |         render(<UserLeaveBalance userId={123} hideHeader={true} />);\n    > 128 |         await waitFor(() => {\n          |                      ^\n      129 |             expectToBeInDocument(screen.getByText('Congé Annuel'));\n      130 |         });\n      131 |         expectNotToBeInDocument(screen.queryByText('Soldes de congés'));\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at Object.<anonymous> (src/modules/leaves/components/UserLeaveBalance.test.tsx:128:22)\n\nFAIL src/modules/leaves/components/LeaveForm.test.tsx (12.829 s)\n  ● Console\n\n    console.log\n      jest.polyfills.js loaded and applied.\n\n      at Object.<anonymous> (jest.polyfills.js:247:9)\n\n    console.log\n      jest.setup.js loaded and mocks applied.\n\n      at Object.log (jest.setup.js:126:9)\n\n    console.warn\n      [PublicHolidayService] Impossible de récupérer les jours fériés depuis l'API pour l'année 2024. Utilisation du calcul local.\n\n      283 |             return holidays;\n      284 |         } catch (error) {\n    > 285 |             console.warn(`[PublicHolidayService] Impossible de récupérer les jours fériés depuis l'API pour l'année ${year}. Utilisation du calcul local.`);\n          |                     ^\n      286 |\n      287 |             // Générer les jours fériés français en local\n      288 |             const holidays = this.calculateFrenchPublicHolidays(year);\n\n      at PublicHolidayService.warn [as getPublicHolidaysForYear] (src/modules/leaves/services/publicHolidayService.ts:285:21)\n          at async Promise.all (index 0)\n      at PublicHolidayService.preloadData (src/modules/leaves/services/publicHolidayService.ts:89:13)\n\n    console.warn\n      [PublicHolidayService] Impossible de récupérer les jours fériés depuis l'API pour l'année 2025. Utilisation du calcul local.\n\n      283 |             return holidays;\n      284 |         } catch (error) {\n    > 285 |             console.warn(`[PublicHolidayService] Impossible de récupérer les jours fériés depuis l'API pour l'année ${year}. Utilisation du calcul local.`);\n          |                     ^\n      286 |\n      287 |             // Générer les jours fériés français en local\n      288 |             const holidays = this.calculateFrenchPublicHolidays(year);\n\n      at PublicHolidayService.warn [as getPublicHolidaysForYear] (src/modules/leaves/services/publicHolidayService.ts:285:21)\n          at async Promise.all (index 1)\n      at PublicHolidayService.preloadData (src/modules/leaves/services/publicHolidayService.ts:89:13)\n\n    console.warn\n      [PublicHolidayService] Impossible de récupérer les jours fériés depuis l'API pour l'année 2026. Utilisation du calcul local.\n\n      283 |             return holidays;\n      284 |         } catch (error) {\n    > 285 |             console.warn(`[PublicHolidayService] Impossible de récupérer les jours fériés depuis l'API pour l'année ${year}. Utilisation du calcul local.`);\n          |                     ^\n      286 |\n      287 |             // Générer les jours fériés français en local\n      288 |             const holidays = this.calculateFrenchPublicHolidays(year);\n\n      at PublicHolidayService.warn [as getPublicHolidaysForYear] (src/modules/leaves/services/publicHolidayService.ts:285:21)\n          at async Promise.all (index 2)\n      at PublicHolidayService.preloadData (src/modules/leaves/services/publicHolidayService.ts:89:13)\n\n    console.warn\n      [PublicHolidayService] Impossible de récupérer les jours fériés depuis l'API pour l'année 2027. Utilisation du calcul local.\n\n      283 |             return holidays;\n      284 |         } catch (error) {\n    > 285 |             console.warn(`[PublicHolidayService] Impossible de récupérer les jours fériés depuis l'API pour l'année ${year}. Utilisation du calcul local.`);\n          |                     ^\n      286 |\n      287 |             // Générer les jours fériés français en local\n      288 |             const holidays = this.calculateFrenchPublicHolidays(year);\n\n      at PublicHolidayService.warn [as getPublicHolidaysForYear] (src/modules/leaves/services/publicHolidayService.ts:285:21)\n          at async Promise.all (index 3)\n      at PublicHolidayService.preloadData (src/modules/leaves/services/publicHolidayService.ts:89:13)\n\n    console.error\n      Erreur lors du chargement des types de congés: Error: Failed to fetch types\n          at Object.<anonymous> (/Users/vincentperreard/Mathildanesth/src/modules/leaves/components/LeaveForm.test.tsx:258:55)\n          at Promise.then.completed (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/utils.js:298:28)\n          at new Promise (<anonymous>)\n          at callAsyncCircusFn (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/utils.js:231:10)\n          at _callCircusTest (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:316:40)\n          at _runTest (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:252:3)\n          at _runTestsForDescribeBlock (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:126:9)\n          at _runTestsForDescribeBlock (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:121:9)\n          at run (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/run.js:71:3)\n          at runAndTransformResultsToJestFormat (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n          at jestAdapter (/Users/vincentperreard/Mathildanesth/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:74:19)\n          at runTestInternal (/Users/vincentperreard/Mathildanesth/node_modules/jest-runner/build/runTest.js:367:16)\n          at runTest (/Users/vincentperreard/Mathildanesth/node_modules/jest-runner/build/runTest.js:444:34)\n          at Object.worker (/Users/vincentperreard/Mathildanesth/node_modules/jest-runner/build/testWorker.js:106:12)\n\n       99 |     return;\n      100 |   }\n    > 101 |   originalConsoleError(...args);\n          |   ^\n      102 | };\n      103 |\n      104 | // Mocks globaux supplémentaires\n\n      at console.originalConsoleError [as error] (jest.setup.js:101:3)\n      at error (src/modules/leaves/components/LeaveForm.tsx:196:25)\n\n  ● LeaveForm › should handle error when loading leave types\n\n    Unable to find an element with the display value: Erreur de chargement.\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div>\u001b[39m\n        \u001b[36m<form\u001b[39m\n          \u001b[33mclass\u001b[39m=\u001b[32m\"space-y-6 max-w-2xl mx-auto\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"bg-gradient-to-r from-indigo-50 to-blue-50 p-4 rounded-lg shadow-sm mb-6\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<h3\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"text-lg font-medium text-gray-800 mb-2\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mNouvelle demande de congé\u001b[0m\n            \u001b[36m</h3>\u001b[39m\n            \u001b[36m<p\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"text-sm text-gray-600\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mComplétez le formulaire ci-dessous pour soumettre votre demande.\u001b[0m\n            \u001b[36m</p>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"bg-white p-6 rounded-lg shadow-md border border-gray-200\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"mb-6\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center justify-between\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<label\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700\"\u001b[39m\n                  \u001b[33mfor\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mType de congé\u001b[0m\n                \u001b[36m</label>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"relative inline-block\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<span\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"text-gray-400 hover:text-gray-600 cursor-help\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-circle-help h-4 w-4\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<circle\u001b[39m\n                        \u001b[33mcx\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                        \u001b[33mcy\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                        \u001b[33mr\u001b[39m=\u001b[32m\"10\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M12 17h.01\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                  \u001b[36m</span>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"mt-1 relative\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<select\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"block w-full rounded-md border-gray-300 shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm py-2 px-3\"\u001b[39m\n                  \u001b[33mdisabled\u001b[39m=\u001b[32m\"\"\u001b[39m\n                  \u001b[33mid\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                  \u001b[33mname\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                  \u001b[33mrequired\u001b[39m=\u001b[32m\"\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<option\u001b[39m\n                    \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[0mChargement...\u001b[0m\n                  \u001b[36m</option>\u001b[39m\n                \u001b[36m</select>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"grid grid-cols-1 gap-6 md:grid-cols-2 mb-6\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<label\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700 mb-1\"\u001b[39m\n                  \u001b[33mfor\u001b[39m=\u001b[32m\"startDate\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mDate de début\u001b[0m\n                \u001b[36m</label>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker-wrapper\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker__input-container\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<input\u001b[39m\n                        \u001b[33mautocomplete\u001b[39m=\u001b[32m\"off\"\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 pl-10 pr-4 py-2 disabled:bg-gray-100 disabled:cursor-not-allowed\"\u001b[39m\n                        \u001b[33mid\u001b[39m=\u001b[32m\"startDate\"\u001b[39m\n                        \u001b[33mplaceholder\u001b[39m=\u001b[32m\"Sélectionner une date\"\u001b[39m\n                        \u001b[33mtype\u001b[39m=\u001b[32m\"text\"\u001b[39m\n                        \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</div>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-calendar h-5 w-5 text-gray-400\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M8 2v4\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M16 2v4\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<rect\u001b[39m\n                        \u001b[33mheight\u001b[39m=\u001b[32m\"18\"\u001b[39m\n                        \u001b[33mrx\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                        \u001b[33mwidth\u001b[39m=\u001b[32m\"18\"\u001b[39m\n                        \u001b[33mx\u001b[39m=\u001b[32m\"3\"\u001b[39m\n                        \u001b[33my\u001b[39m=\u001b[32m\"4\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M3 10h18\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<label\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700 mb-1\"\u001b[39m\n                  \u001b[33mfor\u001b[39m=\u001b[32m\"endDate\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mDate de fin\u001b[0m\n                \u001b[36m</label>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker-wrapper\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker__input-container\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<input\u001b[39m\n                        \u001b[33mautocomplete\u001b[39m=\u001b[32m\"off\"\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 pl-10 pr-4 py-2 disabled:bg-gray-100 disabled:cursor-not-allowed\"\u001b[39m\n                        \u001b[33mid\u001b[39m=\u001b[32m\"endDate\"\u001b[39m\n                        \u001b[33mplaceholder\u001b[39m=\u001b[32m\"Sélectionner une date\"\u001b[39m\n                        \u001b[33mtype\u001b[39m=\u001b[32m\"text\"\u001b[39m\n                        \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</div>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-calendar h-5 w-5 text-gray-400\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M8 2v4\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M16 2v4\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<rect\u001b[39m\n                        \u001b[33mheight\u001b[39m=\u001b[32m\"18\"\u001b[39m\n                        \u001b[33mrx\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                        \u001b[33mwidth\u001b[39m=\u001b[32m\"18\"\u001b[39m\n                        \u001b[33mx\u001b[39m=\u001b[32m\"3\"\u001b[39m\n                        \u001b[33my\u001b[39m=\u001b[32m\"4\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M3 10h18\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"mb-6\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"flex flex-col space-y-4 p-4 bg-gray-50 rounded-md border border-gray-200\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<input\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"\u001b[39m\n                    \u001b[33mdisabled\u001b[39m=\u001b[32m\"\"\u001b[39m\n                    \u001b[33mid\u001b[39m=\u001b[32m\"isHalfDay\"\u001b[39m\n                    \u001b[33mname\u001b[39m=\u001b[32m\"isHalfDay\"\u001b[39m\n                    \u001b[33mtype\u001b[39m=\u001b[32m\"checkbox\"\u001b[39m\n                  \u001b[36m/>\u001b[39m\n                  \u001b[36m<label\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"ml-2 block text-sm font-medium text-gray-700\"\u001b[39m\n                    \u001b[33mfor\u001b[39m=\u001b[32m\"isHalfDay\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[0mDemi-journée\u001b[0m\n                  \u001b[36m</label>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"relative inline-block\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<span\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"text-gray-400 hover:text-gray-600 cursor-help ml-1\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<svg\u001b[39m\n                        \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-circle-help h-4 w-4\"\u001b[39m\n                        \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                        \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                        \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                        \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                        \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<circle\u001b[39m\n                          \u001b[33mcx\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                          \u001b[33mcy\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                          \u001b[33mr\u001b[39m=\u001b[32m\"10\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                        \u001b[36m<path\u001b[39m\n                          \u001b[33md\u001b[39m=\u001b[32m\"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                        \u001b[36m<path\u001b[39m\n                          \u001b[33md\u001b[39m=\u001b[32m\"M12 17h.01\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                      \u001b[36m</svg>\u001b[39m\n                    \u001b[36m</span>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"space-y-3 mb-6\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"mb-6\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center justify-between\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<label\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700\"\u001b[39m\n                  \u001b[33mfor\u001b[39m=\u001b[32m\"reason\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mMotif (optionnel)\u001b[0m\n                \u001b[36m</label>\u001b[39m\n                \u001b[36m<span\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mMax. 200 caractères\u001b[0m\n                \u001b[36m</span>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<textarea\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\u001b[39m\n                \u001b[33mid\u001b[39m=\u001b[32m\"reason\"\u001b[39m\n                \u001b[33mmaxlength\u001b[39m=\u001b[32m\"200\"\u001b[39m\n                \u001b[33mname\u001b[39m=\u001b[32m\"reason\"\u001b[39m\n                \u001b[33mplaceholder\u001b[39m=\u001b[32m\"Précisez le motif de votre demande si nécessaire...\"\u001b[39m\n                \u001b[33mrows\u001b[39m=\u001b[32m\"3\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"flex justify-end mt-8\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-60 disabled:cursor-not-allowed transition-opacity\"\u001b[39m\n              \u001b[33mdisabled\u001b[39m=\u001b[32m\"\"\u001b[39m\n              \u001b[33mtype\u001b[39m=\u001b[32m\"submit\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSoumettre la demande\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</form>\u001b[39m\n      \u001b[36m</div>\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n      258 |         (global.fetch as jest.Mock).mockRejectedValue(new Error('Failed to fetch types'));\n      259 |         renderTheForm();\n    > 260 |         await waitFor(() => {\n          |                      ^\n      261 |             expectToBeInDocument(screen.getByDisplayValue('Erreur de chargement'));\n      262 |         });\n      263 |     });\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at Object.<anonymous> (src/modules/leaves/components/LeaveForm.test.tsx:260:22)\n\n  ● LeaveForm › should call useLeaveCalculation with initial dates and options\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: {\"endDate\": null, \"options\": {\"countHalfDays\": false, \"halfDayPeriod\": undefined}, \"startDate\": null}\n    Received\n           1\n              Object {\n                \"endDate\": null,\n                \"options\": Object {\n            -     \"countHalfDays\": false,\n                  \"halfDayPeriod\": undefined,\n            +     \"isHalfDay\": false,\n                },\n                \"startDate\": null,\n              },\n           2\n              Object {\n                \"endDate\": null,\n                \"options\": Object {\n            -     \"countHalfDays\": false,\n                  \"halfDayPeriod\": undefined,\n            +     \"isHalfDay\": false,\n                },\n                \"startDate\": null,\n              },\n\n    Number of calls: 2\n\n      45 |  */\n      46 | export function expectToHaveBeenCalledWith(mockFn: MockFn, ...args: any[]): void {\n    > 47 |     expect(mockFn).toHaveBeenCalledWith(...args);\n         |                    ^\n      48 | }\n      49 |\n      50 | /**\n\n      at toHaveBeenCalledWith (src/tests/utils/assertions.ts:47:20)\n      at Object.<anonymous> (src/modules/leaves/components/LeaveForm.test.tsx:267:35)\n\n  ● LeaveForm › should update useLeaveCalculation when dates change\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: {\"endDate\": null, \"options\": {\"countHalfDays\": false, \"halfDayPeriod\": undefined}, \"startDate\": null}\n    Received\n           1\n              Object {\n                \"endDate\": null,\n                \"options\": Object {\n            -     \"countHalfDays\": false,\n                  \"halfDayPeriod\": undefined,\n            +     \"isHalfDay\": false,\n                },\n                \"startDate\": null,\n              },\n           2\n              Object {\n                \"endDate\": null,\n                \"options\": Object {\n            -     \"countHalfDays\": false,\n                  \"halfDayPeriod\": undefined,\n            +     \"isHalfDay\": false,\n                },\n                \"startDate\": null,\n              },\n\n    Number of calls: 2\n\n      45 |  */\n      46 | export function expectToHaveBeenCalledWith(mockFn: MockFn, ...args: any[]): void {\n    > 47 |     expect(mockFn).toHaveBeenCalledWith(...args);\n         |                    ^\n      48 | }\n      49 |\n      50 | /**\n\n      at toHaveBeenCalledWith (src/tests/utils/assertions.ts:47:20)\n      at Object.<anonymous> (src/modules/leaves/components/LeaveForm.test.tsx:280:35)\n\n  ● LeaveForm › should handle half-day selection\n\n    expect(element).toBeChecked()\n\n    Received element is not checked:\n      <input class=\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\" disabled=\"\" id=\"isHalfDay\" name=\"isHalfDay\" type=\"checkbox\" />\n\n      73 |  */\n      74 | export function expectToBeChecked(element: HTMLElement | null | undefined): void {\n    > 75 |     expect(element).toBeChecked();\n         |                     ^\n      76 | }\n      77 |\n      78 | /**\n\n      at toBeChecked (src/tests/utils/assertions.ts:75:21)\n      at Object.<anonymous> (src/modules/leaves/components/LeaveForm.test.tsx:346:26)\n\n  ● LeaveForm › should validate form on submit and show errors if invalid\n\n    Unable to find an element with the text: La date de début est requise.. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div>\u001b[39m\n        \u001b[36m<form\u001b[39m\n          \u001b[33mclass\u001b[39m=\u001b[32m\"space-y-6 max-w-2xl mx-auto\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"bg-gradient-to-r from-indigo-50 to-blue-50 p-4 rounded-lg shadow-sm mb-6\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<h3\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"text-lg font-medium text-gray-800 mb-2\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mNouvelle demande de congé\u001b[0m\n            \u001b[36m</h3>\u001b[39m\n            \u001b[36m<p\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"text-sm text-gray-600\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mComplétez le formulaire ci-dessous pour soumettre votre demande.\u001b[0m\n            \u001b[36m</p>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"bg-white p-6 rounded-lg shadow-md border border-gray-200\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"mb-6\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center justify-between\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<label\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700\"\u001b[39m\n                  \u001b[33mfor\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mType de congé\u001b[0m\n                \u001b[36m</label>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"relative inline-block\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<span\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"text-gray-400 hover:text-gray-600 cursor-help\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-circle-help h-4 w-4\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<circle\u001b[39m\n                        \u001b[33mcx\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                        \u001b[33mcy\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                        \u001b[33mr\u001b[39m=\u001b[32m\"10\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M12 17h.01\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                  \u001b[36m</span>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"mt-1 relative\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<select\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"block w-full rounded-md border-gray-300 shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm py-2 px-3\"\u001b[39m\n                  \u001b[33mdisabled\u001b[39m=\u001b[32m\"\"\u001b[39m\n                  \u001b[33mid\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                  \u001b[33mname\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                  \u001b[33mrequired\u001b[39m=\u001b[32m\"\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<option\u001b[39m\n                    \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[0mChargement...\u001b[0m\n                  \u001b[36m</option>\u001b[39m\n                \u001b[36m</select>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"grid grid-cols-1 gap-6 md:grid-cols-2 mb-6\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<label\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700 mb-1\"\u001b[39m\n                  \u001b[33mfor\u001b[39m=\u001b[32m\"startDate\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mDate de début\u001b[0m\n                \u001b[36m</label>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker-wrapper\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker__input-container\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<input\u001b[39m\n                        \u001b[33mautocomplete\u001b[39m=\u001b[32m\"off\"\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 pl-10 pr-4 py-2 disabled:bg-gray-100 disabled:cursor-not-allowed\"\u001b[39m\n                        \u001b[33mid\u001b[39m=\u001b[32m\"startDate\"\u001b[39m\n                        \u001b[33mplaceholder\u001b[39m=\u001b[32m\"Sélectionner une date\"\u001b[39m\n                        \u001b[33mtype\u001b[39m=\u001b[32m\"text\"\u001b[39m\n                        \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</div>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-calendar h-5 w-5 text-gray-400\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M8 2v4\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M16 2v4\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<rect\u001b[39m\n                        \u001b[33mheight\u001b[39m=\u001b[32m\"18\"\u001b[39m\n                        \u001b[33mrx\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                        \u001b[33mwidth\u001b[39m=\u001b[32m\"18\"\u001b[39m\n                        \u001b[33mx\u001b[39m=\u001b[32m\"3\"\u001b[39m\n                        \u001b[33my\u001b[39m=\u001b[32m\"4\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M3 10h18\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<label\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700 mb-1\"\u001b[39m\n                  \u001b[33mfor\u001b[39m=\u001b[32m\"endDate\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mDate de fin\u001b[0m\n                \u001b[36m</label>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker-wrapper\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker__input-container\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<input\u001b[39m\n                        \u001b[33mautocomplete\u001b[39m=\u001b[32m\"off\"\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 pl-10 pr-4 py-2 disabled:bg-gray-100 disabled:cursor-not-allowed\"\u001b[39m\n                        \u001b[33mid\u001b[39m=\u001b[32m\"endDate\"\u001b[39m\n                        \u001b[33mplaceholder\u001b[39m=\u001b[32m\"Sélectionner une date\"\u001b[39m\n                        \u001b[33mtype\u001b[39m=\u001b[32m\"text\"\u001b[39m\n                        \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</div>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-calendar h-5 w-5 text-gray-400\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M8 2v4\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M16 2v4\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<rect\u001b[39m\n                        \u001b[33mheight\u001b[39m=\u001b[32m\"18\"\u001b[39m\n                        \u001b[33mrx\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                        \u001b[33mwidth\u001b[39m=\u001b[32m\"18\"\u001b[39m\n                        \u001b[33mx\u001b[39m=\u001b[32m\"3\"\u001b[39m\n                        \u001b[33my\u001b[39m=\u001b[32m\"4\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M3 10h18\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"mb-6\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"flex flex-col space-y-4 p-4 bg-gray-50 rounded-md border border-gray-200\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<input\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"\u001b[39m\n                    \u001b[33mdisabled\u001b[39m=\u001b[32m\"\"\u001b[39m\n                    \u001b[33mid\u001b[39m=\u001b[32m\"isHalfDay\"\u001b[39m\n                    \u001b[33mname\u001b[39m=\u001b[32m\"isHalfDay\"\u001b[39m\n                    \u001b[33mtype\u001b[39m=\u001b[32m\"checkbox\"\u001b[39m\n                  \u001b[36m/>\u001b[39m\n                  \u001b[36m<label\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"ml-2 block text-sm font-medium text-gray-700\"\u001b[39m\n                    \u001b[33mfor\u001b[39m=\u001b[32m\"isHalfDay\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[0mDemi-journée\u001b[0m\n                  \u001b[36m</label>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"relative inline-block\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<span\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"text-gray-400 hover:text-gray-600 cursor-help ml-1\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<svg\u001b[39m\n                        \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-circle-help h-4 w-4\"\u001b[39m\n                        \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                        \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                        \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                        \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                        \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<circle\u001b[39m\n                          \u001b[33mcx\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                          \u001b[33mcy\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                          \u001b[33mr\u001b[39m=\u001b[32m\"10\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                        \u001b[36m<path\u001b[39m\n                          \u001b[33md\u001b[39m=\u001b[32m\"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                        \u001b[36m<path\u001b[39m\n                          \u001b[33md\u001b[39m=\u001b[32m\"M12 17h.01\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                      \u001b[36m</svg>\u001b[39m\n                    \u001b[36m</span>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"space-y-3 mb-6\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"mb-6\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center justify-between\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<label\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700\"\u001b[39m\n                  \u001b[33mfor\u001b[39m=\u001b[32m\"reason\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mMotif (optionnel)\u001b[0m\n                \u001b[36m</label>\u001b[39m\n                \u001b[36m<span\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mMax. 200 caractères\u001b[0m\n                \u001b[36m</span>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<textarea\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\u001b[39m\n                \u001b[33mid\u001b[39m=\u001b[32m\"reason\"\u001b[39m\n                \u001b[33mmaxlength\u001b[39m=\u001b[32m\"200\"\u001b[39m\n                \u001b[33mname\u001b[39m=\u001b[32m\"reason\"\u001b[39m\n                \u001b[33mplaceholder\u001b[39m=\u001b[32m\"Précisez le motif de votre demande si nécessaire...\"\u001b[39m\n                \u001b[33mrows\u001b[39m=\u001b[32m\"3\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"flex justify-end mt-8\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-60 disabled:cursor-not-allowed transition-opacity\"\u001b[39m\n              \u001b[33mdisabled\u001b[39m=\u001b[32m\"\"\u001b[39m\n              \u001b[33mtype\u001b[39m=\u001b[32m\"submit\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSoumettre la demande\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</form>\u001b[39m\n      \u001b[36m</div>\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n      406 |         await user.click(submitButton); // Soumission sans dates\n      407 |\n    > 408 |         expectToBeInDocument(await screen.findByText('La date de début est requise.'));\n          |                                           ^\n      409 |         expectToBeInDocument(screen.getByText('La date de fin est requise.'));\n      410 |         expectNotToHaveBeenCalled(mockedAxios.post);\n      411 |     });\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at node_modules/@testing-library/dom/dist/query-helpers.js:86:32\n      at Object.<anonymous> (src/modules/leaves/components/LeaveForm.test.tsx:408:43)\n\n  ● LeaveForm › Form Submission › should submit valid data to /api/leaves/batch and handle success\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"/api/leaves/batch\", [ObjectContaining {\"endDate\": \"2024-09-03\", \"reason\": \"Vacances annuelles\", \"startDate\": \"2024-09-02\", \"typeCode\": \"ANNUAL\", \"userId\": 1}]\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<form\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"space-y-6 max-w-2xl mx-auto\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"bg-gradient-to-r from-indigo-50 to-blue-50 p-4 rounded-lg shadow-sm mb-6\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<h3\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"text-lg font-medium text-gray-800 mb-2\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[0mNouvelle demande de congé\u001b[0m\n              \u001b[36m</h3>\u001b[39m\n              \u001b[36m<p\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"text-sm text-gray-600\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[0mComplétez le formulaire ci-dessous pour soumettre votre demande.\u001b[0m\n              \u001b[36m</p>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"bg-white p-6 rounded-lg shadow-md border border-gray-200\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"mb-6\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center justify-between\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<label\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700\"\u001b[39m\n                    \u001b[33mfor\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[0mType de congé\u001b[0m\n                  \u001b[36m</label>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"relative inline-block\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<span\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"text-gray-400 hover:text-gray-600 cursor-help\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<svg\u001b[39m\n                        \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-circle-help h-4 w-4\"\u001b[39m\n                        \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                        \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                        \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                        \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                        \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<circle\u001b[39m\n                          \u001b[33mcx\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                          \u001b[33mcy\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                          \u001b[33mr\u001b[39m=\u001b[32m\"10\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                        \u001b[36m<path\u001b[39m\n                          \u001b[33md\u001b[39m=\u001b[32m\"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                        \u001b[36m<path\u001b[39m\n                          \u001b[33md\u001b[39m=\u001b[32m\"M12 17h.01\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                      \u001b[36m</svg>\u001b[39m\n                    \u001b[36m</span>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"mt-1 relative\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<select\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"block w-full rounded-md border-gray-300 shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm py-2 px-3\"\u001b[39m\n                    \u001b[33mid\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                    \u001b[33mname\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                    \u001b[33mrequired\u001b[39m=\u001b[32m\"\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<option\u001b[39m\n                      \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[0m-- Sélectionner un type --\u001b[0m\n                    \u001b[36m</option>\u001b[39m\n                    \u001b[36m<option\u001b[39m\n                      \u001b[33mtitle\u001b[39m=\u001b[32m\"Congés annuels bruts\"\u001b[39m\n                      \u001b[33mvalue\u001b[39m=\u001b[32m\"ANNUAL\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[0mCongé annuel\u001b[0m\n                    \u001b[36m</option>\u001b[39m\n                    \u001b[36m<option\u001b[39m\n                      \u001b[33mtitle\u001b[39m=\u001b[32m\"RTT bruts\"\u001b[39m\n                      \u001b[33mvalue\u001b[39m=\u001b[32m\"RTT\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[0mRTT API (Raw)\u001b[0m\n                    \u001b[36m</option>\u001b[39m\n                    \u001b[36m<option\u001b[39m\n                      \u001b[33mtitle\u001b[39m=\u001b[32m\"Congé maladie brut\"\u001b[39m\n                      \u001b[33mvalue\u001b[39m=\u001b[32m\"SICK\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[0mMaladie\u001b[0m\n                    \u001b[36m</option>\u001b[39m\n                  \u001b[36m</select>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"grid grid-cols-1 gap-6 md:grid-cols-2 mb-6\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<label\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700 mb-1\"\u001b[39m\n                    \u001b[33mfor\u001b[39m=\u001b[32m\"startDate\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[0mDate de début\u001b[0m\n                  \u001b[36m</label>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker-wrapper\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<div\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker__input-container\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<input\u001b[39m\n                          \u001b[33mautocomplete\u001b[39m=\u001b[32m\"off\"\u001b[39m\n                          \u001b[33mclass\u001b[39m=\u001b[32m\"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 pl-10 pr-4 py-2 disabled:bg-gray-100 disabled:cursor-not-allowed\"\u001b[39m\n                          \u001b[33mid\u001b[39m=\u001b[32m\"startDate\"\u001b[39m\n                          \u001b[33mplaceholder\u001b[39m=\u001b[32m\"Sélectionner une date\"\u001b[39m\n                          \u001b[33mtype\u001b[39m=\u001b[32m\"text\"\u001b[39m\n                          \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                      \u001b[36m</div>\u001b[39m\n                    \u001b[36m</div>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<svg\u001b[39m\n                        \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-calendar h-5 w-5 text-gray-400\"\u001b[39m\n                        \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                        \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                        \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                        \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                        \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n            ...\n\n      45 |  */\n      46 | export function expectToHaveBeenCalledWith(mockFn: MockFn, ...args: any[]): void {\n    > 47 |     expect(mockFn).toHaveBeenCalledWith(...args);\n         |                    ^\n      48 | }\n      49 |\n      50 | /**\n\n      at toHaveBeenCalledWith (src/tests/utils/assertions.ts:47:20)\n      at src/modules/leaves/components/LeaveForm.test.tsx:507:43\n      at callback (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:76)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)\n\n  ● LeaveForm › Form Submission › should handle API error from /api/leaves/batch on submit\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"/api/leaves/batch\", Any<Array>\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<form\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"space-y-6 max-w-2xl mx-auto\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"bg-gradient-to-r from-indigo-50 to-blue-50 p-4 rounded-lg shadow-sm mb-6\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<h3\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"text-lg font-medium text-gray-800 mb-2\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[0mNouvelle demande de congé\u001b[0m\n              \u001b[36m</h3>\u001b[39m\n              \u001b[36m<p\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"text-sm text-gray-600\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[0mComplétez le formulaire ci-dessous pour soumettre votre demande.\u001b[0m\n              \u001b[36m</p>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"bg-white p-6 rounded-lg shadow-md border border-gray-200\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"mb-6\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center justify-between\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<label\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700\"\u001b[39m\n                    \u001b[33mfor\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[0mType de congé\u001b[0m\n                  \u001b[36m</label>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"relative inline-block\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<span\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"text-gray-400 hover:text-gray-600 cursor-help\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<svg\u001b[39m\n                        \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-circle-help h-4 w-4\"\u001b[39m\n                        \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                        \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                        \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                        \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                        \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<circle\u001b[39m\n                          \u001b[33mcx\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                          \u001b[33mcy\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                          \u001b[33mr\u001b[39m=\u001b[32m\"10\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                        \u001b[36m<path\u001b[39m\n                          \u001b[33md\u001b[39m=\u001b[32m\"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                        \u001b[36m<path\u001b[39m\n                          \u001b[33md\u001b[39m=\u001b[32m\"M12 17h.01\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                      \u001b[36m</svg>\u001b[39m\n                    \u001b[36m</span>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"mt-1 relative\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<select\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"block w-full rounded-md border-gray-300 shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm py-2 px-3\"\u001b[39m\n                    \u001b[33mid\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                    \u001b[33mname\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                    \u001b[33mrequired\u001b[39m=\u001b[32m\"\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<option\u001b[39m\n                      \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[0m-- Sélectionner un type --\u001b[0m\n                    \u001b[36m</option>\u001b[39m\n                    \u001b[36m<option\u001b[39m\n                      \u001b[33mtitle\u001b[39m=\u001b[32m\"Congés annuels bruts\"\u001b[39m\n                      \u001b[33mvalue\u001b[39m=\u001b[32m\"ANNUAL\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[0mCongé annuel\u001b[0m\n                    \u001b[36m</option>\u001b[39m\n                    \u001b[36m<option\u001b[39m\n                      \u001b[33mtitle\u001b[39m=\u001b[32m\"RTT bruts\"\u001b[39m\n                      \u001b[33mvalue\u001b[39m=\u001b[32m\"RTT\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[0mRTT API (Raw)\u001b[0m\n                    \u001b[36m</option>\u001b[39m\n                    \u001b[36m<option\u001b[39m\n                      \u001b[33mtitle\u001b[39m=\u001b[32m\"Congé maladie brut\"\u001b[39m\n                      \u001b[33mvalue\u001b[39m=\u001b[32m\"SICK\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[0mMaladie\u001b[0m\n                    \u001b[36m</option>\u001b[39m\n                  \u001b[36m</select>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"grid grid-cols-1 gap-6 md:grid-cols-2 mb-6\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<label\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700 mb-1\"\u001b[39m\n                    \u001b[33mfor\u001b[39m=\u001b[32m\"startDate\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[0mDate de début\u001b[0m\n                  \u001b[36m</label>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker-wrapper\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<div\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker__input-container\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<input\u001b[39m\n                          \u001b[33mautocomplete\u001b[39m=\u001b[32m\"off\"\u001b[39m\n                          \u001b[33mclass\u001b[39m=\u001b[32m\"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 pl-10 pr-4 py-2 disabled:bg-gray-100 disabled:cursor-not-allowed\"\u001b[39m\n                          \u001b[33mid\u001b[39m=\u001b[32m\"startDate\"\u001b[39m\n                          \u001b[33mplaceholder\u001b[39m=\u001b[32m\"Sélectionner une date\"\u001b[39m\n                          \u001b[33mtype\u001b[39m=\u001b[32m\"text\"\u001b[39m\n                          \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                      \u001b[36m</div>\u001b[39m\n                    \u001b[36m</div>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<svg\u001b[39m\n                        \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-calendar h-5 w-5 text-gray-400\"\u001b[39m\n                        \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                        \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                        \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                        \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                        \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n            ...\n\n      45 |  */\n      46 | export function expectToHaveBeenCalledWith(mockFn: MockFn, ...args: any[]): void {\n    > 47 |     expect(mockFn).toHaveBeenCalledWith(...args);\n         |                    ^\n      48 | }\n      49 |\n      50 | /**\n\n      at toHaveBeenCalledWith (src/tests/utils/assertions.ts:47:20)\n      at src/modules/leaves/components/LeaveForm.test.tsx:572:43\n      at callback (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:76)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)\n\n  ● LeaveForm › Form Submission › should handle general network error on submit\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"/api/leaves/batch\", Any<Array>\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<form\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"space-y-6 max-w-2xl mx-auto\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"bg-gradient-to-r from-indigo-50 to-blue-50 p-4 rounded-lg shadow-sm mb-6\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<h3\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"text-lg font-medium text-gray-800 mb-2\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[0mNouvelle demande de congé\u001b[0m\n              \u001b[36m</h3>\u001b[39m\n              \u001b[36m<p\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"text-sm text-gray-600\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[0mComplétez le formulaire ci-dessous pour soumettre votre demande.\u001b[0m\n              \u001b[36m</p>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"bg-white p-6 rounded-lg shadow-md border border-gray-200\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"mb-6\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center justify-between\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<label\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700\"\u001b[39m\n                    \u001b[33mfor\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[0mType de congé\u001b[0m\n                  \u001b[36m</label>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"relative inline-block\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<span\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"text-gray-400 hover:text-gray-600 cursor-help\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<svg\u001b[39m\n                        \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-circle-help h-4 w-4\"\u001b[39m\n                        \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                        \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                        \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                        \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                        \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<circle\u001b[39m\n                          \u001b[33mcx\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                          \u001b[33mcy\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                          \u001b[33mr\u001b[39m=\u001b[32m\"10\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                        \u001b[36m<path\u001b[39m\n                          \u001b[33md\u001b[39m=\u001b[32m\"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                        \u001b[36m<path\u001b[39m\n                          \u001b[33md\u001b[39m=\u001b[32m\"M12 17h.01\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                      \u001b[36m</svg>\u001b[39m\n                    \u001b[36m</span>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"mt-1 relative\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<select\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"block w-full rounded-md border-gray-300 shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm py-2 px-3\"\u001b[39m\n                    \u001b[33mid\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                    \u001b[33mname\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                    \u001b[33mrequired\u001b[39m=\u001b[32m\"\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<option\u001b[39m\n                      \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[0m-- Sélectionner un type --\u001b[0m\n                    \u001b[36m</option>\u001b[39m\n                    \u001b[36m<option\u001b[39m\n                      \u001b[33mtitle\u001b[39m=\u001b[32m\"Congés annuels bruts\"\u001b[39m\n                      \u001b[33mvalue\u001b[39m=\u001b[32m\"ANNUAL\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[0mCongé annuel\u001b[0m\n                    \u001b[36m</option>\u001b[39m\n                    \u001b[36m<option\u001b[39m\n                      \u001b[33mtitle\u001b[39m=\u001b[32m\"RTT bruts\"\u001b[39m\n                      \u001b[33mvalue\u001b[39m=\u001b[32m\"RTT\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[0mRTT API (Raw)\u001b[0m\n                    \u001b[36m</option>\u001b[39m\n                    \u001b[36m<option\u001b[39m\n                      \u001b[33mtitle\u001b[39m=\u001b[32m\"Congé maladie brut\"\u001b[39m\n                      \u001b[33mvalue\u001b[39m=\u001b[32m\"SICK\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[0mMaladie\u001b[0m\n                    \u001b[36m</option>\u001b[39m\n                  \u001b[36m</select>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"grid grid-cols-1 gap-6 md:grid-cols-2 mb-6\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<label\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700 mb-1\"\u001b[39m\n                    \u001b[33mfor\u001b[39m=\u001b[32m\"startDate\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[0mDate de début\u001b[0m\n                  \u001b[36m</label>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker-wrapper\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<div\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker__input-container\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<input\u001b[39m\n                          \u001b[33mautocomplete\u001b[39m=\u001b[32m\"off\"\u001b[39m\n                          \u001b[33mclass\u001b[39m=\u001b[32m\"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 pl-10 pr-4 py-2 disabled:bg-gray-100 disabled:cursor-not-allowed\"\u001b[39m\n                          \u001b[33mid\u001b[39m=\u001b[32m\"startDate\"\u001b[39m\n                          \u001b[33mplaceholder\u001b[39m=\u001b[32m\"Sélectionner une date\"\u001b[39m\n                          \u001b[33mtype\u001b[39m=\u001b[32m\"text\"\u001b[39m\n                          \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                      \u001b[36m</div>\u001b[39m\n                    \u001b[36m</div>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<svg\u001b[39m\n                        \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-calendar h-5 w-5 text-gray-400\"\u001b[39m\n                        \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                        \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                        \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                        \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                        \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n            ...\n\n      45 |  */\n      46 | export function expectToHaveBeenCalledWith(mockFn: MockFn, ...args: any[]): void {\n    > 47 |     expect(mockFn).toHaveBeenCalledWith(...args);\n         |                    ^\n      48 | }\n      49 |\n      50 | /**\n\n      at toHaveBeenCalledWith (src/tests/utils/assertions.ts:47:20)\n      at src/modules/leaves/components/LeaveForm.test.tsx:611:43\n      at callback (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:76)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)\n\n  ● LeaveForm › Form Submission › should not submit if calculation is not successful\n\n    Unable to find an element with the text: /Calcul des jours en cours.../i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div>\u001b[39m\n        \u001b[36m<form\u001b[39m\n          \u001b[33mclass\u001b[39m=\u001b[32m\"space-y-6 max-w-2xl mx-auto\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"bg-gradient-to-r from-indigo-50 to-blue-50 p-4 rounded-lg shadow-sm mb-6\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<h3\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"text-lg font-medium text-gray-800 mb-2\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mNouvelle demande de congé\u001b[0m\n            \u001b[36m</h3>\u001b[39m\n            \u001b[36m<p\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"text-sm text-gray-600\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mComplétez le formulaire ci-dessous pour soumettre votre demande.\u001b[0m\n            \u001b[36m</p>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"bg-white p-6 rounded-lg shadow-md border border-gray-200\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"mb-6\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center justify-between\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<label\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700\"\u001b[39m\n                  \u001b[33mfor\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mType de congé\u001b[0m\n                \u001b[36m</label>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"relative inline-block\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<span\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"text-gray-400 hover:text-gray-600 cursor-help\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-circle-help h-4 w-4\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<circle\u001b[39m\n                        \u001b[33mcx\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                        \u001b[33mcy\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                        \u001b[33mr\u001b[39m=\u001b[32m\"10\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M12 17h.01\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                  \u001b[36m</span>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"mt-1 relative\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<select\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"block w-full rounded-md border-gray-300 shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm py-2 px-3\"\u001b[39m\n                  \u001b[33mid\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                  \u001b[33mname\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                  \u001b[33mrequired\u001b[39m=\u001b[32m\"\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<option\u001b[39m\n                    \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[0m-- Sélectionner un type --\u001b[0m\n                  \u001b[36m</option>\u001b[39m\n                  \u001b[36m<option\u001b[39m\n                    \u001b[33mtitle\u001b[39m=\u001b[32m\"Congés annuels bruts\"\u001b[39m\n                    \u001b[33mvalue\u001b[39m=\u001b[32m\"ANNUAL\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[0mCongé annuel\u001b[0m\n                  \u001b[36m</option>\u001b[39m\n                  \u001b[36m<option\u001b[39m\n                    \u001b[33mtitle\u001b[39m=\u001b[32m\"RTT bruts\"\u001b[39m\n                    \u001b[33mvalue\u001b[39m=\u001b[32m\"RTT\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[0mRTT API (Raw)\u001b[0m\n                  \u001b[36m</option>\u001b[39m\n                  \u001b[36m<option\u001b[39m\n                    \u001b[33mtitle\u001b[39m=\u001b[32m\"Congé maladie brut\"\u001b[39m\n                    \u001b[33mvalue\u001b[39m=\u001b[32m\"SICK\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[0mMaladie\u001b[0m\n                  \u001b[36m</option>\u001b[39m\n                \u001b[36m</select>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"grid grid-cols-1 gap-6 md:grid-cols-2 mb-6\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<label\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700 mb-1\"\u001b[39m\n                  \u001b[33mfor\u001b[39m=\u001b[32m\"startDate\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mDate de début\u001b[0m\n                \u001b[36m</label>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker-wrapper\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker__input-container\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<input\u001b[39m\n                        \u001b[33mautocomplete\u001b[39m=\u001b[32m\"off\"\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 pl-10 pr-4 py-2 disabled:bg-gray-100 disabled:cursor-not-allowed react-datepicker-ignore-onclickoutside\"\u001b[39m\n                        \u001b[33mid\u001b[39m=\u001b[32m\"startDate\"\u001b[39m\n                        \u001b[33mplaceholder\u001b[39m=\u001b[32m\"Sélectionner une date\"\u001b[39m\n                        \u001b[33mtype\u001b[39m=\u001b[32m\"text\"\u001b[39m\n                        \u001b[33mvalue\u001b[39m=\u001b[32m\"02/09/2024\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</div>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker__tab-loop\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker__tab-loop__start\"\u001b[39m\n                      \u001b[33mtabindex\u001b[39m=\u001b[32m\"0\"\u001b[39m\n                    \u001b[36m/>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker-popper z-50\"\u001b[39m\n                      \u001b[33mdata-placement\u001b[39m=\u001b[32m\"bottom\"\u001b[39m\n                      \u001b[33mstyle\u001b[39m=\u001b[32m\"position: absolute; left: 0px; top: 0px; transform: translate(0px, 10px);\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<div\u001b[39m\n                        \u001b[33mstyle\u001b[39m=\u001b[32m\"display: contents;\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<div\u001b[39m\n                          \u001b[33mstyle\u001b[39m=\u001b[32m\"display: contents;\"\u001b[39m\n                        \u001b[36m>\u001b[39m\n                          \u001b[36m<div\u001b[39m\n                            \u001b[33maria-label\u001b[39m=\u001b[32m\"Choose Date\"\u001b[39m\n                            \u001b[33maria-modal\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                            \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker shadow-lg rounded-md border bo...\n\n      653 |             await fillDatesInForm(user, '02/09/2024', '03/09/2024');\n      654 |             // Le hook est mocké pour retourner 'loading' avec ces dates.\n    > 655 |             await screen.findByText(/Calcul des jours en cours.../i, {}, { timeout: 3000 });\n          |                          ^\n      656 |\n      657 |             const submitButton = screen.getByText('Soumettre la demande');\n      658 |             await user.click(submitButton);\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at node_modules/@testing-library/dom/dist/query-helpers.js:86:32\n      at Object.<anonymous> (src/modules/leaves/components/LeaveForm.test.tsx:655:26)\n\nA worker process has failed to exit gracefully and has been force exited. This is likely caused by tests leaking due to improper teardown. Try running with --detectOpenHandles to find leaks. Active timers can also cause this, ensure that .unref() was called on them.\nSummary of all failing tests\nFAIL src/modules/leaves/services/__tests__/QuotaAdvancedService.test.ts\n  ● QuotaAdvancedService › executeTransfer › devrait exécuter un transfert valide\n\n    AxiosError: Network Error\n\n      305 |\n      306 |             // Envoyer l'entrée à l'API\n    > 307 |             const response = await axios.post(`${this.apiBaseUrl}/entries`, enhancedEntry, {\n          |                              ^\n      308 |                 headers: this.defaultHeaders\n      309 |             });\n      310 |\n\n      at XMLHttpRequest.handleError (node_modules/axios/lib/adapters/xhr.js:110:14)\n      at XMLHttpRequest.invokeTheCallbackFunction (node_modules/jsdom/lib/jsdom/living/generated/EventHandlerNonNull.js:14:28)\n      at XMLHttpRequest.<anonymous> (node_modules/jsdom/lib/jsdom/living/helpers/create-event-accessor.js:35:32)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at XMLHttpRequestImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at fireAnEvent (node_modules/jsdom/lib/jsdom/living/helpers/events.js:18:36)\n      at requestErrorSteps (node_modules/jsdom/lib/jsdom/living/xhr/xhr-utils.js:131:3)\n      at Object.dispatchError (node_modules/jsdom/lib/jsdom/living/xhr/xhr-utils.js:60:3)\n      at Request.<anonymous> (node_modules/jsdom/lib/jsdom/living/xhr/XMLHttpRequest-impl.js:655:18)\n      at ClientRequest.<anonymous> (node_modules/jsdom/lib/jsdom/living/helpers/http-request.js:121:14)\n      at MockHttpSocket.emitEvent [as emit] (node_modules/@mswjs/interceptors/src/interceptors/ClientRequest/MockHttpSocket.ts:152:12)\n      at Socket.emit (node_modules/@mswjs/interceptors/src/interceptors/ClientRequest/MockHttpSocket.ts:271:14)\n      at Axios.request (node_modules/axios/lib/core/Axios.js:45:41)\n      at AuditService.createAuditEntry (src/modules/leaves/services/AuditService.ts:307:30)\n      at QuotaAdvancedService.executeTransfer (src/modules/leaves/services/QuotaAdvancedService.ts:199:13)\n      at Object.<anonymous> (src/modules/leaves/services/__tests__/QuotaAdvancedService.test.ts:294:28)\n\n  ● QuotaAdvancedService › executeCarryOver › devrait exécuter un report valide\n\n    AxiosError: Network Error\n\n      305 |\n      306 |             // Envoyer l'entrée à l'API\n    > 307 |             const response = await axios.post(`${this.apiBaseUrl}/entries`, enhancedEntry, {\n          |                              ^\n      308 |                 headers: this.defaultHeaders\n      309 |             });\n      310 |\n\n      at XMLHttpRequest.handleError (node_modules/axios/lib/adapters/xhr.js:110:14)\n      at XMLHttpRequest.invokeTheCallbackFunction (node_modules/jsdom/lib/jsdom/living/generated/EventHandlerNonNull.js:14:28)\n      at XMLHttpRequest.<anonymous> (node_modules/jsdom/lib/jsdom/living/helpers/create-event-accessor.js:35:32)\n      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)\n      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)\n      at XMLHttpRequestImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)\n      at fireAnEvent (node_modules/jsdom/lib/jsdom/living/helpers/events.js:18:36)\n      at requestErrorSteps (node_modules/jsdom/lib/jsdom/living/xhr/xhr-utils.js:131:3)\n      at Object.dispatchError (node_modules/jsdom/lib/jsdom/living/xhr/xhr-utils.js:60:3)\n      at Request.<anonymous> (node_modules/jsdom/lib/jsdom/living/xhr/XMLHttpRequest-impl.js:655:18)\n      at ClientRequest.<anonymous> (node_modules/jsdom/lib/jsdom/living/helpers/http-request.js:121:14)\n      at MockHttpSocket.emitEvent [as emit] (node_modules/@mswjs/interceptors/src/interceptors/ClientRequest/MockHttpSocket.ts:152:12)\n      at Socket.emit (node_modules/@mswjs/interceptors/src/interceptors/ClientRequest/MockHttpSocket.ts:271:14)\n      at Axios.request (node_modules/axios/lib/core/Axios.js:45:41)\n      at AuditService.createAuditEntry (src/modules/leaves/services/AuditService.ts:307:30)\n      at QuotaAdvancedService.executeCarryOver (src/modules/leaves/services/QuotaAdvancedService.ts:359:13)\n      at Object.<anonymous> (src/modules/leaves/services/__tests__/QuotaAdvancedService.test.ts:371:28)\n\nFAIL src/modules/leaves/hooks/useConflictDetection.test.ts\n  ● useConflictDetection › devrait initialiser correctement le hook\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/leaves/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › validateDates › devrait valider correctement des dates valides\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/leaves/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › validateDates › devrait rejeter des dates invalides - startDate null\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/leaves/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › validateDates › devrait rejeter des dates invalides - endDate null\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/leaves/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › validateDates › devrait rejeter des dates invalides - date de début après date de fin\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/leaves/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › validateDates › devrait rejeter des dates lorsque la validation échoue\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/leaves/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › checkConflicts › devrait vérifier les conflits et mettre à jour l'état - sans conflits\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/leaves/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › checkConflicts › devrait vérifier les conflits et mettre à jour l'état - avec conflits\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/leaves/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › checkConflicts › devrait gérer les erreurs lors de la vérification des conflits\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/leaves/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › checkConflicts › devrait rejeter avec une erreur si les dates sont invalides\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/leaves/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › checkConflicts › ne devrait pas appeler checkLeaveConflicts si les dates sont invalides\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/leaves/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › checkConflicts › devrait mettre à jour les conflits lorsque le service renvoie des conflits\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/leaves/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › checkConflicts › devrait gérer les erreurs du service\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/leaves/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › checkConflicts › ne devrait pas appeler le service si les dates sont invalides\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/leaves/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › getConflictsByType › devrait filtrer les conflits par type\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/leaves/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › resolveConflict › devrait supprimer un conflit et mettre à jour l'état des conflits bloquants\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/leaves/hooks/useConflictDetection.test.ts:93:14)\n\n  ● useConflictDetection › resetConflicts › devrait réinitialiser l'état des conflits\n\n    Cannot use spyOn on a primitive value; undefined given\n\n      91 |         // Remplacer la vérification des dates dans le hook useConflictDetection avec une implémentation simplifiée\n      92 |         // qui va toujours réussir pour les tests\n    > 93 |         jest.spyOn(useConflictDetection.prototype as any, 'validateDates').mockImplementation(() => true);\n         |              ^\n      94 |     });\n      95 |\n      96 |     it('devrait initialiser correctement le hook', () => {\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:719:13)\n      at Object.<anonymous> (src/modules/leaves/hooks/useConflictDetection.test.ts:93:14)\n\nFAIL src/modules/leaves/services/__tests__/conflictRecommendationService.test.ts\n  ● ConflictRecommendationService › analyzeConflicts › devrait identifier correctement les résolutions automatiques possibles\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n      134 |\n      135 |             // Vérifier que l'événement a été émis pour les résolutions automatiques\n    > 136 |             expect(mockEventBus.emit).toHaveBeenCalled();\n          |                                       ^\n      137 |         });\n      138 |\n      139 |         it('devrait calculer correctement la distribution des priorités', () => {\n\n      at Object.<anonymous> (src/modules/leaves/services/__tests__/conflictRecommendationService.test.ts:136:39)\n\n  ● ConflictRecommendationService › updateRules › devrait mettre à jour les règles et émettre un événement\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: {\"data\": {\"updatedBy\": \"user\", \"updatedRules\": [\"priorityRules\"]}, \"type\": \"conflict.rules.updated\"}\n\n    Number of calls: 0\n\n      186 |\n      187 |             // Vérifier que l'événement a été émis\n    > 188 |             expect(mockEventBus.emit).toHaveBeenCalledWith({\n          |                                       ^\n      189 |                 type: 'conflict.rules.updated',\n      190 |                 data: {\n      191 |                     updatedRules: Object.keys(newRules),\n\n      at Object.<anonymous> (src/modules/leaves/services/__tests__/conflictRecommendationService.test.ts:188:39)\n\n  ● ConflictRecommendationService › resetRulesToDefault › devrait réinitialiser les règles aux valeurs par défaut\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: {\"data\": {\"resetToDefault\": true, \"updatedBy\": \"user\", \"updatedRules\": [\"all\"]}, \"type\": \"conflict.rules.updated\"}\n\n    Number of calls: 0\n\n      215 |\n      216 |             // Vérifier que l'événement a été émis\n    > 217 |             expect(mockEventBus.emit).toHaveBeenCalledWith({\n          |                                       ^\n      218 |                 type: 'conflict.rules.updated',\n      219 |                 data: {\n      220 |                     updatedRules: ['all'],\n\n      at Object.<anonymous> (src/modules/leaves/services/__tests__/conflictRecommendationService.test.ts:217:39)\n\nFAIL src/modules/leaves/services/__tests__/leaveCalculator.comprehensive.test.ts\n  ● LeaveCalculator - Tests Complets › Gestion des erreurs › should handle PublicHolidayService errors gracefully\n\n    expect(received).not.toBeNull()\n\n    Received: null\n\n      298 |             const result = await calculateLeaveCountedDays(startDate, endDate, standardSchedule);\n      299 |\n    > 300 |             expect(result).not.toBeNull();\n          |                                ^\n      301 |             expect(result!.countedDays).toBe(5); // Fallback sans jours fériés\n      302 |         });\n      303 |\n\n      at Object.<anonymous> (src/modules/leaves/services/__tests__/leaveCalculator.comprehensive.test.ts:300:32)\n\nFAIL src/modules/leaves/services/leaveCalculator.test.ts\n  ● leaveCalculator › calculateLeaveCountedDays › devrait calculer correctement les jours pour une période standard\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 5\n    Received: 0\n\n      48 |\n      49 |             expect(result).not.toBeNull();\n    > 50 |             expect(result?.countedDays).toBe(5);\n         |                                         ^\n      51 |             expect(result?.naturalDays).toBe(5);\n      52 |             expect(result?.halfDays).toBe(0);\n      53 |         });\n\n      at Object.<anonymous> (src/modules/leaves/services/leaveCalculator.test.ts:50:41)\n\n  ● leaveCalculator › calculateLeaveCountedDays › devrait calculer correctement une demi-journée du matin\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 0.5\n    Received: 0\n\n      63 |\n      64 |             expect(result).not.toBeNull();\n    > 65 |             expect(result?.countedDays).toBe(0.5);\n         |                                         ^\n      66 |             expect(result?.naturalDays).toBe(1);\n      67 |             expect(result?.halfDays).toBe(1);\n      68 |         });\n\n      at Object.<anonymous> (src/modules/leaves/services/leaveCalculator.test.ts:65:41)\n\n  ● leaveCalculator › calculateLeaveCountedDays › devrait calculer correctement une demi-journée de l'après-midi\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 0.5\n    Received: 0\n\n      78 |\n      79 |             expect(result).not.toBeNull();\n    > 80 |             expect(result?.countedDays).toBe(0.5);\n         |                                         ^\n      81 |             expect(result?.naturalDays).toBe(1);\n      82 |             expect(result?.halfDays).toBe(1);\n      83 |         });\n\n      at Object.<anonymous> (src/modules/leaves/services/leaveCalculator.test.ts:80:41)\n\n  ● leaveCalculator › calculateLeaveCountedDays › devrait ignorer isHalfDay si startDate et endDate sont différents\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 2\n    Received: 0\n\n      94 |\n      95 |             expect(result).not.toBeNull();\n    > 96 |             expect(result?.countedDays).toBe(2); // Devrait compter 2 jours complets\n         |                                         ^\n      97 |             expect(result?.naturalDays).toBe(2);\n      98 |             expect(result?.halfDays).toBe(0);\n      99 |         });\n\n      at Object.<anonymous> (src/modules/leaves/services/leaveCalculator.test.ts:96:41)\n\n  ● leaveCalculator › calculateLeaveCountedDays › devrait prendre en compte les jours fériés\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 4\n    Received: 0\n\n      115 |\n      116 |             expect(result).not.toBeNull();\n    > 117 |             expect(result?.countedDays).toBe(4); // 5 jours - 1 jour férié\n          |                                         ^\n      118 |             expect(result?.naturalDays).toBe(5);\n      119 |         });\n      120 |\n\n      at Object.<anonymous> (src/modules/leaves/services/leaveCalculator.test.ts:117:41)\n\nFAIL src/modules/leaves/permissions/__tests__/LeavePermissionService.test.ts\n  ● LeavePermissionService › grantPermission › devrait accorder une permission à un utilisateur\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n      344 |\n      345 |             // Assert\n    > 346 |             expect(result).toBe(true);\n          |                            ^\n      347 |             expect(mockFetch).toHaveBeenCalledWith(\n      348 |                 `/api/leaves/permissions/${userId}/grant`,\n      349 |                 expect.objectContaining({\n\n      at Object.<anonymous> (src/modules/leaves/permissions/__tests__/LeavePermissionService.test.ts:346:28)\n\n  ● LeavePermissionService › grantPermission › devrait retourner false si l'API échoue\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: Anything, StringContaining \"Échoué (API: 500)\", Anything, ObjectContaining {\"granterId\": \"manager-456\", \"permission\": \"leaves.reports.view\", \"userId\": \"test-user\"}\n\n    Number of calls: 0\n\n      383 |             expect(result).toBe(false);\n      384 |             expect(mockFetch).toHaveBeenCalledTimes(1);\n    > 385 |             expect(mockAuditServiceInstance.logPermissionChange).toHaveBeenCalledWith(\n          |                                                                  ^\n      386 |                 expect.anything(), // AuditActionType.PERMISSION_GRANT_FAILED - utiliser expect.anything() pour l'instant\n      387 |                 expect.stringContaining('Échoué (API: 500)'),\n      388 |                 expect.anything(), // AuditSeverity.ERROR - utiliser expect.anything() pour l'instant\n\n      at Object.<anonymous> (src/modules/leaves/permissions/__tests__/LeavePermissionService.test.ts:385:66)\n\n  ● LeavePermissionService › revokePermission › devrait révoquer une permission d'un utilisateur\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n      410 |\n      411 |             // Assert\n    > 412 |             expect(result).toBe(true);\n          |                            ^\n      413 |             expect(mockFetch).toHaveBeenCalledWith(\n      414 |                 `/api/leaves/permissions/${userId}/revoke`,\n      415 |                 expect.objectContaining({\n\n      at Object.<anonymous> (src/modules/leaves/permissions/__tests__/LeavePermissionService.test.ts:412:28)\n\n  ● LeavePermissionService › revokePermission › devrait retourner false si l'API échoue\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: Anything, StringContaining \"Échoué (API: 500)\", Anything, ObjectContaining {\"granterId\": \"manager-456\", \"permission\": \"leaves.reports.view\", \"userId\": \"test-user\"}\n\n    Number of calls: 0\n\n      445 |             expect(result).toBe(false);\n      446 |             expect(mockFetch).toHaveBeenCalledTimes(1);\n    > 447 |             expect(mockAuditServiceInstance.logPermissionChange).toHaveBeenCalledWith(\n          |                                                                  ^\n      448 |                 expect.anything(),\n      449 |                 expect.stringContaining('Échoué (API: 500)'),\n      450 |                 expect.anything(),\n\n      at Object.<anonymous> (src/modules/leaves/permissions/__tests__/LeavePermissionService.test.ts:447:66)\n\n  ● LeavePermissionService › getUserPermissions › devrait retourner toutes les permissions d'un utilisateur\n\n    expect(received).toEqual(expected) // deep equality\n\n    - Expected  - 4\n    + Received  + 1\n\n    - Array [\n    -   \"leaves.reports.view\",\n    -   \"leaves.request\",\n    - ]\n    + Array []\n\n      471 |             // Assert\n      472 |             expect(mockFetch).toHaveBeenCalledWith(`/api/users/${userId}`);\n    > 473 |             expect(permissions).toEqual(mockPermissions);\n          |                                 ^\n      474 |         });\n      475 |\n      476 |         it('devrait retourner un tableau vide si l\\'API échoue', async () => {\n\n      at Object.<anonymous> (src/modules/leaves/permissions/__tests__/LeavePermissionService.test.ts:473:33)\n\n  ● LeavePermissionService › resetUserPermissions › devrait réinitialiser les permissions personnalisées d'un utilisateur\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"/api/leaves/permissions/custom-user-123/reset\", ObjectContaining {\"method\": \"POST\"}\n    Received: \"/api/leaves/permissions/custom-user-123\", {\"method\": \"DELETE\"}\n\n    Number of calls: 1\n\n      533 |             // Assert\n      534 |             expect(result).toBe(true);\n    > 535 |             expect(mockFetch).toHaveBeenCalledWith(\n          |                               ^\n      536 |                 `/api/leaves/permissions/${userId}/reset`,\n      537 |                 expect.objectContaining({ method: 'POST' })\n      538 |             );\n\n      at Object.<anonymous> (src/modules/leaves/permissions/__tests__/LeavePermissionService.test.ts:535:31)\n\n  ● LeavePermissionService › resetUserPermissions › devrait retourner false si l'API échoue\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: Anything, StringContaining \"Échoué (API: 500)\", Anything, ObjectContaining {\"granterId\": \"manager-456\", \"userId\": \"test-user\"}\n\n    Number of calls: 0\n\n      553 |             // Assert\n      554 |             expect(result).toBe(false);\n    > 555 |             expect(mockAuditServiceInstance.logPermissionChange).toHaveBeenCalledWith(\n          |                                                                  ^\n      556 |                 expect.anything(), // AuditActionType.PERMISSION_RESET_FAILED\n      557 |                 expect.stringContaining('Échoué (API: 500)'),\n      558 |                 expect.anything(), // AuditSeverity.ERROR\n\n      at Object.<anonymous> (src/modules/leaves/permissions/__tests__/LeavePermissionService.test.ts:555:66)\n\nFAIL src/modules/leaves/services/quotaService.test.ts\n  ● quotaService › simulateQuotaTransfer › calcule correctement un transfert avec ratio personnalisé\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 2\n    Received: 4\n\n      112 |             expect(result.success).toBe(true);\n      113 |             expect(result.sourceAmount).toBe(4);\n    > 114 |             expect(result.targetAmount).toBe(2);\n          |                                         ^\n      115 |         });\n      116 |\n      117 |         it('refuse le transfert si le montant est insuffisant', async () => {\n\n      at Object.<anonymous> (src/modules/leaves/services/quotaService.test.ts:114:41)\n\nFAIL src/modules/leaves/hooks/useLeave.test.ts\n  ● useLeave Hook › should initialize with null leave and empty leaves array when no initialLeave provided\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: false\n    Received: true\n\n      172 |         expect(result.current.leave).toBeNull();\n      173 |         expect(result.current.leaves).toEqual([]);\n    > 174 |         expect(result.current.loading).toBe(false);\n          |                                        ^\n      175 |         expect(result.current.error).toBeNull();\n      176 |         expect(result.current.conflictCheckResult).toBeNull();\n      177 |         expect(result.current.allowanceCheckResult).toBeNull();\n\n      at Object.<anonymous> (src/modules/leaves/hooks/useLeave.test.ts:174:40)\n\n  ● useLeave Hook › checkConflicts › should call checkLeaveConflicts service with Date objects and update state on success\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n      461 |\n      462 |             // Vérifier que loading était true pendant l'appel\n    > 463 |             expect(loadingDuringCall).toBe(true);\n          |                                       ^\n      464 |\n      465 |             // Vérifier les états après l'appel\n      466 |             expect(result.current.loading).toBe(false);\n\n      at Object.<anonymous> (src/modules/leaves/hooks/useLeave.test.ts:463:39)\n\n  ● useLeave Hook › checkConflicts › should return null if userId is missing\n\n    expect(jest.fn()).not.toHaveBeenCalled()\n\n    Expected number of calls: 0\n    Received number of calls: 1\n\n    1: 2024-09-01T22:00:00.000Z, 2024-09-05T22:00:00.000Z, \"user123\", \"leave-initial\"\n\n      589 |\n      590 |             // Vérifier que le service n'a pas été appelé\n    > 591 |             expect(mockedCheckLeaveConflicts).not.toHaveBeenCalled();\n          |                                                   ^\n      592 |\n      593 |             // Vérifier que setError a été appelé avec les informations appropriées\n      594 |             expect(mockedSetError).toHaveBeenCalledWith(\n\n      at Object.<anonymous> (src/modules/leaves/hooks/useLeave.test.ts:591:51)\n\n  ● useLeave Hook › fetchUserLeaves › should set error state if fetchLeaves service fails\n\n    Fetch leaves failed\n\n      1097 |\n      1098 |         it('should set error state if fetchLeaves service fails', async () => {\n    > 1099 |             const mockError = new Error('Fetch leaves failed');\n           |                               ^\n      1100 |             mockedFetchLeaves.mockRejectedValueOnce(mockError);\n      1101 |\n      1102 |             const { result } = renderHook(() => useLeave({ userId: mockUserId }));\n\n      at Object.<anonymous> (src/modules/leaves/hooks/useLeave.test.ts:1099:31)\n\n  ● useLeave Hook › fetchUserLeaves › should set error state if fetchLeaves service fails\n\n    expect(received).toEqual(expected) // deep equality\n\n    - Expected  -  1\n    + Received  + 14\n\n    - Array []\n    + Array [\n    +   Object {\n    +     \"countedDays\": 5,\n    +     \"createdAt\": 2024-07-31T22:00:00.000Z,\n    +     \"endDate\": 2024-09-05T22:00:00.000Z,\n    +     \"id\": \"leave-initial\",\n    +     \"requestDate\": 2024-07-31T22:00:00.000Z,\n    +     \"startDate\": 2024-09-01T22:00:00.000Z,\n    +     \"status\": \"DRAFT\",\n    +     \"type\": \"ANNUAL\",\n    +     \"updatedAt\": 2024-07-31T22:00:00.000Z,\n    +     \"userId\": \"user123\",\n    +   },\n    + ]\n\n      1119 |                 severity: 'error'\n      1120 |             });\n    > 1121 |             expect(result.current.leaves).toEqual([]); // Liste reste vide\n           |                                           ^\n      1122 |         });\n      1123 |     });\n      1124 |\n\n      at Object.<anonymous> (src/modules/leaves/hooks/useLeave.test.ts:1121:43)\n\n  ● useLeave Hook › fetchLeaveDetails › should set error state if fetchLeaveById service fails\n\n    Fetch details failed\n\n      1146 |         it('should set error state if fetchLeaveById service fails', async () => {\n      1147 |             const specificLeaveId = 'leave-fail';\n    > 1148 |             const mockError = new Error('Fetch details failed');\n           |                               ^\n      1149 |             mockedFetchLeaveById.mockRejectedValueOnce(mockError);\n      1150 |\n      1151 |             const { result } = renderHook(() => useLeave({ userId: mockUserId }));\n\n      at Object.<anonymous> (src/modules/leaves/hooks/useLeave.test.ts:1148:31)\n\nFAIL src/modules/leaves/permissions/__tests__/LeavePermissionService.extended.test.ts\n  ● LeavePermissionService (Tests avancés) › Cache de permissions › devrait invalider le cache d'un utilisateur\n\n    Property `delete` does not exist in the provided object\n\n      186 |             // Arrange\n      187 |             const userId = mockEmployee.id;\n    > 188 |             const cacheSpy = jest.spyOn(permissionService['permissionCache'], 'delete');\n          |                                   ^\n      189 |\n      190 |             // Act\n      191 |             permissionService.invalidateUserCache(mockEmployee.id);\n\n      at ModuleMocker.spyOn (node_modules/jest-mock/build/index.js:731:13)\n      at Object.<anonymous> (src/modules/leaves/permissions/__tests__/LeavePermissionService.extended.test.ts:188:35)\n\n  ● LeavePermissionService (Tests avancés) › Cache de permissions › devrait configurer le cache avec les options fournies\n\n    expect(jest.fn()).toHaveBeenCalled()\n\n    Expected number of calls: >= 1\n    Received number of calls:    0\n\n      212 |\n      213 |             // Assert\n    > 214 |             expect(optionsSpy).toHaveBeenCalled();\n          |                                ^\n      215 |\n      216 |             // Note: Ne pas tester les stats ici car elles peuvent varier en fonction de l'environnement\n      217 |             // et de l'ordre d'exécution des tests\n\n      at Object.<anonymous> (src/modules/leaves/permissions/__tests__/LeavePermissionService.extended.test.ts:214:32)\n\nFAIL src/modules/leaves/hooks/useLeaveQuota.test.ts\n  ● useLeaveQuota › devrait charger les quotas de congés\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 12\n    Received: 10\n\n       99 |         expect(result.current.totalBalance.pending).toBe(5);\n      100 |         expect(result.current.totalBalance.remaining).toBe(20);\n    > 101 |         expect(result.current.quotasByType.length).toBe(12); // Mise à jour pour tous les types incluant PATERNITY et PARENTAL\n          |                                                    ^\n      102 |     });\n      103 |\n      104 |     it('devrait récupérer le quota pour un type spécifique', async () => {\n\n      at Object.<anonymous> (src/modules/leaves/hooks/useLeaveQuota.test.ts:101:52)\n\nFAIL src/modules/leaves/quotas/transfer/__tests__/useQuotaTransfer.test.tsx\n  ● useQuotaTransfer › devrait charger les données initiales\n\n    expect(received).not.toBeNull()\n\n    Received: null\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div />\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n      130 |         expect(result.current.error).toBeNull();\n      131 |\n    > 132 |         await waitFor(() => expect(result.current.balance).not.toBeNull());\n          |                                                                ^\n      133 |\n      134 |         // Vérifier l'état après chargement\n      135 |         expect(result.current.loading).toBe(false);\n\n      at src/modules/leaves/quotas/transfer/__tests__/useQuotaTransfer.test.tsx:132:64\n      at callback (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:76)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)\n\n  ● useQuotaTransfer › devrait calculer correctement les types disponibles\n\n    expect(received).toContain(expected) // indexOf\n\n    Expected value: \"ANNUAL\"\n    Received array: []\n\n      151 |\n      152 |         // Vérifier les types sources disponibles\n    > 153 |         expect(result.current.availableSourceTypes).toContain(LeaveType.ANNUAL);\n          |                                                     ^\n      154 |         expect(result.current.availableSourceTypes).toContain(LeaveType.RECOVERY);\n      155 |\n      156 |         // Vérifier les types cibles disponibles par source\n\n      at Object.<anonymous> (src/modules/leaves/quotas/transfer/__tests__/useQuotaTransfer.test.tsx:153:53)\n\n  ● useQuotaTransfer › devrait simuler un transfert correctement\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: {\"sourceAmount\": 5, \"sourceType\": \"RECOVERY\", \"targetType\": \"ANNUAL\", \"userId\": \"mock-user-id\"}, [{\"createdAt\": 2025-05-25T17:18:05.040Z, \"id\": \"rule-1\", \"isActive\": true, \"name\": \"Récupération vers Congés Annuels\", \"ratio\": 1, \"ruleType\": \"STANDARD\", \"sourceType\": \"RECOVERY\", \"targetType\": \"ANNUAL\", \"updatedAt\": 2025-05-25T17:18:05.040Z}]\n\n    Number of calls: 0\n\n      188 |\n      189 |         // Vérifier les appels et le résultat\n    > 190 |         expect(previewQuotaTransfer).toHaveBeenCalledWith(transferRequest, applicableRules);\n          |                                      ^\n      191 |         expect(simulationResult).toMatchObject({\n      192 |             success: true,\n      193 |             sourceAmount: 5,\n\n      at Object.<anonymous> (src/modules/leaves/quotas/transfer/__tests__/useQuotaTransfer.test.tsx:190:38)\n\n  ● useQuotaTransfer › devrait exécuter un transfert correctement\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: {\"sourceAmount\": 5, \"sourceType\": \"RECOVERY\", \"targetType\": \"ANNUAL\", \"userId\": \"mock-user-id\"}\n\n    Number of calls: 0\n\n      221 |\n      222 |         // Vérifier les appels et le résultat\n    > 223 |         expect(transferQuota).toHaveBeenCalledWith(transferRequest);\n          |                               ^\n      224 |         expect(fetchLeaveBalance).toHaveBeenCalledTimes(2);\n      225 |         expect(transferResult).toEqual(mockTransferResult);\n      226 |     });\n\n      at Object.<anonymous> (src/modules/leaves/quotas/transfer/__tests__/useQuotaTransfer.test.tsx:223:31)\n\n  ● useQuotaTransfer › devrait gérer les erreurs de transfert\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"Erreur lors du transfert\"\n    Received: \"Aucune règle de transfert n'est disponible pour Récupération vers Congés annuels\"\n\n      304 |         expect(transferResult.success).toBe(false);\n      305 |         expect(result.current.transferError).toBeInstanceOf(Error);\n    > 306 |         expect(result.current.transferError?.message).toBe(errorMessage);\n          |                                                       ^\n      307 |     });\n      308 | }); \n\n      at Object.<anonymous> (src/modules/leaves/quotas/transfer/__tests__/useQuotaTransfer.test.tsx:306:55)\n\nFAIL src/modules/leaves/services/conflictDetectionService.test.ts\n  ● Test suite failed to run\n\n    Cannot find module '../../../services/teamService' from 'src/modules/leaves/services/conflictDetectionService.test.ts'\n\n       8 |\n       9 | jest.mock('../../../services/userService');\n    > 10 | jest.mock('../../../services/teamService');\n         |      ^\n      11 | jest.mock('../../../utils/performanceLogger');\n      12 |\n      13 | const MockUserService = UserService as jest.MockedClass<typeof UserService>;\n\n      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/resolver.js:427:11)\n      at Object.<anonymous> (src/modules/leaves/services/conflictDetectionService.test.ts:10:6)\n\nFAIL src/modules/leaves/hooks/__tests__/useConflictDetection.test.ts (5.56 s)\n  ● useConflictDetection › devrait initialiser correctement l'état et vérifier les conflits\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: false\n    Received: true\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div />\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n      86 |\n      87 |         // Attendre la fin du chargement\n    > 88 |         await waitFor(() => expect(result.current.loading).toBe(false));\n         |                                                            ^\n      89 |\n      90 |         // Assert : vérifier que la méthode du *service* a été appelée (indirectement par le hook)\n      91 |         // Il faut peut-être ajuster ce que le hook passe au service\n\n      at src/modules/leaves/hooks/__tests__/useConflictDetection.test.ts:88:60\n      at callback (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:76)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)\n\n  ● useConflictDetection - resolveConflict › devrait appeler le service (indirectement) et mettre à jour l'état après résolution\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: false\n    Received: true\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div />\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n      160 |         // Charger les conflits initiaux en appelant checkConflicts avec des objets Date\n      161 |         act(() => { result.current.checkConflicts(mockStartDateObj, mockEndDateObj); });\n    > 162 |         await waitFor(() => expect(result.current.loading).toBe(false));\n          |                                                            ^\n      163 |         expect(result.current.conflicts).toEqual(initialConflictsResult.conflicts);\n      164 |         expect(result.current.hasBlockingConflicts).toBe(true);\n      165 |\n\n      at src/modules/leaves/hooks/__tests__/useConflictDetection.test.ts:162:60\n      at callback (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:76)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)\n\n  ● useConflictDetection - resolveConflict › devrait gérer les erreurs lors de la résolution\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: false\n    Received: true\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div />\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n      202 |         // Charger les conflits initiaux en appelant checkConflicts avec des objets Date\n      203 |         act(() => { result.current.checkConflicts(mockStartDateObj, mockEndDateObj); });\n    > 204 |         await waitFor(() => expect(result.current.loading).toBe(false));\n          |                                                            ^\n      205 |\n      206 |         // Act : Appeler resolveConflict du hook. On s'attend à ce qu'il échoue.\n      207 |         // Pour simuler l'échec, on pourrait mocker une dépendance ou modifier le hook\n\n      at src/modules/leaves/hooks/__tests__/useConflictDetection.test.ts:204:60\n      at callback (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:76)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)\n\n  ● useConflictDetection - getConflictsByType › devrait filtrer les conflits par type\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: false\n    Received: true\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div />\u001b[39m\n      \u001b[36m</body>\u001b[39m\n    \u001b[36m</html>\u001b[39m\n\n      244 |         // Charger les conflits en appelant checkConflicts avec des objets Date\n      245 |         act(() => { result.current.checkConflicts(mockStartDateObj, mockEndDateObj); });\n    > 246 |         await waitFor(() => expect(result.current.loading).toBe(false));\n          |                                                            ^\n      247 |\n      248 |         // Act & Assert : Appeler getConflictsByType du *hook*\n      249 |         expect(result.current.getConflictsByType(ConflictType.USER_LEAVE_OVERLAP)).toEqual([mockConflicts[0]]);\n\n      at src/modules/leaves/hooks/__tests__/useConflictDetection.test.ts:246:60\n      at callback (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:76)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)\n\nFAIL src/modules/leaves/components/UserLeaveBalance.test.tsx (6.405 s)\n  ● UserLeaveBalance Component › affiche correctement les soldes de congés\n\n    Unable to find an element with the text: Congé Annuel. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div>\u001b[39m\n        \u001b[36m<div\u001b[39m\n          \u001b[33mclass\u001b[39m=\u001b[32m\"rounded-lg border bg-card text-card-foreground shadow-sm dark:bg-slate-800 dark:border-slate-700 w-full\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"flex flex-col space-y-1.5 p-6\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<h3\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"font-semibold tracking-tight bg-gradient-to-r from-primary-600 via-secondary-600 to-tertiary-600 bg-clip-text text-transparent text-lg\"\u001b[39m\n              \u001b[33mstyle\u001b[39m=\u001b[32m\"background-clip: text;\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mChargement des soldes...\u001b[0m\n            \u001b[36m</h3>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"p-6 pt-0\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"space-y-3\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</div>\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n      74 |\n      75 |         expectToBeInDocument(screen.getByText('Chargement des soldes...'));\n    > 76 |         await waitFor(() => {\n         |                      ^\n      77 |             expectToBeInDocument(screen.getByText('Congé Annuel'));\n      78 |         });\n      79 |\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at Object.<anonymous> (src/modules/leaves/components/UserLeaveBalance.test.tsx:76:22)\n\n  ● UserLeaveBalance Component › affiche un message d'erreur si le chargement échoue\n\n    Unable to find an element with the text: Erreur. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div>\u001b[39m\n        \u001b[36m<div\u001b[39m\n          \u001b[33mclass\u001b[39m=\u001b[32m\"rounded-lg border bg-card text-card-foreground shadow-sm dark:bg-slate-800 dark:border-slate-700 w-full\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"flex flex-col space-y-1.5 p-6\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<h3\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"font-semibold tracking-tight bg-gradient-to-r from-primary-600 via-secondary-600 to-tertiary-600 bg-clip-text text-transparent text-lg\"\u001b[39m\n              \u001b[33mstyle\u001b[39m=\u001b[32m\"background-clip: text;\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mChargement des soldes...\u001b[0m\n            \u001b[36m</h3>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"p-6 pt-0\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"space-y-3\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</div>\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n       97 |         mockedAxios.get.mockRejectedValueOnce(new Error('Network error'));\n       98 |         render(<UserLeaveBalance userId={123} />);\n    >  99 |         await waitFor(() => {\n          |                      ^\n      100 |             expectToBeInDocument(screen.getByText('Erreur'));\n      101 |         });\n      102 |         expectToBeInDocument(screen.getByText('Impossible de charger les soldes de congés'));\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at Object.<anonymous> (src/modules/leaves/components/UserLeaveBalance.test.tsx:99:22)\n\n  ● UserLeaveBalance Component › affiche un message si aucun solde n'est disponible\n\n    Unable to find an element with the text: Aucun solde disponible. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div>\u001b[39m\n        \u001b[36m<div\u001b[39m\n          \u001b[33mclass\u001b[39m=\u001b[32m\"rounded-lg border bg-card text-card-foreground shadow-sm dark:bg-slate-800 dark:border-slate-700 w-full\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"flex flex-col space-y-1.5 p-6\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<h3\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"font-semibold tracking-tight bg-gradient-to-r from-primary-600 via-secondary-600 to-tertiary-600 bg-clip-text text-transparent text-lg\"\u001b[39m\n              \u001b[33mstyle\u001b[39m=\u001b[32m\"background-clip: text;\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mChargement des soldes...\u001b[0m\n            \u001b[36m</h3>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"p-6 pt-0\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"space-y-3\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</div>\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n      106 |         mockedAxios.get.mockResolvedValueOnce({ data: [] });\n      107 |         render(<UserLeaveBalance userId={123} />);\n    > 108 |         await waitFor(() => {\n          |                      ^\n      109 |             expectToBeInDocument(screen.getByText('Aucun solde disponible'));\n      110 |         });\n      111 |     });\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at Object.<anonymous> (src/modules/leaves/components/UserLeaveBalance.test.tsx:108:22)\n\n  ● UserLeaveBalance Component › respecte l'option compact=true en masquant les détails\n\n    Unable to find an element with the text: Congé Annuel. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div>\u001b[39m\n        \u001b[36m<div\u001b[39m\n          \u001b[33mclass\u001b[39m=\u001b[32m\"rounded-lg border bg-card text-card-foreground shadow-sm dark:bg-slate-800 dark:border-slate-700 w-full\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"flex flex-col space-y-1.5 p-6\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<h3\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"font-semibold tracking-tight bg-gradient-to-r from-primary-600 via-secondary-600 to-tertiary-600 bg-clip-text text-transparent text-lg\"\u001b[39m\n              \u001b[33mstyle\u001b[39m=\u001b[32m\"background-clip: text;\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mChargement des soldes...\u001b[0m\n            \u001b[36m</h3>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"p-6 pt-0\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"space-y-3\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</div>\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n      114 |         mockedAxios.get.mockResolvedValueOnce({ data: mockBalanceData });\n      115 |         render(<UserLeaveBalance userId={123} compact={true} />);\n    > 116 |         await waitFor(() => {\n          |                      ^\n      117 |             expectToBeInDocument(screen.getByText('Congé Annuel'));\n      118 |         });\n      119 |         expectToBeInDocument(screen.getByText('15.5 jours'));\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at Object.<anonymous> (src/modules/leaves/components/UserLeaveBalance.test.tsx:116:22)\n\n  ● UserLeaveBalance Component › respecte l'option hideHeader=true\n\n    Unable to find an element with the text: Congé Annuel. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div>\u001b[39m\n        \u001b[36m<div\u001b[39m\n          \u001b[33mclass\u001b[39m=\u001b[32m\"rounded-lg border bg-card text-card-foreground shadow-sm dark:bg-slate-800 dark:border-slate-700 w-full\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"p-6 pt-0\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"space-y-3\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"animate-pulse rounded-md bg-muted h-4 w-full\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</div>\u001b[39m\n      \u001b[36m</div>\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n      126 |         mockedAxios.get.mockResolvedValueOnce({ data: mockBalanceData });\n      127 |         render(<UserLeaveBalance userId={123} hideHeader={true} />);\n    > 128 |         await waitFor(() => {\n          |                      ^\n      129 |             expectToBeInDocument(screen.getByText('Congé Annuel'));\n      130 |         });\n      131 |         expectNotToBeInDocument(screen.queryByText('Soldes de congés'));\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at Object.<anonymous> (src/modules/leaves/components/UserLeaveBalance.test.tsx:128:22)\n\nFAIL src/modules/leaves/components/LeaveForm.test.tsx (12.829 s)\n  ● LeaveForm › should handle error when loading leave types\n\n    Unable to find an element with the display value: Erreur de chargement.\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div>\u001b[39m\n        \u001b[36m<form\u001b[39m\n          \u001b[33mclass\u001b[39m=\u001b[32m\"space-y-6 max-w-2xl mx-auto\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"bg-gradient-to-r from-indigo-50 to-blue-50 p-4 rounded-lg shadow-sm mb-6\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<h3\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"text-lg font-medium text-gray-800 mb-2\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mNouvelle demande de congé\u001b[0m\n            \u001b[36m</h3>\u001b[39m\n            \u001b[36m<p\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"text-sm text-gray-600\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mComplétez le formulaire ci-dessous pour soumettre votre demande.\u001b[0m\n            \u001b[36m</p>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"bg-white p-6 rounded-lg shadow-md border border-gray-200\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"mb-6\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center justify-between\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<label\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700\"\u001b[39m\n                  \u001b[33mfor\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mType de congé\u001b[0m\n                \u001b[36m</label>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"relative inline-block\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<span\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"text-gray-400 hover:text-gray-600 cursor-help\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-circle-help h-4 w-4\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<circle\u001b[39m\n                        \u001b[33mcx\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                        \u001b[33mcy\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                        \u001b[33mr\u001b[39m=\u001b[32m\"10\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M12 17h.01\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                  \u001b[36m</span>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"mt-1 relative\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<select\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"block w-full rounded-md border-gray-300 shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm py-2 px-3\"\u001b[39m\n                  \u001b[33mdisabled\u001b[39m=\u001b[32m\"\"\u001b[39m\n                  \u001b[33mid\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                  \u001b[33mname\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                  \u001b[33mrequired\u001b[39m=\u001b[32m\"\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<option\u001b[39m\n                    \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[0mChargement...\u001b[0m\n                  \u001b[36m</option>\u001b[39m\n                \u001b[36m</select>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"grid grid-cols-1 gap-6 md:grid-cols-2 mb-6\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<label\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700 mb-1\"\u001b[39m\n                  \u001b[33mfor\u001b[39m=\u001b[32m\"startDate\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mDate de début\u001b[0m\n                \u001b[36m</label>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker-wrapper\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker__input-container\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<input\u001b[39m\n                        \u001b[33mautocomplete\u001b[39m=\u001b[32m\"off\"\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 pl-10 pr-4 py-2 disabled:bg-gray-100 disabled:cursor-not-allowed\"\u001b[39m\n                        \u001b[33mid\u001b[39m=\u001b[32m\"startDate\"\u001b[39m\n                        \u001b[33mplaceholder\u001b[39m=\u001b[32m\"Sélectionner une date\"\u001b[39m\n                        \u001b[33mtype\u001b[39m=\u001b[32m\"text\"\u001b[39m\n                        \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</div>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-calendar h-5 w-5 text-gray-400\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M8 2v4\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M16 2v4\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<rect\u001b[39m\n                        \u001b[33mheight\u001b[39m=\u001b[32m\"18\"\u001b[39m\n                        \u001b[33mrx\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                        \u001b[33mwidth\u001b[39m=\u001b[32m\"18\"\u001b[39m\n                        \u001b[33mx\u001b[39m=\u001b[32m\"3\"\u001b[39m\n                        \u001b[33my\u001b[39m=\u001b[32m\"4\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M3 10h18\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<label\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700 mb-1\"\u001b[39m\n                  \u001b[33mfor\u001b[39m=\u001b[32m\"endDate\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mDate de fin\u001b[0m\n                \u001b[36m</label>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker-wrapper\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker__input-container\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<input\u001b[39m\n                        \u001b[33mautocomplete\u001b[39m=\u001b[32m\"off\"\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 pl-10 pr-4 py-2 disabled:bg-gray-100 disabled:cursor-not-allowed\"\u001b[39m\n                        \u001b[33mid\u001b[39m=\u001b[32m\"endDate\"\u001b[39m\n                        \u001b[33mplaceholder\u001b[39m=\u001b[32m\"Sélectionner une date\"\u001b[39m\n                        \u001b[33mtype\u001b[39m=\u001b[32m\"text\"\u001b[39m\n                        \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</div>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-calendar h-5 w-5 text-gray-400\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M8 2v4\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M16 2v4\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<rect\u001b[39m\n                        \u001b[33mheight\u001b[39m=\u001b[32m\"18\"\u001b[39m\n                        \u001b[33mrx\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                        \u001b[33mwidth\u001b[39m=\u001b[32m\"18\"\u001b[39m\n                        \u001b[33mx\u001b[39m=\u001b[32m\"3\"\u001b[39m\n                        \u001b[33my\u001b[39m=\u001b[32m\"4\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M3 10h18\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"mb-6\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"flex flex-col space-y-4 p-4 bg-gray-50 rounded-md border border-gray-200\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<input\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"\u001b[39m\n                    \u001b[33mdisabled\u001b[39m=\u001b[32m\"\"\u001b[39m\n                    \u001b[33mid\u001b[39m=\u001b[32m\"isHalfDay\"\u001b[39m\n                    \u001b[33mname\u001b[39m=\u001b[32m\"isHalfDay\"\u001b[39m\n                    \u001b[33mtype\u001b[39m=\u001b[32m\"checkbox\"\u001b[39m\n                  \u001b[36m/>\u001b[39m\n                  \u001b[36m<label\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"ml-2 block text-sm font-medium text-gray-700\"\u001b[39m\n                    \u001b[33mfor\u001b[39m=\u001b[32m\"isHalfDay\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[0mDemi-journée\u001b[0m\n                  \u001b[36m</label>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"relative inline-block\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<span\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"text-gray-400 hover:text-gray-600 cursor-help ml-1\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<svg\u001b[39m\n                        \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-circle-help h-4 w-4\"\u001b[39m\n                        \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                        \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                        \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                        \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                        \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<circle\u001b[39m\n                          \u001b[33mcx\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                          \u001b[33mcy\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                          \u001b[33mr\u001b[39m=\u001b[32m\"10\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                        \u001b[36m<path\u001b[39m\n                          \u001b[33md\u001b[39m=\u001b[32m\"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                        \u001b[36m<path\u001b[39m\n                          \u001b[33md\u001b[39m=\u001b[32m\"M12 17h.01\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                      \u001b[36m</svg>\u001b[39m\n                    \u001b[36m</span>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"space-y-3 mb-6\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"mb-6\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center justify-between\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<label\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700\"\u001b[39m\n                  \u001b[33mfor\u001b[39m=\u001b[32m\"reason\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mMotif (optionnel)\u001b[0m\n                \u001b[36m</label>\u001b[39m\n                \u001b[36m<span\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mMax. 200 caractères\u001b[0m\n                \u001b[36m</span>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<textarea\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\u001b[39m\n                \u001b[33mid\u001b[39m=\u001b[32m\"reason\"\u001b[39m\n                \u001b[33mmaxlength\u001b[39m=\u001b[32m\"200\"\u001b[39m\n                \u001b[33mname\u001b[39m=\u001b[32m\"reason\"\u001b[39m\n                \u001b[33mplaceholder\u001b[39m=\u001b[32m\"Précisez le motif de votre demande si nécessaire...\"\u001b[39m\n                \u001b[33mrows\u001b[39m=\u001b[32m\"3\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"flex justify-end mt-8\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-60 disabled:cursor-not-allowed transition-opacity\"\u001b[39m\n              \u001b[33mdisabled\u001b[39m=\u001b[32m\"\"\u001b[39m\n              \u001b[33mtype\u001b[39m=\u001b[32m\"submit\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSoumettre la demande\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</form>\u001b[39m\n      \u001b[36m</div>\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n      258 |         (global.fetch as jest.Mock).mockRejectedValue(new Error('Failed to fetch types'));\n      259 |         renderTheForm();\n    > 260 |         await waitFor(() => {\n          |                      ^\n      261 |             expectToBeInDocument(screen.getByDisplayValue('Erreur de chargement'));\n      262 |         });\n      263 |     });\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at Object.<anonymous> (src/modules/leaves/components/LeaveForm.test.tsx:260:22)\n\n  ● LeaveForm › should call useLeaveCalculation with initial dates and options\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: {\"endDate\": null, \"options\": {\"countHalfDays\": false, \"halfDayPeriod\": undefined}, \"startDate\": null}\n    Received\n           1\n              Object {\n                \"endDate\": null,\n                \"options\": Object {\n            -     \"countHalfDays\": false,\n                  \"halfDayPeriod\": undefined,\n            +     \"isHalfDay\": false,\n                },\n                \"startDate\": null,\n              },\n           2\n              Object {\n                \"endDate\": null,\n                \"options\": Object {\n            -     \"countHalfDays\": false,\n                  \"halfDayPeriod\": undefined,\n            +     \"isHalfDay\": false,\n                },\n                \"startDate\": null,\n              },\n\n    Number of calls: 2\n\n      45 |  */\n      46 | export function expectToHaveBeenCalledWith(mockFn: MockFn, ...args: any[]): void {\n    > 47 |     expect(mockFn).toHaveBeenCalledWith(...args);\n         |                    ^\n      48 | }\n      49 |\n      50 | /**\n\n      at toHaveBeenCalledWith (src/tests/utils/assertions.ts:47:20)\n      at Object.<anonymous> (src/modules/leaves/components/LeaveForm.test.tsx:267:35)\n\n  ● LeaveForm › should update useLeaveCalculation when dates change\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: {\"endDate\": null, \"options\": {\"countHalfDays\": false, \"halfDayPeriod\": undefined}, \"startDate\": null}\n    Received\n           1\n              Object {\n                \"endDate\": null,\n                \"options\": Object {\n            -     \"countHalfDays\": false,\n                  \"halfDayPeriod\": undefined,\n            +     \"isHalfDay\": false,\n                },\n                \"startDate\": null,\n              },\n           2\n              Object {\n                \"endDate\": null,\n                \"options\": Object {\n            -     \"countHalfDays\": false,\n                  \"halfDayPeriod\": undefined,\n            +     \"isHalfDay\": false,\n                },\n                \"startDate\": null,\n              },\n\n    Number of calls: 2\n\n      45 |  */\n      46 | export function expectToHaveBeenCalledWith(mockFn: MockFn, ...args: any[]): void {\n    > 47 |     expect(mockFn).toHaveBeenCalledWith(...args);\n         |                    ^\n      48 | }\n      49 |\n      50 | /**\n\n      at toHaveBeenCalledWith (src/tests/utils/assertions.ts:47:20)\n      at Object.<anonymous> (src/modules/leaves/components/LeaveForm.test.tsx:280:35)\n\n  ● LeaveForm › should handle half-day selection\n\n    expect(element).toBeChecked()\n\n    Received element is not checked:\n      <input class=\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\" disabled=\"\" id=\"isHalfDay\" name=\"isHalfDay\" type=\"checkbox\" />\n\n      73 |  */\n      74 | export function expectToBeChecked(element: HTMLElement | null | undefined): void {\n    > 75 |     expect(element).toBeChecked();\n         |                     ^\n      76 | }\n      77 |\n      78 | /**\n\n      at toBeChecked (src/tests/utils/assertions.ts:75:21)\n      at Object.<anonymous> (src/modules/leaves/components/LeaveForm.test.tsx:346:26)\n\n  ● LeaveForm › should validate form on submit and show errors if invalid\n\n    Unable to find an element with the text: La date de début est requise.. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div>\u001b[39m\n        \u001b[36m<form\u001b[39m\n          \u001b[33mclass\u001b[39m=\u001b[32m\"space-y-6 max-w-2xl mx-auto\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"bg-gradient-to-r from-indigo-50 to-blue-50 p-4 rounded-lg shadow-sm mb-6\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<h3\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"text-lg font-medium text-gray-800 mb-2\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mNouvelle demande de congé\u001b[0m\n            \u001b[36m</h3>\u001b[39m\n            \u001b[36m<p\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"text-sm text-gray-600\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mComplétez le formulaire ci-dessous pour soumettre votre demande.\u001b[0m\n            \u001b[36m</p>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"bg-white p-6 rounded-lg shadow-md border border-gray-200\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"mb-6\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center justify-between\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<label\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700\"\u001b[39m\n                  \u001b[33mfor\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mType de congé\u001b[0m\n                \u001b[36m</label>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"relative inline-block\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<span\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"text-gray-400 hover:text-gray-600 cursor-help\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-circle-help h-4 w-4\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<circle\u001b[39m\n                        \u001b[33mcx\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                        \u001b[33mcy\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                        \u001b[33mr\u001b[39m=\u001b[32m\"10\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M12 17h.01\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                  \u001b[36m</span>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"mt-1 relative\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<select\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"block w-full rounded-md border-gray-300 shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm py-2 px-3\"\u001b[39m\n                  \u001b[33mdisabled\u001b[39m=\u001b[32m\"\"\u001b[39m\n                  \u001b[33mid\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                  \u001b[33mname\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                  \u001b[33mrequired\u001b[39m=\u001b[32m\"\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<option\u001b[39m\n                    \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[0mChargement...\u001b[0m\n                  \u001b[36m</option>\u001b[39m\n                \u001b[36m</select>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"grid grid-cols-1 gap-6 md:grid-cols-2 mb-6\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<label\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700 mb-1\"\u001b[39m\n                  \u001b[33mfor\u001b[39m=\u001b[32m\"startDate\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mDate de début\u001b[0m\n                \u001b[36m</label>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker-wrapper\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker__input-container\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<input\u001b[39m\n                        \u001b[33mautocomplete\u001b[39m=\u001b[32m\"off\"\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 pl-10 pr-4 py-2 disabled:bg-gray-100 disabled:cursor-not-allowed\"\u001b[39m\n                        \u001b[33mid\u001b[39m=\u001b[32m\"startDate\"\u001b[39m\n                        \u001b[33mplaceholder\u001b[39m=\u001b[32m\"Sélectionner une date\"\u001b[39m\n                        \u001b[33mtype\u001b[39m=\u001b[32m\"text\"\u001b[39m\n                        \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</div>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-calendar h-5 w-5 text-gray-400\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M8 2v4\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M16 2v4\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<rect\u001b[39m\n                        \u001b[33mheight\u001b[39m=\u001b[32m\"18\"\u001b[39m\n                        \u001b[33mrx\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                        \u001b[33mwidth\u001b[39m=\u001b[32m\"18\"\u001b[39m\n                        \u001b[33mx\u001b[39m=\u001b[32m\"3\"\u001b[39m\n                        \u001b[33my\u001b[39m=\u001b[32m\"4\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M3 10h18\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<label\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700 mb-1\"\u001b[39m\n                  \u001b[33mfor\u001b[39m=\u001b[32m\"endDate\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mDate de fin\u001b[0m\n                \u001b[36m</label>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker-wrapper\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker__input-container\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<input\u001b[39m\n                        \u001b[33mautocomplete\u001b[39m=\u001b[32m\"off\"\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 pl-10 pr-4 py-2 disabled:bg-gray-100 disabled:cursor-not-allowed\"\u001b[39m\n                        \u001b[33mid\u001b[39m=\u001b[32m\"endDate\"\u001b[39m\n                        \u001b[33mplaceholder\u001b[39m=\u001b[32m\"Sélectionner une date\"\u001b[39m\n                        \u001b[33mtype\u001b[39m=\u001b[32m\"text\"\u001b[39m\n                        \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</div>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-calendar h-5 w-5 text-gray-400\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M8 2v4\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M16 2v4\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<rect\u001b[39m\n                        \u001b[33mheight\u001b[39m=\u001b[32m\"18\"\u001b[39m\n                        \u001b[33mrx\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                        \u001b[33mwidth\u001b[39m=\u001b[32m\"18\"\u001b[39m\n                        \u001b[33mx\u001b[39m=\u001b[32m\"3\"\u001b[39m\n                        \u001b[33my\u001b[39m=\u001b[32m\"4\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M3 10h18\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"mb-6\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"flex flex-col space-y-4 p-4 bg-gray-50 rounded-md border border-gray-200\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<input\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"\u001b[39m\n                    \u001b[33mdisabled\u001b[39m=\u001b[32m\"\"\u001b[39m\n                    \u001b[33mid\u001b[39m=\u001b[32m\"isHalfDay\"\u001b[39m\n                    \u001b[33mname\u001b[39m=\u001b[32m\"isHalfDay\"\u001b[39m\n                    \u001b[33mtype\u001b[39m=\u001b[32m\"checkbox\"\u001b[39m\n                  \u001b[36m/>\u001b[39m\n                  \u001b[36m<label\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"ml-2 block text-sm font-medium text-gray-700\"\u001b[39m\n                    \u001b[33mfor\u001b[39m=\u001b[32m\"isHalfDay\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[0mDemi-journée\u001b[0m\n                  \u001b[36m</label>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"relative inline-block\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<span\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"text-gray-400 hover:text-gray-600 cursor-help ml-1\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<svg\u001b[39m\n                        \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-circle-help h-4 w-4\"\u001b[39m\n                        \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                        \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                        \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                        \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                        \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<circle\u001b[39m\n                          \u001b[33mcx\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                          \u001b[33mcy\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                          \u001b[33mr\u001b[39m=\u001b[32m\"10\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                        \u001b[36m<path\u001b[39m\n                          \u001b[33md\u001b[39m=\u001b[32m\"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                        \u001b[36m<path\u001b[39m\n                          \u001b[33md\u001b[39m=\u001b[32m\"M12 17h.01\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                      \u001b[36m</svg>\u001b[39m\n                    \u001b[36m</span>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"space-y-3 mb-6\"\u001b[39m\n            \u001b[36m/>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"mb-6\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center justify-between\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<label\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700\"\u001b[39m\n                  \u001b[33mfor\u001b[39m=\u001b[32m\"reason\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mMotif (optionnel)\u001b[0m\n                \u001b[36m</label>\u001b[39m\n                \u001b[36m<span\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"text-xs text-gray-500\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mMax. 200 caractères\u001b[0m\n                \u001b[36m</span>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<textarea\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\u001b[39m\n                \u001b[33mid\u001b[39m=\u001b[32m\"reason\"\u001b[39m\n                \u001b[33mmaxlength\u001b[39m=\u001b[32m\"200\"\u001b[39m\n                \u001b[33mname\u001b[39m=\u001b[32m\"reason\"\u001b[39m\n                \u001b[33mplaceholder\u001b[39m=\u001b[32m\"Précisez le motif de votre demande si nécessaire...\"\u001b[39m\n                \u001b[33mrows\u001b[39m=\u001b[32m\"3\"\u001b[39m\n              \u001b[36m/>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"flex justify-end mt-8\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<button\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-60 disabled:cursor-not-allowed transition-opacity\"\u001b[39m\n              \u001b[33mdisabled\u001b[39m=\u001b[32m\"\"\u001b[39m\n              \u001b[33mtype\u001b[39m=\u001b[32m\"submit\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mSoumettre la demande\u001b[0m\n            \u001b[36m</button>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n        \u001b[36m</form>\u001b[39m\n      \u001b[36m</div>\u001b[39m\n    \u001b[36m</body>\u001b[39m\n\n      406 |         await user.click(submitButton); // Soumission sans dates\n      407 |\n    > 408 |         expectToBeInDocument(await screen.findByText('La date de début est requise.'));\n          |                                           ^\n      409 |         expectToBeInDocument(screen.getByText('La date de fin est requise.'));\n      410 |         expectNotToHaveBeenCalled(mockedAxios.post);\n      411 |     });\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at node_modules/@testing-library/dom/dist/query-helpers.js:86:32\n      at Object.<anonymous> (src/modules/leaves/components/LeaveForm.test.tsx:408:43)\n\n  ● LeaveForm › Form Submission › should submit valid data to /api/leaves/batch and handle success\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"/api/leaves/batch\", [ObjectContaining {\"endDate\": \"2024-09-03\", \"reason\": \"Vacances annuelles\", \"startDate\": \"2024-09-02\", \"typeCode\": \"ANNUAL\", \"userId\": 1}]\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<form\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"space-y-6 max-w-2xl mx-auto\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"bg-gradient-to-r from-indigo-50 to-blue-50 p-4 rounded-lg shadow-sm mb-6\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<h3\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"text-lg font-medium text-gray-800 mb-2\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[0mNouvelle demande de congé\u001b[0m\n              \u001b[36m</h3>\u001b[39m\n              \u001b[36m<p\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"text-sm text-gray-600\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[0mComplétez le formulaire ci-dessous pour soumettre votre demande.\u001b[0m\n              \u001b[36m</p>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"bg-white p-6 rounded-lg shadow-md border border-gray-200\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"mb-6\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center justify-between\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<label\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700\"\u001b[39m\n                    \u001b[33mfor\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[0mType de congé\u001b[0m\n                  \u001b[36m</label>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"relative inline-block\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<span\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"text-gray-400 hover:text-gray-600 cursor-help\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<svg\u001b[39m\n                        \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-circle-help h-4 w-4\"\u001b[39m\n                        \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                        \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                        \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                        \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                        \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<circle\u001b[39m\n                          \u001b[33mcx\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                          \u001b[33mcy\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                          \u001b[33mr\u001b[39m=\u001b[32m\"10\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                        \u001b[36m<path\u001b[39m\n                          \u001b[33md\u001b[39m=\u001b[32m\"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                        \u001b[36m<path\u001b[39m\n                          \u001b[33md\u001b[39m=\u001b[32m\"M12 17h.01\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                      \u001b[36m</svg>\u001b[39m\n                    \u001b[36m</span>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"mt-1 relative\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<select\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"block w-full rounded-md border-gray-300 shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm py-2 px-3\"\u001b[39m\n                    \u001b[33mid\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                    \u001b[33mname\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                    \u001b[33mrequired\u001b[39m=\u001b[32m\"\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<option\u001b[39m\n                      \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[0m-- Sélectionner un type --\u001b[0m\n                    \u001b[36m</option>\u001b[39m\n                    \u001b[36m<option\u001b[39m\n                      \u001b[33mtitle\u001b[39m=\u001b[32m\"Congés annuels bruts\"\u001b[39m\n                      \u001b[33mvalue\u001b[39m=\u001b[32m\"ANNUAL\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[0mCongé annuel\u001b[0m\n                    \u001b[36m</option>\u001b[39m\n                    \u001b[36m<option\u001b[39m\n                      \u001b[33mtitle\u001b[39m=\u001b[32m\"RTT bruts\"\u001b[39m\n                      \u001b[33mvalue\u001b[39m=\u001b[32m\"RTT\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[0mRTT API (Raw)\u001b[0m\n                    \u001b[36m</option>\u001b[39m\n                    \u001b[36m<option\u001b[39m\n                      \u001b[33mtitle\u001b[39m=\u001b[32m\"Congé maladie brut\"\u001b[39m\n                      \u001b[33mvalue\u001b[39m=\u001b[32m\"SICK\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[0mMaladie\u001b[0m\n                    \u001b[36m</option>\u001b[39m\n                  \u001b[36m</select>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"grid grid-cols-1 gap-6 md:grid-cols-2 mb-6\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<label\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700 mb-1\"\u001b[39m\n                    \u001b[33mfor\u001b[39m=\u001b[32m\"startDate\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[0mDate de début\u001b[0m\n                  \u001b[36m</label>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker-wrapper\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<div\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker__input-container\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<input\u001b[39m\n                          \u001b[33mautocomplete\u001b[39m=\u001b[32m\"off\"\u001b[39m\n                          \u001b[33mclass\u001b[39m=\u001b[32m\"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 pl-10 pr-4 py-2 disabled:bg-gray-100 disabled:cursor-not-allowed\"\u001b[39m\n                          \u001b[33mid\u001b[39m=\u001b[32m\"startDate\"\u001b[39m\n                          \u001b[33mplaceholder\u001b[39m=\u001b[32m\"Sélectionner une date\"\u001b[39m\n                          \u001b[33mtype\u001b[39m=\u001b[32m\"text\"\u001b[39m\n                          \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                      \u001b[36m</div>\u001b[39m\n                    \u001b[36m</div>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<svg\u001b[39m\n                        \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-calendar h-5 w-5 text-gray-400\"\u001b[39m\n                        \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                        \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                        \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                        \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                        \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n            ...\n\n      45 |  */\n      46 | export function expectToHaveBeenCalledWith(mockFn: MockFn, ...args: any[]): void {\n    > 47 |     expect(mockFn).toHaveBeenCalledWith(...args);\n         |                    ^\n      48 | }\n      49 |\n      50 | /**\n\n      at toHaveBeenCalledWith (src/tests/utils/assertions.ts:47:20)\n      at src/modules/leaves/components/LeaveForm.test.tsx:507:43\n      at callback (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:76)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)\n\n  ● LeaveForm › Form Submission › should handle API error from /api/leaves/batch on submit\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"/api/leaves/batch\", Any<Array>\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<form\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"space-y-6 max-w-2xl mx-auto\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"bg-gradient-to-r from-indigo-50 to-blue-50 p-4 rounded-lg shadow-sm mb-6\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<h3\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"text-lg font-medium text-gray-800 mb-2\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[0mNouvelle demande de congé\u001b[0m\n              \u001b[36m</h3>\u001b[39m\n              \u001b[36m<p\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"text-sm text-gray-600\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[0mComplétez le formulaire ci-dessous pour soumettre votre demande.\u001b[0m\n              \u001b[36m</p>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"bg-white p-6 rounded-lg shadow-md border border-gray-200\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"mb-6\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center justify-between\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<label\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700\"\u001b[39m\n                    \u001b[33mfor\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[0mType de congé\u001b[0m\n                  \u001b[36m</label>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"relative inline-block\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<span\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"text-gray-400 hover:text-gray-600 cursor-help\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<svg\u001b[39m\n                        \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-circle-help h-4 w-4\"\u001b[39m\n                        \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                        \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                        \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                        \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                        \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<circle\u001b[39m\n                          \u001b[33mcx\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                          \u001b[33mcy\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                          \u001b[33mr\u001b[39m=\u001b[32m\"10\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                        \u001b[36m<path\u001b[39m\n                          \u001b[33md\u001b[39m=\u001b[32m\"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                        \u001b[36m<path\u001b[39m\n                          \u001b[33md\u001b[39m=\u001b[32m\"M12 17h.01\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                      \u001b[36m</svg>\u001b[39m\n                    \u001b[36m</span>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"mt-1 relative\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<select\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"block w-full rounded-md border-gray-300 shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm py-2 px-3\"\u001b[39m\n                    \u001b[33mid\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                    \u001b[33mname\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                    \u001b[33mrequired\u001b[39m=\u001b[32m\"\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<option\u001b[39m\n                      \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[0m-- Sélectionner un type --\u001b[0m\n                    \u001b[36m</option>\u001b[39m\n                    \u001b[36m<option\u001b[39m\n                      \u001b[33mtitle\u001b[39m=\u001b[32m\"Congés annuels bruts\"\u001b[39m\n                      \u001b[33mvalue\u001b[39m=\u001b[32m\"ANNUAL\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[0mCongé annuel\u001b[0m\n                    \u001b[36m</option>\u001b[39m\n                    \u001b[36m<option\u001b[39m\n                      \u001b[33mtitle\u001b[39m=\u001b[32m\"RTT bruts\"\u001b[39m\n                      \u001b[33mvalue\u001b[39m=\u001b[32m\"RTT\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[0mRTT API (Raw)\u001b[0m\n                    \u001b[36m</option>\u001b[39m\n                    \u001b[36m<option\u001b[39m\n                      \u001b[33mtitle\u001b[39m=\u001b[32m\"Congé maladie brut\"\u001b[39m\n                      \u001b[33mvalue\u001b[39m=\u001b[32m\"SICK\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[0mMaladie\u001b[0m\n                    \u001b[36m</option>\u001b[39m\n                  \u001b[36m</select>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"grid grid-cols-1 gap-6 md:grid-cols-2 mb-6\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<label\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700 mb-1\"\u001b[39m\n                    \u001b[33mfor\u001b[39m=\u001b[32m\"startDate\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[0mDate de début\u001b[0m\n                  \u001b[36m</label>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker-wrapper\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<div\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker__input-container\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<input\u001b[39m\n                          \u001b[33mautocomplete\u001b[39m=\u001b[32m\"off\"\u001b[39m\n                          \u001b[33mclass\u001b[39m=\u001b[32m\"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 pl-10 pr-4 py-2 disabled:bg-gray-100 disabled:cursor-not-allowed\"\u001b[39m\n                          \u001b[33mid\u001b[39m=\u001b[32m\"startDate\"\u001b[39m\n                          \u001b[33mplaceholder\u001b[39m=\u001b[32m\"Sélectionner une date\"\u001b[39m\n                          \u001b[33mtype\u001b[39m=\u001b[32m\"text\"\u001b[39m\n                          \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                      \u001b[36m</div>\u001b[39m\n                    \u001b[36m</div>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<svg\u001b[39m\n                        \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-calendar h-5 w-5 text-gray-400\"\u001b[39m\n                        \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                        \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                        \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                        \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                        \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n            ...\n\n      45 |  */\n      46 | export function expectToHaveBeenCalledWith(mockFn: MockFn, ...args: any[]): void {\n    > 47 |     expect(mockFn).toHaveBeenCalledWith(...args);\n         |                    ^\n      48 | }\n      49 |\n      50 | /**\n\n      at toHaveBeenCalledWith (src/tests/utils/assertions.ts:47:20)\n      at src/modules/leaves/components/LeaveForm.test.tsx:572:43\n      at callback (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:76)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)\n\n  ● LeaveForm › Form Submission › should handle general network error on submit\n\n    expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n    Expected: \"/api/leaves/batch\", Any<Array>\n\n    Number of calls: 0\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<html>\u001b[39m\n      \u001b[36m<head />\u001b[39m\n      \u001b[36m<body>\u001b[39m\n        \u001b[36m<div>\u001b[39m\n          \u001b[36m<form\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"space-y-6 max-w-2xl mx-auto\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"bg-gradient-to-r from-indigo-50 to-blue-50 p-4 rounded-lg shadow-sm mb-6\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<h3\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"text-lg font-medium text-gray-800 mb-2\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[0mNouvelle demande de congé\u001b[0m\n              \u001b[36m</h3>\u001b[39m\n              \u001b[36m<p\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"text-sm text-gray-600\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[0mComplétez le formulaire ci-dessous pour soumettre votre demande.\u001b[0m\n              \u001b[36m</p>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"bg-white p-6 rounded-lg shadow-md border border-gray-200\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"mb-6\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center justify-between\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<label\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700\"\u001b[39m\n                    \u001b[33mfor\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[0mType de congé\u001b[0m\n                  \u001b[36m</label>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"relative inline-block\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<span\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"text-gray-400 hover:text-gray-600 cursor-help\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<svg\u001b[39m\n                        \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-circle-help h-4 w-4\"\u001b[39m\n                        \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                        \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                        \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                        \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                        \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<circle\u001b[39m\n                          \u001b[33mcx\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                          \u001b[33mcy\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                          \u001b[33mr\u001b[39m=\u001b[32m\"10\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                        \u001b[36m<path\u001b[39m\n                          \u001b[33md\u001b[39m=\u001b[32m\"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                        \u001b[36m<path\u001b[39m\n                          \u001b[33md\u001b[39m=\u001b[32m\"M12 17h.01\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                      \u001b[36m</svg>\u001b[39m\n                    \u001b[36m</span>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"mt-1 relative\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<select\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"block w-full rounded-md border-gray-300 shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm py-2 px-3\"\u001b[39m\n                    \u001b[33mid\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                    \u001b[33mname\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                    \u001b[33mrequired\u001b[39m=\u001b[32m\"\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<option\u001b[39m\n                      \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[0m-- Sélectionner un type --\u001b[0m\n                    \u001b[36m</option>\u001b[39m\n                    \u001b[36m<option\u001b[39m\n                      \u001b[33mtitle\u001b[39m=\u001b[32m\"Congés annuels bruts\"\u001b[39m\n                      \u001b[33mvalue\u001b[39m=\u001b[32m\"ANNUAL\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[0mCongé annuel\u001b[0m\n                    \u001b[36m</option>\u001b[39m\n                    \u001b[36m<option\u001b[39m\n                      \u001b[33mtitle\u001b[39m=\u001b[32m\"RTT bruts\"\u001b[39m\n                      \u001b[33mvalue\u001b[39m=\u001b[32m\"RTT\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[0mRTT API (Raw)\u001b[0m\n                    \u001b[36m</option>\u001b[39m\n                    \u001b[36m<option\u001b[39m\n                      \u001b[33mtitle\u001b[39m=\u001b[32m\"Congé maladie brut\"\u001b[39m\n                      \u001b[33mvalue\u001b[39m=\u001b[32m\"SICK\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[0mMaladie\u001b[0m\n                    \u001b[36m</option>\u001b[39m\n                  \u001b[36m</select>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"grid grid-cols-1 gap-6 md:grid-cols-2 mb-6\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<label\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700 mb-1\"\u001b[39m\n                    \u001b[33mfor\u001b[39m=\u001b[32m\"startDate\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[0mDate de début\u001b[0m\n                  \u001b[36m</label>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker-wrapper\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<div\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker__input-container\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<input\u001b[39m\n                          \u001b[33mautocomplete\u001b[39m=\u001b[32m\"off\"\u001b[39m\n                          \u001b[33mclass\u001b[39m=\u001b[32m\"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 pl-10 pr-4 py-2 disabled:bg-gray-100 disabled:cursor-not-allowed\"\u001b[39m\n                          \u001b[33mid\u001b[39m=\u001b[32m\"startDate\"\u001b[39m\n                          \u001b[33mplaceholder\u001b[39m=\u001b[32m\"Sélectionner une date\"\u001b[39m\n                          \u001b[33mtype\u001b[39m=\u001b[32m\"text\"\u001b[39m\n                          \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                        \u001b[36m/>\u001b[39m\n                      \u001b[36m</div>\u001b[39m\n                    \u001b[36m</div>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<svg\u001b[39m\n                        \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-calendar h-5 w-5 text-gray-400\"\u001b[39m\n                        \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                        \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                        \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                        \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                        \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                        \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                        \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n            ...\n\n      45 |  */\n      46 | export function expectToHaveBeenCalledWith(mockFn: MockFn, ...args: any[]): void {\n    > 47 |     expect(mockFn).toHaveBeenCalledWith(...args);\n         |                    ^\n      48 | }\n      49 |\n      50 | /**\n\n      at toHaveBeenCalledWith (src/tests/utils/assertions.ts:47:20)\n      at src/modules/leaves/components/LeaveForm.test.tsx:611:43\n      at callback (node_modules/@testing-library/dom/dist/config.js:47:12)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:76)\n      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)\n      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)\n\n  ● LeaveForm › Form Submission › should not submit if calculation is not successful\n\n    Unable to find an element with the text: /Calcul des jours en cours.../i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.\n\n    Ignored nodes: comments, script, style\n    \u001b[36m<body>\u001b[39m\n      \u001b[36m<div>\u001b[39m\n        \u001b[36m<form\u001b[39m\n          \u001b[33mclass\u001b[39m=\u001b[32m\"space-y-6 max-w-2xl mx-auto\"\u001b[39m\n        \u001b[36m>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"bg-gradient-to-r from-indigo-50 to-blue-50 p-4 rounded-lg shadow-sm mb-6\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<h3\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"text-lg font-medium text-gray-800 mb-2\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mNouvelle demande de congé\u001b[0m\n            \u001b[36m</h3>\u001b[39m\n            \u001b[36m<p\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"text-sm text-gray-600\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[0mComplétez le formulaire ci-dessous pour soumettre votre demande.\u001b[0m\n            \u001b[36m</p>\u001b[39m\n          \u001b[36m</div>\u001b[39m\n          \u001b[36m<div\u001b[39m\n            \u001b[33mclass\u001b[39m=\u001b[32m\"bg-white p-6 rounded-lg shadow-md border border-gray-200\"\u001b[39m\n          \u001b[36m>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"mb-6\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"flex items-center justify-between\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<label\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700\"\u001b[39m\n                  \u001b[33mfor\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mType de congé\u001b[0m\n                \u001b[36m</label>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"relative inline-block\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<span\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"text-gray-400 hover:text-gray-600 cursor-help\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<svg\u001b[39m\n                      \u001b[33maria-hidden\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"lucide lucide-circle-help h-4 w-4\"\u001b[39m\n                      \u001b[33mfill\u001b[39m=\u001b[32m\"none\"\u001b[39m\n                      \u001b[33mheight\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mstroke\u001b[39m=\u001b[32m\"currentColor\"\u001b[39m\n                      \u001b[33mstroke-linecap\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-linejoin\u001b[39m=\u001b[32m\"round\"\u001b[39m\n                      \u001b[33mstroke-width\u001b[39m=\u001b[32m\"2\"\u001b[39m\n                      \u001b[33mviewBox\u001b[39m=\u001b[32m\"0 0 24 24\"\u001b[39m\n                      \u001b[33mwidth\u001b[39m=\u001b[32m\"24\"\u001b[39m\n                      \u001b[33mxmlns\u001b[39m=\u001b[32m\"http://www.w3.org/2000/svg\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<circle\u001b[39m\n                        \u001b[33mcx\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                        \u001b[33mcy\u001b[39m=\u001b[32m\"12\"\u001b[39m\n                        \u001b[33mr\u001b[39m=\u001b[32m\"10\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                      \u001b[36m<path\u001b[39m\n                        \u001b[33md\u001b[39m=\u001b[32m\"M12 17h.01\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</svg>\u001b[39m\n                  \u001b[36m</span>\u001b[39m\n                \u001b[36m</div>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"mt-1 relative\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<select\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"block w-full rounded-md border-gray-300 shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm py-2 px-3\"\u001b[39m\n                  \u001b[33mid\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                  \u001b[33mname\u001b[39m=\u001b[32m\"leaveType\"\u001b[39m\n                  \u001b[33mrequired\u001b[39m=\u001b[32m\"\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<option\u001b[39m\n                    \u001b[33mvalue\u001b[39m=\u001b[32m\"\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[0m-- Sélectionner un type --\u001b[0m\n                  \u001b[36m</option>\u001b[39m\n                  \u001b[36m<option\u001b[39m\n                    \u001b[33mtitle\u001b[39m=\u001b[32m\"Congés annuels bruts\"\u001b[39m\n                    \u001b[33mvalue\u001b[39m=\u001b[32m\"ANNUAL\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[0mCongé annuel\u001b[0m\n                  \u001b[36m</option>\u001b[39m\n                  \u001b[36m<option\u001b[39m\n                    \u001b[33mtitle\u001b[39m=\u001b[32m\"RTT bruts\"\u001b[39m\n                    \u001b[33mvalue\u001b[39m=\u001b[32m\"RTT\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[0mRTT API (Raw)\u001b[0m\n                  \u001b[36m</option>\u001b[39m\n                  \u001b[36m<option\u001b[39m\n                    \u001b[33mtitle\u001b[39m=\u001b[32m\"Congé maladie brut\"\u001b[39m\n                    \u001b[33mvalue\u001b[39m=\u001b[32m\"SICK\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[0mMaladie\u001b[0m\n                  \u001b[36m</option>\u001b[39m\n                \u001b[36m</select>\u001b[39m\n              \u001b[36m</div>\u001b[39m\n            \u001b[36m</div>\u001b[39m\n            \u001b[36m<div\u001b[39m\n              \u001b[33mclass\u001b[39m=\u001b[32m\"grid grid-cols-1 gap-6 md:grid-cols-2 mb-6\"\u001b[39m\n            \u001b[36m>\u001b[39m\n              \u001b[36m<div\u001b[39m\n                \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n              \u001b[36m>\u001b[39m\n                \u001b[36m<label\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"block text-sm font-medium text-gray-700 mb-1\"\u001b[39m\n                  \u001b[33mfor\u001b[39m=\u001b[32m\"startDate\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[0mDate de début\u001b[0m\n                \u001b[36m</label>\u001b[39m\n                \u001b[36m<div\u001b[39m\n                  \u001b[33mclass\u001b[39m=\u001b[32m\"relative\"\u001b[39m\n                \u001b[36m>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker-wrapper\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker__input-container\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<input\u001b[39m\n                        \u001b[33mautocomplete\u001b[39m=\u001b[32m\"off\"\u001b[39m\n                        \u001b[33mclass\u001b[39m=\u001b[32m\"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 pl-10 pr-4 py-2 disabled:bg-gray-100 disabled:cursor-not-allowed react-datepicker-ignore-onclickoutside\"\u001b[39m\n                        \u001b[33mid\u001b[39m=\u001b[32m\"startDate\"\u001b[39m\n                        \u001b[33mplaceholder\u001b[39m=\u001b[32m\"Sélectionner une date\"\u001b[39m\n                        \u001b[33mtype\u001b[39m=\u001b[32m\"text\"\u001b[39m\n                        \u001b[33mvalue\u001b[39m=\u001b[32m\"02/09/2024\"\u001b[39m\n                      \u001b[36m/>\u001b[39m\n                    \u001b[36m</div>\u001b[39m\n                  \u001b[36m</div>\u001b[39m\n                  \u001b[36m<div\u001b[39m\n                    \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker__tab-loop\"\u001b[39m\n                  \u001b[36m>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker__tab-loop__start\"\u001b[39m\n                      \u001b[33mtabindex\u001b[39m=\u001b[32m\"0\"\u001b[39m\n                    \u001b[36m/>\u001b[39m\n                    \u001b[36m<div\u001b[39m\n                      \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker-popper z-50\"\u001b[39m\n                      \u001b[33mdata-placement\u001b[39m=\u001b[32m\"bottom\"\u001b[39m\n                      \u001b[33mstyle\u001b[39m=\u001b[32m\"position: absolute; left: 0px; top: 0px; transform: translate(0px, 10px);\"\u001b[39m\n                    \u001b[36m>\u001b[39m\n                      \u001b[36m<div\u001b[39m\n                        \u001b[33mstyle\u001b[39m=\u001b[32m\"display: contents;\"\u001b[39m\n                      \u001b[36m>\u001b[39m\n                        \u001b[36m<div\u001b[39m\n                          \u001b[33mstyle\u001b[39m=\u001b[32m\"display: contents;\"\u001b[39m\n                        \u001b[36m>\u001b[39m\n                          \u001b[36m<div\u001b[39m\n                            \u001b[33maria-label\u001b[39m=\u001b[32m\"Choose Date\"\u001b[39m\n                            \u001b[33maria-modal\u001b[39m=\u001b[32m\"true\"\u001b[39m\n                            \u001b[33mclass\u001b[39m=\u001b[32m\"react-datepicker shadow-lg rounded-md border bo...\n\n      653 |             await fillDatesInForm(user, '02/09/2024', '03/09/2024');\n      654 |             // Le hook est mocké pour retourner 'loading' avec ces dates.\n    > 655 |             await screen.findByText(/Calcul des jours en cours.../i, {}, { timeout: 3000 });\n          |                          ^\n      656 |\n      657 |             const submitButton = screen.getByText('Soumettre la demande');\n      658 |             await user.click(submitButton);\n\n      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)\n      at node_modules/@testing-library/dom/dist/query-helpers.js:86:32\n      at Object.<anonymous> (src/modules/leaves/components/LeaveForm.test.tsx:655:26)\n\n\nTest Suites: 15 failed, 3 skipped, 15 passed, 30 of 33 total\nTests:       67 failed, 14 skipped, 357 passed, 438 total\nSnapshots:   0 total\nTime:        14.804 s\nRan all test suites matching /src\\/modules\\/leaves|src\\/lib\\/auth/i.\n"
    }
  },
  "recommendations": [],
  "timestamp": "2025-05-25T17:17:28.399Z",
  "summary": {
    "bundleSize": 4031551864,
    "largeFilesCount": 9,
    "performanceIssues": 3,
    "recommendations": [
      "Bundle total trop volumineux. Considérer le code splitting.",
      "9 fichiers volumineux détectés. Optimiser ou diviser."
    ]
  }
}